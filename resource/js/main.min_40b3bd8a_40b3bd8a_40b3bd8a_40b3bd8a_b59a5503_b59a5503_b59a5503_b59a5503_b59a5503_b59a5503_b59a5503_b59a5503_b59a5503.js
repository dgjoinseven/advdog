function S(){$tempNetBytes=new egret.ByteArray}function WB(t){writeArg($tempNetBytes,t)}function E(t,e,i,n){game.Net.sendBytes(t,$tempNetBytes,e,i,n)}function W(t,e){122>e?t.writeByte(e):128>e?(t.writeByte(122),t.writeByte(e)):32768>e?(t.writeByte(123),t.writeShort(e)):2147483647>e?(t.writeByte(124),t.writeInt(e)):(t.writeByte(125),t.writeDouble(e))}function R(t){var e=t.readByte();return 122>e&&e>-128?e:122==e?t.readByte():123==e?t.readShort():124==e?t.readInt():125==e?t.readDouble():126==e?t.readFloat():127==e?t.readDouble():0}function writeArg(t,e){if("number"==typeof e)W(t,e);else if("string"==typeof e){var i=new egret.ByteArray;i.writeUTFBytes(e),W(t,i.length),t.writeBytes(i)}else if("boolean"==typeof e)t.writeBoolean(e);else if(e instanceof Array){W(t,e.length);for(var n=0;n<e.length;n++)writeArg(t,e[n])}}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{h(n.next(t))}catch(e){r(e)}}function a(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},asf;!function(t){var e=function(){function e(){this.listenerMap=new t.ObjectMap}return e.prototype.addNoticeData=function(e,i,n,o){if(null==n)throw new Error("thisObj不能为空");var r=this.listenerMap.get(e);r||(r=new t.NoticeList,this.listenerMap.put(e,r));for(var s=r.listeners,a=s.length,h=0;a>h;h++)if(s[h].listener==i&&s[h].thisObj==n)return null;r.isNoticing&&(r.listeners=s=s.concat());var l=new t.NoticeData(i,n,o);return s.push(l),o&&(r.onceList||(r.onceList=[]),r.onceList.push(l)),l},e.prototype.off=function(t,e,i){var n=this.listenerMap.get(t);if(n){var o=n.listeners;n.isNoticing&&(n.listeners=o=o.concat());for(var r,s=o.length,a=0;s>a;a++)if(r=o[a],r.listener==e&&r.thisObj==i)return void o.splice(a,1)}},e.prototype.getObserverFun=function(t,e){var i=String(t),n=e.update;return e.hasOwnProperty(i)&&e[i]instanceof Function&&(n=e[i]),n},e.prototype.notice=function(t,e){var i=this.listenerMap.get(t);if(i){var n=i.listeners,o=n.length;i.isNoticing=!0;for(var r,s=0;o>s;s++)r=n[s],r.listener.apply(r.thisObj,e);if(i.isNoticing=!1,i.onceList){for(var a=i.onceList;a.length;)r=a.pop(),this.off(t,r.listener,r.thisObj);delete i.onceList}0==n.length&&this.listenerMap.remove(t)}},e.prototype.send=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.notice(t,e)},e.prototype.on=function(t,e,i){return this.addNoticeData(t,e,i,!1)},e.prototype.onObserver=function(t,e,i){return this.addNoticeData(t,this.getObserverFun(t,e),e,i)},e.prototype.offs=function(t){this.listenerMap.forKeyValue(function(e,i){for(var n=i.length,o=0;n>o;o++)i[o].thisObj==t&&this.off(e,i[o].listener,i[o].thisObj)},this)},e.prototype.offObserver=function(t,e){this.off(t,this.getObserverFun(t,e),e)},e.prototype.once=function(t,e,i){return this.addNoticeData(t,e,i,!0)},e}();t.Subjects=e,__reflect(e.prototype,"asf.Subjects",["asf.ISubjects"])}(asf||(asf={}));var morn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isDestroy=!1,e.p=new egret.Point,e}return __extends(e,t),e.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},e.prototype.startDrag=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=null),this.touchEnabled=this.touchChildren=!0,this.lockCenter=i,this.bounds2=n,this.p.x=t,this.p.y=e,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this)},e.prototype.stopDrag=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStart,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this)},Object.defineProperty(e.prototype,"mouseX",{get:function(){return this.p.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this.p.y},enumerable:!0,configurable:!0}),e.prototype.onStart=function(t){this.p.x=t.stageX,this.p.y=t.stageY,this.lockCenter&&(this.x=t.stageX-.5*this.width,this.y=t.stageY-.5*this.height),console.log("onStart"),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this)},e.prototype.onMove=function(t){this.x+=t.stageX-this.p.x,this.y+=t.stageY-this.p.y,this.bounds2&&(this.x<this.bounds2.x?this.x=0:this.x>this.bounds2.width-this.width&&(this.x=this.bounds2.width-this.width),this.y<this.bounds2.y?this.y=0:this.y>this.bounds2.height-this.height&&(this.y=this.bounds2.height-this.height)),this.p.x=t.stageX,this.p.y=t.stageY},e.prototype.onEnd=function(t){console.log("end"),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this)},e.prototype.destroy=function(){this.remove();for(var t=0;this.numChildren>0;){var i=this.getChildAt(t);i&&(i instanceof e?(i.remove(),i.destroy()):(this.removeChild(i),i.hasOwnProperty("destroy")&&i.destroy()))}this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStart,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this.isDestroy=!0},e}(egret.Sprite);t.Sprite=e,__reflect(e.prototype,"morn.Sprite")}(morn||(morn={}));var asf;!function(t){t.$hashCount=1;var e=function(){function e(){this._hashCode=t.$hashCount++}return Object.defineProperty(e.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e},e}();t.ASFObject=e,__reflect(e.prototype,"asf.ASFObject",["asf.IHashObject","asf.ICloneable"])}(asf||(asf={}));var mvc;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;return i&&""!=i&&(n.name=asf.StringUtils.uncapitalize(i)),n.mvcSession=t.MvcSession.getInstance(),n}return __extends(i,e),i.prototype.mvcOn=function(e,i,n){var o=t.Context.subjects.on(e,i,n);o&&(this.$mvcNotices||(this.$mvcNotices=[]),o.notice=e,this.$mvcNotices.push(o))},i.prototype.init=function(){},i.prototype.destroy=function(e){if(void 0===e&&(e=null),!this.isDestroy){if(this.isDestroy=!0,delete this.mvcSession,this.$mvcNotices){for(var i,n=this.$mvcNotices.length,o=t.Context.subjects,r=0;n>r;r++)i=this.$mvcNotices[r],o.off(i.notice,i.listener,i.thisObj);delete this.$mvcNotices}this.onDestroy()}},i.prototype.onDestroy=function(){},i}(asf.Subjects);t.BasicCore=e,__reflect(e.prototype,"mvc.BasicCore",["mvc.IBasicCore","asf.IDestory"])}(mvc||(mvc={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._contentWidth=0,t._contentHeight=0,t._disabled=!1,t._dataStr="",t._guide="",t.touchEnabled=t.touchChildren=!1,t.preinitialize(),t.createChildren(),t.initialize(),t}return __extends(i,e),i.prototype.on=function(t,e,i,n,o){this.addEventListener(t,e,i,n,o)},i.prototype.off=function(t,e,i,n){this.removeEventListener(t,e,i,n)},i.prototype.preinitialize=function(){this._contentWidth=0,this._contentHeight=0},i.prototype.createChildren=function(){},i.prototype.initialize=function(){},i.prototype.removeLater=function(t,e){asf.App.render.removeLater(t,e)},i.prototype.callLater=function(t,e,i){void 0===i&&(i=null),asf.App.render.callLater(t,e,i)},i.prototype.exeCallLater=function(t,e){asf.App.render.exeCallLater(t,e)},i.prototype.sendEvent=function(e,i){void 0===i&&(i=null),this.hasEventListener(e)&&this.dispatchEvent(new t.UIEvent(e,i))},i.prototype.removeChildByName=function(t){var e=this.getChildByName(t);e&&this.removeChild(e)},i.prototype.setPosition=function(t,e){this.x=t,this.y=e},Object.defineProperty(i.prototype,"x",{get:function(){return this.exeCallLater(this.resetPosition,this),egret.superGetter(i,this,"x")},set:function(e){egret.superSetter(i,this,"x",e),this.callLater(this.sendEvent,this,[t.UIEvent.MOVE])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.exeCallLater(this.resetPosition,this),egret.superGetter(i,this,"y")},set:function(e){egret.superSetter(i,this,"y",e),this.callLater(this.sendEvent,this,[t.UIEvent.MOVE])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.exeCallLater(this.resetPosition,this),isNaN(this._width)?0!=this._contentWidth?this._contentWidth:this.measureWidth:this._width},set:function(t){this._width!=t&&(this._width=t,this.callLater(this.changeSize,this),this._layOutEabled&&this.callLater(this.resetPosition,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gray",{set:function(e){t.ObjectUtils.gray(this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayWidth",{get:function(){return this.width*this.scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measureWidth",{get:function(){this.commitMeasure();for(var t=0,e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.x+i.width*i.scaleX,t))}return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.exeCallLater(this.resetPosition,this),isNaN(this._height)?this._contentHeight&&0!=this._contentHeight?this._contentHeight:this.measureHeight:this._height},set:function(t){this._height!=t&&(this._height=t,this.callLater(this.changeSize,this),this._layOutEabled&&this.callLater(this.resetPosition,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayHeight",{get:function(){return this.height*this.scaleY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measureHeight",{get:function(){this.commitMeasure();for(var t=0,e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.y+i.height*i.scaleY,t))}return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleX",{get:function(){return egret.superGetter(i,this,"scaleX")},set:function(t){egret.superSetter(i,this,"scaleX",t),this.callLater(this.changeSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return egret.superGetter(i,this,"scaleY")},set:function(t){egret.superSetter(i,this,"scaleY",t),this.callLater(this.changeSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.scaleX},set:function(t){this.scaleX=this.scaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled!=e&&(this._disabled=e,this.touchEnabled=!e,e?this.touchChildren=!1:this.touchChildren=!0,this.touchChildren=e?!1:this._mouseChildren,t.ObjectUtils.gray(this,this._disabled))},enumerable:!0,configurable:!0}),i.prototype.setGuideHandler=function(t,e){this._guideCallback=new asf.CallBack(t,e)},i.prototype.getGuideHandler=function(){return this._guideCallback},i.prototype.executeGuideHandler=function(){this._guideCallback&&this._guideCallback.execute()},Object.defineProperty(i.prototype,"mouseChildren",{get:function(){return this.touchChildren},set:function(t){this._mouseChildren=t,this.touchChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mouseEnabled",{get:function(){return this.touchEnabled},set:function(t){this.touchEnabled=t},enumerable:!0,configurable:!0}),i.prototype.commitMeasure=function(){},i.prototype.changeSize=function(){this.sendEvent(egret.Event.RESIZE)},i.prototype.resetPosition=function(){this.parent&&(isNaN(this._centerX)?isNaN(this._left)?isNaN(this._right)||(this.x=this.parent.width-this.displayWidth-this._right):(this.x=this._left,isNaN(this._right)||(this.width=(this.parent.width-this._left-this._right)/this.scaleX)):this.x=.5*(this.parent.width-this.displayWidth)+this._centerX,isNaN(this._centerY)?isNaN(this._top)?isNaN(this._bottom)||(this.y=this.parent.height-this.displayHeight-this._bottom):(this.y=this._top,isNaN(this._bottom)||(this.height=(this.parent.height-this._top-this._bottom)/this.scaleY)):this.y=.5*(this.parent.height-this.displayHeight)+this._centerY)},i.prototype.onRemoved=function(t){t.target==this&&this.parent.removeEventListener(egret.Event.RESIZE,this.onResize,this)},i.prototype.onAdded=function(t){t.target==this&&(this.parent.addEventListener(egret.Event.RESIZE,this.onResize,this),this.callLater(this.resetPosition,this))},i.prototype.onResize=function(t){this.callLater(this.resetPosition,this)},Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skin",{get:function(){return""},set:function(t){this.initStyle()},enumerable:!0,configurable:!0}),i.prototype.initStyle=function(){},Object.defineProperty(i.prototype,"dataStr",{get:function(){return this._dataStr},set:function(t){this._dataStr=t},enumerable:!0,configurable:!0}),i.prototype.setRedDot=function(t){},Object.defineProperty(i.prototype,"guide",{get:function(){return this._guide},set:function(e){""!=this._guide&&t.GuideMgr.getInstance().remove(this._guide),this._guide=e,t.GuideMgr.getInstance().add(this._guide,this)},enumerable:!0,configurable:!0}),i.prototype.addGuideSubId=function(t){this.guide=this._guide.split("#")[0]+"#"+t},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){this._dataSource=t;var e;for(e in this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toolTip",{get:function(){return this._toolTip},set:function(t){this._toolTip!=t&&(this._toolTip=t,Boolean(t))},enumerable:!0,configurable:!0}),i.prototype.onRollMouse=function(t){},Object.defineProperty(i.prototype,"top",{get:function(){return this._top},set:function(t){this._top=t,this.layOutEabled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this._bottom},set:function(t){this._bottom=t,this.layOutEabled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,this.layOutEabled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,this.layOutEabled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"centerX",{get:function(){return this._centerX},set:function(t){this._centerX=t,this.layOutEabled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"centerY",{get:function(){return this._centerY},set:function(t){this._centerY=t,this.layOutEabled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layOutEabled",{set:function(t){this._layOutEabled!=t&&(this._layOutEabled=t,this.removeEventListener(egret.Event.ADDED,this.onAdded,this),this.removeEventListener(egret.Event.REMOVED,this.onRemoved,this),this.addEventListener(egret.Event.ADDED,this.onAdded,this),this.addEventListener(egret.Event.REMOVED,this.onRemoved,this)),this.callLater(this.resetPosition,this)},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this.filters=[],e.prototype.destroy.call(this),this.removeEventListener(egret.Event.ADDED,this.onAdded,this),this.removeEventListener(egret.Event.REMOVED,this.onRemoved,this),""!=this._guide&&t.GuideMgr.getInstance().remove(this._guide),this._guideCallback&&this._guideCallback.destroy(),this._tag=null,this._dataSource=null,this._toolTip=null,this._guideCallback=null,this.removeLater(this.resetPosition,this),this.removeLater(this.changeSize,this),this.removeLater(this.sendEvent,this)},i}(t.Sprite);t.Component=e,__reflect(e.prototype,"morn.Component",["morn.IComponent","morn.IDisplayObjectContainer","egret.IEventDispatcher"])}(morn||(morn={}));var mvc;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.viewOpen=function(){},e.prototype.viewClose=function(){},e}(t.BasicCore);t.BasicHelper=e,__reflect(e.prototype,"mvc.BasicHelper",["mvc.IHelper","asf.ISubjects"])}(mvc||(mvc={}));var asf;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.clear(),t}return __extends(i,e),i.prototype.put=function(t,e){var i=this.$keys.indexOf(t);-1==i?(this.$keys.push(t),this.$values.push(e)):this.$values[i]=e},i.prototype.get=function(t){var e=this.$keys.indexOf(t);return-1==e?null:this.$values[e]},i.prototype.remove=function(t){var e=this.$keys.indexOf(t);if(-1==e)return null;var i=this.get(t);return this.$keys.splice(e,1),this.$values.splice(e,1),i},i.prototype.indexOf=function(t){return this.$keys.indexOf(t)},i.prototype.isEmpty=function(){return 0==this.$keys.length},i.prototype.hasKey=function(t){return-1!=this.$keys.indexOf(t)},i.prototype.hasValue=function(t){return-1!=this.$values.indexOf(t)},i.prototype.size=function(){return this.$keys.length},i.prototype.keys=function(t){return void 0===t&&(t=!0),t?this.$keys.concat():this.$keys},i.prototype.values=function(t){return void 0===t&&(t=!0),t?this.$values.concat():this.$values},i.prototype.forEach=function(t,e){for(var i=this.$values,n=i.length,o=0;n>o;o++)t.call(e,i[o])},i.prototype.forKeyValue=function(t,e){for(var i=this.$values,n=this.$keys,o=i.length,r=0;o>r;r++)t.call(e,n[r],i[r])},i.prototype.getContainer=function(){return this.$values},i.prototype.clear=function(){this.$keys=[],this.$values=[]},i.prototype.destroy=function(e){for(var i=this.$values.length,n=0;i>n;n++)t.DestroyUtils.destroy(this.$values[n]);delete this.$keys,delete this.$values},i}(t.ASFObject);t.Dictionary=e,__reflect(e.prototype,"asf.Dictionary",["asf.IMap","asf.IDestory"])}(asf||(asf={}));var mvc;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.mViews=[],i}return __extends(i,e),i.prototype.start=function(){},i.prototype.takeServer=function(){},i.prototype.$addView=function(e){if(-1!=this.mViews.indexOf(e))throw new Error("不能添加重复的view");this.mViews.push(e),e.once(t.MvcConst.VIEW_DESTORY,this.viewDestroyEvent,this)},i.prototype.viewDestroyEvent=function(t){asf.ArrayUtils.removeItem(this.mViews,t),this[t.name]&&(this[t.name]=null)},i.prototype.closes=function(){for(var t=this.mViews.length,e=t-1;e>=0;e--)this.mViews[e].close()},i.prototype.destroy=function(t){void 0===t&&(t=null);for(var i=this.mViews.concat(),n=0;n<i.length;n++)i[n].isDestroy||i[n].destroy();e.prototype.destroy.call(this,t),delete this.mViews},i}(t.BasicCore);t.BasicModule=e,__reflect(e.prototype,"mvc.BasicModule",["mvc.IModule","asf.ISubjects"])}(mvc||(mvc={}));var mvc;!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;n.lv=0,n.isCloseDestroy=!0,n.openFlag=!1,n.mHelpers=[],n.layer=t.MvcConst.VIEW_LAYER;var o={};return n.config=o,n}return __extends(i,e),i.prototype.initLayoutJson=function(t){t&&t.execute()},i.prototype.getContainer=function(){return this.container},i.prototype.addHelper=function(t){if(-1!=this.mHelpers.indexOf(t))throw new Error("不能添加重复的helper");this.mHelpers.push(t)},i.prototype.removeHelper=function(t){asf.ArrayUtils.removeItem(this.mHelpers,t)},i.prototype.start=function(){this.onStart()},i.prototype.onStart=function(){},i.prototype.open=function(e){this.isOpen=!0,e&&(this.openParam=e),t.Context.$addView(this),this.onOpen(e)},i.prototype.onOpen=function(t){},i.prototype.close=function(){this.openFlag=!1,this.isOpen&&(this.isOpen=!1,this.openParam&&(this.openParam=null),this.onClose(),t.Context.$closeView(this),this.isCloseDestroy&&!this.isDestroy&&this.destroy())},i.prototype.initCompelete=function(){this.notice(t.MvcConst.VIEW_COMPLETE)},i.prototype.onClose=function(){},i.prototype.destroy=function(i){if(void 0===i&&(i=null),!this.isDestroy){e.prototype.destroy.call(this,i),this.send(t.MvcConst.VIEW_DESTORY,this);for(var n=0;n<this.mHelpers.length;n++)this.mHelpers[n].destroy(i)}},i}(t.BasicCore);t.BasicView=e,__reflect(e.prototype,"mvc.BasicView",["mvc.IView","asf.ISubjects"])}(mvc||(mvc={}));var morn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"isCacheAsBitmap",{get:function(){return this.cacheAsBitmap},set:function(t){this.cacheAsBitmap=t},enumerable:!0,configurable:!0}),e.prototype.preinitialize=function(){this.touchEnabled=this.touchChildren=!0},e.prototype.removeElement=function(t){t&&this.contains(t)&&this.removeChild(t)},e.prototype.removeAllChild=function(t){void 0===t&&(t=null);for(var e=this.numChildren-1;e>-1;e--)t!=this.getChildAt(e)&&this.removeChildAt(e)},e.prototype.insertAbove=function(t,e){this.removeElement(t);var i=this.getChildIndex(e);this.addChildAt(t,Math.min(i+1,this.numChildren))},e.prototype.insertBelow=function(t,e){this.removeElement(t);var i=this.getChildIndex(e);this.addChildAt(t,Math.max(i,0))},Object.defineProperty(e.prototype,"dataSource",{set:function(t){this._dataSource=t;var e;for(e in t){var i=this.getChildByName(e);i?i.dataSource=t[e]:this.hasOwnProperty(e)&&(this[e]=t[e])}},enumerable:!0,configurable:!0}),e}(t.Component);t.Box=e,__reflect(e.prototype,"morn.Box",["morn.IBox"])}(morn||(morn={}));var asf;!function(t){var e=function(){function e(t){this.listenerList=new Array,this.noticeStr=t}return e.prototype.addNoticeData=function(e,i,n){if(null==i)throw new Error("thisObj不能为空");for(var o=this.listenerList,r=o.length,s=0;r>s;s++)if(o[s].listener==e)return;o.push(new t.NoticeData(e,i,n))},e.prototype.getObserverFun=function(t){var e=t.update;return t.hasOwnProperty(this.noticeStr)&&t[this.noticeStr]instanceof Function&&(e=t[this.noticeStr]),e},e.prototype.setNotice=function(t){this.noticeStr=t},e.prototype.notice=function(t){var e,i,n=this.listenerList;if(null!=n&&(e=n.length)>0)for(var o=0;e>o;o++)i=n[o],i.listener.apply(i.thisObj,t),i.isOnce&&(n.splice(o,1),o--,e--)},e.prototype.send=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.notice(t)},e.prototype.on=function(t,e){this.addNoticeData(t,e,!1)},e.prototype.onObserver=function(t,e){this.addNoticeData(this.getObserverFun(t),t,e)},e.prototype.off=function(t){var e=this.listenerList;if(null!=e)for(var i=e.length,n=0;i>n;n++)if(e[n].listener==t)return void e.splice(n,1)},e.prototype.offObserver=function(t){this.off(this.getObserverFun(t))},e.prototype.once=function(t,e){this.addNoticeData(t,e,!0)},e}();t.Subject=e,__reflect(e.prototype,"asf.Subject",["asf.ISubject"])}(asf||(asf={}));var asf;!function(t){var e=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.red=0,this.green=0,this.blue=0,this.red=t,this.green=e,this.blue=i}return t.prototype.getHex24=function(){return this.red<<16|this.green<<8|this.blue},t.prototype.clone=function(){return new t(this.red,this.green,this.blue)},t.prototype.toString=function(){return"red:"+this.red+"  green:"+this.green+"  blue:"+this.blue},t}();t.RgbColor=e,__reflect(e.prototype,"asf.RgbColor")}(asf||(asf={}));var mvc;!function(t){var e=function(){function t(t,e){this.needInit=!0,this.clazz=t,this.config=e}return Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance},set:function(t){this._instance=t},enumerable:!0,configurable:!0}),t}();t.BasicBean=e,__reflect(e.prototype,"mvc.BasicBean")}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function t(){this.id=0,this.lazy=!0,this.keep=!1,this.destroy=!0}return t}();t.BasicConfig=e,__reflect(e.prototype,"mvc.BasicConfig")}(mvc||(mvc={}));var asf;!function(t){var e=function(){function t(){}return t.createGradientGlowFilter=function(){var t=16306804,e=1,i=10,n=10,o=2,r=1,s=!0,a=!1,h=new egret.GlowFilter(t,e,i,n,o,r,s,a);return[h]},t.createFilter=function(t,e,i,n,o,r){void 0===e&&(e=1),void 0===i&&(i=6),void 0===n&&(n=6),void 0===o&&(o=2),void 0===r&&(r=1);var s=new egret.GlowFilter(t,e,i,n,o,r);return[s]},t.GrayFilter=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),t.GlodFilter=new egret.GlowFilter(16306804,1),t}();t.GameFilter=e,__reflect(e.prototype,"asf.GameFilter")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){this.mType=t.ActionConsts.SAME,this.mName=e.NAME}return e.prototype.initAction=function(t,e,i){void 0===i&&(i=null),this.mCallBack=t,this.mThisObj=e,this.mParam=i},e.prototype.setName=function(t){this.mName=t},e.prototype.setType=function(t){this.mType=t},e.prototype.getType=function(){return this.mType},e.prototype.getName=function(){return this.mName},e.prototype.start=function(e){if(this.mIsStart)throw new Error("重复调用start了"+this);this.isDestory=!1,this.mIsStart=!0,this.mActor=e,this.hasOwnProperty(t.ActionConsts.INJECT_ACTOR)&&(this[t.ActionConsts.INJECT_ACTOR]=e),this.hasOwnProperty(t.ActionConsts.INJECT_PARAM)?this[t.ActionConsts.INJECT_PARAM]=this.mParam:this.hasOwnProperty(t.ActionConsts.INJECT_SET_PARAMS)&&this[t.ActionConsts.INJECT_PARAM].call(this,this.mParam),this.onStart()},e.prototype.onStart=function(){},e.prototype.destroy=function(t){void 0===t&&(t=null),this.isDestory||(this.isDestory=!0,this.mIsStart=!1,this.mActor.delAction(this,!1),this.onDestory(),this.mCallBack&&(1==this.mCallBack.length?this.mCallBack.call(this.mThisObj,this.mActor):this.mCallBack.call(this.mThisObj),this.mCallBack=null),this.mActor=null)},e.prototype.onDestory=function(){},e.NAME="BasicAction",e}();t.BasicAction=e,__reflect(e.prototype,"asf.BasicAction",["asf.IAction","asf.IDestory"])}(asf||(asf={}));var game;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.autoCloseEvent=!0,i.openType=0,i.openPoint=[0,0],i.initialize(),i}return __extends(i,e),i.prototype.addButtonEvent=function(t,e,i){var n=asf.Global.createAny();n.button=t,n.onClick=e,n.that=i,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,i),this.buttonEventMap||(this.buttonEventMap=new asf.Dictionary),this.buttonEventMap.put(t,n)},i.prototype.removeButtonEvent=function(t,e,i){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e,i),this.buttonEventMap.remove(t)},i.prototype.initialize=function(){this.session=t.Session.instance,this.stage=this.session.stage,this.db=t.DB.ins},i.prototype.showGrayBg=function(){this.grayBg||(this.grayBg=new egret.Shape,this.grayBg.graphics.beginFill(0,1),this.grayBg.graphics.drawRect(0,0,750,1400),this.grayBg.graphics.endFill(),this.grayBg.alpha=.5,this.container.addChildAt(this.grayBg,0))},i.prototype.centerView=function(){this.container.x=(this.stage.stageWidth-this.container.width)/2,this.container.y=(this.stage.stageHeight-this.container.height)/2},i.prototype.setUIRes=function(t){var e=new mvc.ResBean;this.config.resList||(this.config.resList=[]),e.path=t,this.config.resList.push(e)},i.prototype.destroy=function(i){if(void 0===i&&(i=null),!this.isDestroy){if(e.prototype.destroy.call(this,i),this.config.resList)for(var n=0;n<this.config.resList.length;n++)t.MvcResLoader.removeRes(this.config.resList[n].path);this.buttonEventMap&&this.buttonEventMap.clear(),this.container.destroy(),this.container=null,delete this.container}},i.prototype.setCloseBtn=function(t){t&&t.setClickHandler(this.close,this)},i.prototype.setBackBtn=function(t){this.setCloseBtn(t)},i.prototype.initContainer=function(t,e){void 0===e&&(e=null),this.container=this.mContainer=t,this.container instanceof morn.View&&(this.setBaseWin(),this.container.layoutComolete&&e?e.execute():this.container.layoutCallback=asf.CallBack.create(this.layoutCallback,this,e))},i.prototype.layoutCallback=function(t){this.setBaseWin(),t&&t.execute()},i.prototype.setBaseWin=function(){var t=this.container;if(t){var e=t.baseWin;if(this.setCloseBtn(t.closeBtn),this.setCloseBtn(t.backBtn),e){this.setCloseBtn(e.closeBtn),this.setCloseBtn(e.backBtn),e.closeBtn?t.addChild(e.closeBtn):"",e.backBtn?t.addChild(e.backBtn):"",e.winItem?t.addChild(e.winItem):"";var i=e.blank_bg;i&&(i.height=this.stage.stageHeight,i.y=-this.session.hpx)}else{var i=t.blank_bg;i&&(i.height=this.stage.stageHeight,i.y=-this.session.hpx)}}},i.prototype.open=function(t){this.container;e.prototype.open.call(this,t),this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize(null),mvc.send(mvc.GameView.View_onOpen,this)},i.prototype.close=function(){if(this.openFlag=!1,this.isOpen){if(this.stage&&this.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.buttonEventMap&&this.buttonEventMap.size()>0)for(var t=this.buttonEventMap.getContainer(),i=void 0,n=0;n<t.length;n++)i=t[n],i.button.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onClick,i.that);e.prototype.close.call(this)}},i.prototype.onComplete=function(){},i.prototype.onResize=function(t){},i}(mvc.BasicView);t.View=e,__reflect(e.prototype,"game.View")}(game||(game={}));var asf;!function(t){var e=function(){function t(t,e,i){this.level=t,this.name=e,this.color=i}return t.prototype.toString=function(){return"[level="+this.level+" levelName="+this.name+"]"},t.TRACE=new t(1,"trace","#000000"),t.DEBUG=new t(10,"debug","#000000"),t.LOG=new t(100,"log","#0000FF"),t.INFO=new t(1e3,"info","#fffa55"),t.WARN=new t(1e4,"warn","#FF9900"),t.ERROR=new t(1e5,"error","#FF0000"),t}();t.Level=e,__reflect(e.prototype,"asf.Level")}(asf||(asf={}));var game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.preinit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.initLayoutJson=function(t){t&&t.execute()},e.prototype.init=function(){},e.prototype.initContainer=function(t,e){void 0===e&&(e=null),this.container=t,this.addChild(this.container),this.container instanceof morn.View&&(this.container.layoutComolete&&e?e.execute():this.container.layoutCallback=e)},e.prototype.setData=function(t){},e.prototype.onTabOpen=function(){},e.prototype.onTabClose=function(){},e.prototype.tabClose=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.onDestroy(),this.container.destroy(),this.container=null},e.prototype.onDestroy=function(){},e}(morn.Box);t.TabWin=e,__reflect(e.prototype,"game.TabWin",["game.ITabWin"])}(game||(game={}));var asf;!function(t){var e=function(){function e(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i="8"),this._directionMode="8",this._pointsArr2D=[],this._finishList=[],this._waitList=[],t&&this.setGrids(t),this.setMoveJudgeFun(e),i&&this.setDirectionMode(i)}return e.prototype.setGrids=function(e){this._pointsArr2D=[],this._ddArray=e;for(var i=this._ddArray.length,n=this._ddArray[0].length,o=0;i>o;o++){this._pointsArr2D[o]||(this._pointsArr2D[o]=new Array);for(var r=0;n>r;r++)this._pointsArr2D[o][r]||(this._pointsArr2D[o][r]=new t.PathPoint(o,r,null))}},e.prototype.setPointValue=function(t,e,i){this._ddArray[t][e]=i
},e.prototype.setMoveJudgeFun=function(t){this._moveJudgeFun=t},e.prototype.setDirectionMode=function(t){this._directionMode=t},e.prototype.getDirectionMode=function(){return this._directionMode},e.prototype.findPath=function(t,e){throw new Error("Min:未执行复写")},e.prototype.resetParameters=function(t,e){this._lastTime=egret.getTimer(),this._finded=!1,this._startPoint=this._pointsArr2D[t.x][t.y],this._startPoint._parentPoint=null,this._startPoint._G=0,this._targetPoint=this._pointsArr2D[e.x][e.y],this._finishList=[],this._mapRectangle=new egret.Rectangle(0,0,this._ddArray.length,this._ddArray[0].length),this._waitList=[this._startPoint]},e.prototype.findComplete=function(){for(var t=this._finishList.length,e=0;t>e;e++)this._finishList[e]._moved=!1},e.prototype.testPoint=function(t){this._rightMove=this.testAroundPoint(t,1,0),this._leftMove=this.testAroundPoint(t,-1,0),this._bottomMove=this.testAroundPoint(t,0,1),this._topMove=this.testAroundPoint(t,0,-1),this._directionMode==e.DIRECTION_4_BEVEL?(this._rightMove&&this._topMove&&this.testAroundPoint(t,1,-1),this._rightMove&&this._bottomMove&&this.testAroundPoint(t,1,1),this._leftMove&&this._bottomMove&&this.testAroundPoint(t,-1,1),this._leftMove&&this._topMove&&this.testAroundPoint(t,-1,-1)):this._directionMode==e.DIRECTION_8&&(this.testAroundPoint(t,1,-1),this.testAroundPoint(t,1,1),this.testAroundPoint(t,-1,1),this.testAroundPoint(t,-1,-1))},e.prototype.testAroundPoint=function(t,e,i){throw new Error("未执行复写")},e.prototype.getOptimizePath=function(e,i){if(!e)return null;var n,o=e.concat(),r=o.length;this._peakArr=[],this._indexArr=[0];var s;do for(this._testPeakArr=t.PathLineUtils.getPeaksInLine(o,this.notInArr,this),r=this._testPeakArr.length,n=1;r-1>n;n++)s=o.indexOf(this._testPeakArr[n]),this._peakArr.indexOf(this._testPeakArr[n])<0&&(this.canCross(o[s+1],o[s-1],i)?o.splice(s,1):(this._peakArr.push(this._testPeakArr[n]),this._indexArr.push(e.indexOf(this._testPeakArr[n]))));while(this._testPeakArr.length>2);t.SortUtil.sortBy(this._indexArr,!0,!1),this._indexArr.push(e.length-1);for(var a=[],r=this._indexArr.length,n=0;r>n;n++)s=this._indexArr[n],a.push(e[s]);return a},e.prototype.notInArr=function(t){return this._peakArr.indexOf(t)<0},e.prototype.canCross=function(e,i,n){for(var o=t.PathLineUtils.getCrossPoint(e,i,n),r=o.length,s=0;r>s;s++)if(0==this._moveJudgeFun.call(this,this._ddArray[o[s].x][o[s].y]))return!1;return!0},e.DIRECTION_4="4",e.DIRECTION_4_BEVEL="5",e.DIRECTION_8="8",e}();t.Path=e,__reflect(e.prototype,"asf.Path")}(asf||(asf={}));var morn;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._isPlayEffect=!0,i._labelColors=t.Styles.buttonLabelColors,i._labelMargin=t.Styles.buttonLabelMargin,i._labelStrokes=t.Styles.buttonLabelStrokes,i._labelStrokeColors=t.Styles.buttonLabelStrokeColors,i._state=0,i._selected=!1,i._loaded=!1,i._autoSize=!0,i._stateNum=t.Styles.buttonStateNum,i._showPoint=!1,i._clickTime=0,i._lifeTime=0,i._nowLifeTime=0,i._labelText="",i.ansTime=0,i.isStopImmediatePropagation=!1,i.timerId=-1,i}return __extends(i,e),i.prototype.setLoadComplete=function(t){this._loadComplete=t},i.prototype.preinitialize=function(){this.ansTime=500},i.prototype.createChildren=function(){i.isOpenScaleMode?(this.addChild(this.container=new t.Box),this.container.addChild(this._bitmap=new t.AutoBitmap),this.container.addChild(this._btnLabel=new t.Label),this._bitmap.touchEnabled=this._bitmap.touchEnabled=!1,this.container.touchChildren=this.container.touchEnabled=!1):(this.addChild(this._bitmap=new t.AutoBitmap),this.addChild(this._btnLabel=new t.Label)),this._btnLabel.touchEnabled=!1},i.prototype.initialize=function(){this._btnLabel.align="center",this.touchChildren=this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onMouse,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onMouse,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouse,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this)},i.prototype.onMouse=function(t){if(!(!this._toggle&&this._selected||this._disabled)){if(t.type==egret.TouchEvent.TOUCH_TAP){if(this._toggle&&(this.selected=!this._selected),this._clickHandler){var e=egret.getTimer();e-this.ansTime>this._clickTime&&(this.openLifeTime(),this._clickHandler.execute(),this._clickTime=egret.getTimer())}return void(this.isStopImmediatePropagation&&t.stopImmediatePropagation())}if(i.isOpenScaleMode&&1==this._stateNum)if(t.type==egret.TouchEvent.TOUCH_BEGIN){var n=this.container.width,o=this.container.height;this.container.scaleX=this.container.scaleY=1.2,this.container.x=.5*(n-1.2*this.container.width),this.container.y=.5*(o-1.2*this.container.height)}else(t.type==egret.TouchEvent.TOUCH_END||t.type==egret.TouchEvent.TOUCH_RELEASE_OUTSIDE)&&(this.container.scaleX=this.container.scaleY=1,this.container.x=0,this.container.y=0);0==this._selected&&(this.state=i.stateMap[t.type])}},i.prototype.setLifeTime=function(t){this._lifeTime=t},i.prototype.openLifeTime=function(){asf.App.timer.clearTimer(this.timerId),this._lifeTime>0&&(this._nowLifeTime=this._lifeTime+1,this.timerId=asf.App.timer.doLoop(1e3,this.onLifeTimeHandler,this,null,this.timerId),this.disabled=!0,this.onLifeTimeHandler())},i.prototype.onLifeTimeHandler=function(){this._nowLifeTime--,this._nowLifeTime<=0?(asf.App.timer.clearTimer(this.timerId),this.disabled=!1,this.label=this._labelText):this._btnLabel.text=this._nowLifeTime+""},Object.defineProperty(i.prototype,"anchorY",{get:function(){return this._bitmap.anchorY},set:function(t){this._bitmap.anchorY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorX",{get:function(){return this._bitmap.anchorX},set:function(t){this._bitmap.anchorX=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showPoint",{get:function(){return this._showPoint},set:function(t){this._showPoint=t,this.callLater(this.changePointSkin,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointUrl",{get:function(){return this._pointUrl},set:function(t){this._pointUrl!=t&&(this._pointUrl=t,this.callLater(this.changePointSkin,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointY",{get:function(){return this._pointY},set:function(t){this._pointY=t,this.callLater(this.changePointXY,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointX",{get:function(){return this._pointX},set:function(t){this._pointX=t,this.callLater(this.changePointXY,this)},enumerable:!0,configurable:!0}),i.prototype.changePointXY=function(){this._pointImage&&this._bitmap&&(this._pointImage.x=this._bitmap.width-this._pointImage.width,this._pointImage.y=0)},i.prototype.changePointSkin=function(){return null==this._pointImage&&(this._pointImage=new t.Image),(""==this._pointUrl||!this._showPoint)&&this._pointImage&&this._bitmap&&this._bitmap.parent?void(this._pointImage.parent&&this.removeChild(this._pointImage)):(this._pointImage.url=this._pointUrl,this.addChild(this._pointImage),void this.callLater(this.changePointXY,this))},Object.defineProperty(i.prototype,"label",{get:function(){return this._labelText},set:function(t){this._btnLabel&&this._btnLabel.text!=t&&(this._labelText=t,this._btnLabel.text=t,this.callLater(this.changeState,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){this._skin!=t&&(this._loaded=!1,this._skin=t,this.callLater(this.changeClips,this),this.callLater(this.changeLabelSize,this)),egret.superSetter(i,this,"skin",t)},enumerable:!0,configurable:!0}),i.prototype.changeClips=function(){this.changeState(),this._autoSize&&(this._contentWidth=this._bitmap.width,this._contentHeight=this._bitmap.height)},i.prototype.commitMeasure=function(){this.exeCallLater(this.changeClips,this)},i.prototype.changeLabelSize=function(){this.exeCallLater(this.changeClips,this);var t=this._labelMargin;2==this.state?t=this._labelMargin:this._labelMargin2&&(t=this._labelMargin2),this._btnLabel.width=this.width-t[0]-t[2],this._btnLabel.height=this._btnLabel.textField.textHeight,this._btnLabel.x=t[0],this._btnLabel.y=.5*(this.height-this._btnLabel.height)+t[1]-t[3],this.updateSizeY()},i.prototype.updateSizeY=function(){},Object.defineProperty(i.prototype,"selected",{get:function(){return this.getSelected()},set:function(t){this.setSelected(t)},enumerable:!0,configurable:!0}),i.prototype.getSelected=function(){return this._selected},i.prototype.setSelected=function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?i.stateMap.selected:i.stateMap.touchRollOut,this.sendEvent(egret.Event.CHANGE))},Object.defineProperty(i.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t,this.callLater(this.changeState,this)},enumerable:!0,configurable:!0}),i.prototype.changeState=function(){if(this.skin){var t=RES.getRes(this._skin);t?this.onSkinLoaded(t):RES.getResByUrl(this._skin,this.onSkinLoaded,this,RES.ResourceItem.TYPE_IMAGE)}},i.prototype.onSkinLoaded=function(e){var i=this;if(i._bitmap)if(e){var n,o=i._skin;i.textureStates=t.TextureUtils.cut2(e,i._stateNum,!1),1==i.stateNum&&2==this._state?this.filters=asf.GameFilter.createGradientGlowFilter():this._disabled||(this.filters=[]),n=i.textureStates[i.index],i._bitmap.textureForKey(n,o),i._btnLabel.color=i._labelColors[i._state],i._btnLabel.textField.stroke=i._labelStrokes[i._state],i._btnLabel.textField.strokeColor=i._labelStrokeColors[i._state],i.changePointXY(),i.callLater(i.changeLabelSize,i),!i._loaded&&i._loadComplete&&(i._loaded=!0,i._loadComplete.execute())}else i._bitmap.dispose()},Object.defineProperty(i.prototype,"index",{get:function(){var t=this._state;return 2==this._stateNum?t=2>t?t:1:1==this._stateNum&&(t=0),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toggle",{get:function(){return this._toggle},set:function(t){this._toggle=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{set:function(t){this._disabled!=t&&(this.state=this._selected?i.stateMap.selected:i.stateMap.touchRollOut,egret.superSetter(i,this,"disabled",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelColors",{get:function(){return String(this._labelColors)},set:function(e){this._labelColors=t.StringUtils.fillArray(this._labelColors,e),this.callLater(this.changeState,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelMargin",{get:function(){return String(this._labelMargin)},set:function(e){this._labelMargin=t.StringUtils.fillArray(this._labelMargin,e,Number),this._labelMargin2=this._labelMargin.concat(),this.callLater(this.changeLabelSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelMargin2",{set:function(e){this._labelMargin2=t.StringUtils.fillArray(this._labelMargin2,e,Number)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelStroke",{get:function(){return this._btnLabel.stroke},set:function(e){var i=this;if(null==e||""==e)return i._labelStrokes=t.Styles.buttonLabelStrokes,void(i._labelStrokeColors=t.Styles.buttonLabelStrokeColors);var n=e.split(",");1==n.length?(i._labelStrokes=t.Styles.buttonLabelStrokes,i._labelStrokeColors=[Number(n[0]),Number(n[0]),Number(n[0])]):2==n.length?(i._labelStrokeColors=[Number(n[0]),Number(n[0]),Number(n[0])],i._labelStrokes=[Number(n[1]),Number(n[1]),Number(n[1])]):4==n.length?(i._labelStrokeColors=[Number(n[0]),Number(n[2]),Number(n[2])],i._labelStrokes=[Number(n[1]),Number(n[3]),Number(n[3])]):6==n.length&&(i._labelStrokeColors=[Number(n[0]),Number(n[2]),Number(n[4])],i._labelStrokes=[Number(n[1]),Number(n[3]),Number(n[5])])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelSize",{get:function(){return this._btnLabel.size},set:function(t){this._btnLabel.size=t,this.callLater(this.changeLabelSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelBold",{get:function(){return this._btnLabel.bold},set:function(t){this._btnLabel.bold=t,this.callLater(this.changeLabelSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._btnLabel.letterSpacing},set:function(t){this._btnLabel.letterSpacing=t,this.callLater(this.changeLabelSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelFont",{get:function(){return this._btnLabel.font},set:function(t){this._btnLabel.font=t,this.callLater(this.changeLabelSize,this)},enumerable:!0,configurable:!0}),i.prototype.getClickHandler=function(){return this._clickHandler},i.prototype.setClickHandler=function(t,e,i){this._clickHandler&&asf.CallBack.relesea(this._clickHandler),this._clickHandler=asf.CallBack.create(t,e,i)},Object.defineProperty(i.prototype,"btnLabel",{get:function(){return this._btnLabel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sizeGrid",{get:function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},set:function(e){this._bitmap.sizeGrid=t.StringUtils.fillArray(t.Styles.defaultSizeGrid,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return egret.superGetter(i,this,"width")},set:function(t){egret.superSetter(i,this,"width",t),this._autoSize&&(this._bitmap.width=t),this.callLater(this.changeLabelSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return egret.superGetter(i,this,"height")},set:function(t){egret.superSetter(i,this,"height",t),this._autoSize&&(this._bitmap.height=t),this.callLater(this.changeLabelSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playEffect",{get:function(){return this._isPlayEffect},set:function(t){this._isPlayEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof Number||t instanceof String?this.label=String(t):egret.superSetter(i,this,"dataSource",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stateNum",{get:function(){return this._stateNum},set:function(t){this._stateNum!=t&&(this._stateNum=1>t?1:t>3?3:t,this.callLater(this.changeClips,this))},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this._loadComplete=null,this.removeLater(this.changeLabelSize,this),this.removeLater(this.changeClips,this),this.removeLater(this.changeState,this),this.removeLater(this.changePointSkin,this),asf.App.timer.clearTimer(this.timerId),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onMouse,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouse,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onMouse,this),this._bitmap&&(this._bitmap.parent&&this._bitmap.parent.removeChild(this._bitmap),this._bitmap.dispose(),this._bitmap=null),this._btnLabel&&(this._btnLabel.remove(),this._btnLabel.destroy(),this._btnLabel=null),null!=this._clickHandler&&(asf.CallBack.relesea(this._clickHandler),this._clickHandler.destroy(),this._clickHandler=null),this._labelColors!=t.Styles.buttonLabelColors&&(this._labelColors=null),this._labelMargin!=t.Styles.buttonLabelColors&&(this._labelMargin=null),this.container&&this.container.remove(),null!=this._skin&&(this._skin=null),this.textureStates=null,e.prototype.destroy.call(this)},i.isOpenScaleMode=!1,i.isGlobalPlay=!0,i.stateMap={touchRollOver:1,touchRollOut:0,touchBegin:2,touchEnd:0,selected:2,touchReleaseOutside:0},i}(t.Component);t.Button=e,__reflect(e.prototype,"morn.Button",["morn.ISelect","asf.IDestory"])}(morn||(morn={}));var asf;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.clear(),t}return __extends(i,e),i.prototype.getSource=function(){return this.obj},i.prototype.put=function(t,e){null==this.obj[t]&&this._length++,this.obj[t]=e},i.prototype.get=function(t){return this.obj[t]},i.prototype.clear=function(){this.obj=new Object,this._length=0},i.prototype.remove=function(t){var e=this.obj[t];return null!=e&&void 0!=e&&(delete this.obj[t],this._length--),e},i.prototype.size=function(){return this._length},i.prototype.isEmpty=function(){return 0==this._length},i.prototype.hasKey=function(t){return null!=this.obj[t]},i.prototype.hasValue=function(t){for(var e in this.obj)if(this.obj[e]==t)return!0;return!1},i.prototype.values=function(){var t=[];if(0!=this._length){for(var e in this.obj)t.push(this.obj[e]);return t}return t},i.prototype.keys=function(){var t=[];if(0!=this._length){for(var e in this.obj)t.push(e);return t}return t},i.prototype.getContainer=function(){return this.obj},i.prototype.forEach=function(t,e){for(var i in this.obj)t.call(e,this.obj[i])},i.prototype.forKeyValue=function(t,e){for(var i in this.obj)t.call(e,i,this.obj[i])},i.prototype.destroy=function(e){for(var i in this.obj)t.DestroyUtils.destroy(this.obj[i]);this.obj=null},i}(t.ASFObject);t.HashMap=e,__reflect(e.prototype,"asf.HashMap",["asf.IMap","asf.IDestory"])}(asf||(asf={}));var morn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._space=0,e._selectedIndex=-1,e}return __extends(e,t),e.prototype.preinitialize=function(){this.touchChildren=!0,this._items=[]},e.prototype.addItem=function(t,e){void 0===e&&(e=!0);var i=t,n=i,o=this._items.length;if(n.name="item"+o,this.addChild(n),this.initItems(),e&&o>0){i=this._items[o-1];var r=i;"horizontal"==this._direction?n.x=r.x+r.width+this._space:n.y=r.y+r.height+this._space}return o},e.prototype.delItem=function(t,e){void 0===e&&(e=!0);var i=this._items.indexOf(t);if(-1!=i){var n=t,o=n;this.removeChild(o);for(var r=i+1,s=this._items.length;s>r;r++){var n=this._items[r],a=n;a.name="item"+(r-1),e&&("horizontal"==this._direction?a.x-=o.width+this._space:a.y-=o.height+this._space)}this.initItems(),this._selectedIndex>-1&&(this.selectedIndex=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1)}},e.prototype.initItems=function(t){void 0===t&&(t=!1),this._items=[];for(var e=0;e<Number.MAX_VALUE;e++){var i=this.getChildByName("item"+e),n=i,o=i;if(null==o)break;if(this._items.push(o),t&&e>0){i=this._items[e-1];var r=i;"horizontal"==this._direction?n.x=r.x+r.width+this._space:n.y=r.y+r.height+this._space}o.setSelected(e==this._selectedIndex),o.setClickHandler(this.itemClick,this,e)}},e.prototype.itemClick=function(t){this.selectedIndex=t},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){0==this._items.length&&(this._selectedIndex=-1),this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0),this.sendEvent(egret.Event.CHANGE),null!=this._selectHandler&&this._selectHandler.execute(this._selectedIndex)},enumerable:!0,configurable:!0}),e.prototype.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&this._items[t].setSelected(e)},Object.defineProperty(e.prototype,"selectHandler",{get:function(){return this._selectHandler},set:function(t){this._selectHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skin",{get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this.callLater(this.changeLabels,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){return this._labels},set:function(t){if(this._labels!=t){if(this._labels=t,this.removeAllChild(),this.callLater(this.changeLabels,this),Boolean(this._labels))for(var e=this._labels.split(","),i=0,n=e.length;n>i;i++){var o=this.createItem(this._skin,e[i]);o.name="item"+i,this.addChild(o)}this.initItems(!0)}},enumerable:!0,configurable:!0}),e.prototype.createItem=function(t,e){return null},Object.defineProperty(e.prototype,"labelColors",{get:function(){return this._labelColors},set:function(t){this._labelColors!=t&&(this._labelColors=t,this.callLater(this.changeLabels,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelStroke",{get:function(){return this._labelStroke},set:function(t){this._labelStroke!=t&&(this._labelStroke=t,this.callLater(this.changeLabels,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelSize",{get:function(){return this._labelSize},set:function(t){this._labelSize!=t&&(this._labelSize=t,this.callLater(this.changeLabels,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelBold",{get:function(){return this._labelBold},set:function(t){this._labelBold!=t&&(this._labelBold=t,this.callLater(this.changeLabels,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelMargin",{get:function(){return this._labelMargin},set:function(t){this._labelMargin!=t&&(this._labelMargin=t,this.callLater(this.changeLabels,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelMargin2",{set:function(t){this._labelMargin2=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t,this.callLater(this.changeLabels,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){return this._space},set:function(t){this._space=t,this.callLater(this.changeLabels,this)},enumerable:!0,configurable:!0}),e.prototype.changeLabels=function(){},e.prototype.commitMeasure=function(){this.exeCallLater(this.changeLabels,this)},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},set:function(t){this.selectedIndex=this._items.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof Number||t instanceof String?this.selectedIndex=Number(t):t instanceof Array?this.labels=t.join(","):egret.superSetter(e,this,"dataSource",t)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeLater(this.changeLabels,this),this._selectHandler=null,null!=this._skin&&(this._skin=null),null!=this._labels&&(this._labels=null),null!=this._labelColors&&(this._labelColors=null),null!=this._labelStroke&&(this._labelStroke=null),null!=this._labelBold&&(this._labelBold=null),null!=this._labelMargin&&(this._labelMargin=null),null!=this._direction&&(this._direction=null);for(var e in this._items)this._items[e].destroy();this._items=null,t.prototype.destroy.call(this)},e}(t.Box);t.Group=e,__reflect(e.prototype,"morn.Group")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._touchThrough=!1,t._bgUrl="",t.width=t.height=100,t}return __extends(i,e),Object.defineProperty(i.prototype,"touchThrough",{get:function(){return this._touchThrough},set:function(t){this._touchThrough=t,this.callLater(this.changeScroll,this)},enumerable:!0,configurable:!0}),i.prototype.createChildren=function(){e.prototype.addChild.call(this,this._content=new t.Box)},i.prototype.addChild=function(t){return t.addEventListener(egret.Event.RESIZE,this.onResizePanel,this),this.callLater(this.changeScroll,this),this._content.addChild(t)},i.prototype.onResizePanel=function(t){this.callLater(this.changeScroll,this)},i.prototype.addChildAt=function(t,e){return t.addEventListener(egret.Event.RESIZE,this.onResizePanel,this),this.callLater(this.changeScroll,this),this._content.addChildAt(t,e)},i.prototype.removeChild=function(t){return t.removeEventListener(egret.Event.RESIZE,this.onResizePanel,this),this.callLater(this.changeScroll,this),this._content.removeChild(t)},i.prototype.removeChildAt=function(t){return this.getChildAt(t).removeEventListener(egret.Event.RESIZE,this.onResizePanel,this),this.callLater(this.changeScroll,this),this._content.removeChildAt(t)},i.prototype.removeAllChild=function(t){void 0===t&&(t=null);for(var e=this._content.numChildren-1;e>-1;e--)t!=this._content.getChildAt(e)&&this._content.removeChildAt(e);this.callLater(this.changeScroll,this)},i.prototype.getChildAt=function(t){return this._content.getChildAt(t)},i.prototype.getChildByName=function(t){return this._content.getChildByName(t)},i.prototype.getChildIndex=function(t){return this._content.getChildIndex(t)},Object.defineProperty(i.prototype,"numChildren",{get:function(){return this._content.numChildren},enumerable:!0,configurable:!0}),i.prototype.changeScroll=function(){var t=0==this._contentWidth?this.contentWidth:this._contentWidth,e=this.contentHeight,i=this._vScrollBar&&e>this._height,n=this._hScrollBar&&t>this._width,o=i?this._width:this._width,r=n?this._height:this._height;this.setContentSize(o,r),this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width,this._vScrollBar.y=0,this._vScrollBar.height=this._height-(n?this._hScrollBar.height:0),this._vScrollBar.scrollSize=Math.max(.033*this._height,1),this._vScrollBar.thumbPercent=r/e,this._vScrollBar.setScroll(0,e-r,this._vScrollBar.value),this._vScrollBar.visible=!1),this._hScrollBar&&(this._hScrollBar.x=0,this._hScrollBar.y=this._height-this._hScrollBar.height,this._hScrollBar.width=this._width-(i?this._vScrollBar.width:0),this._hScrollBar.scrollSize=Math.max(.033*this._width,1),this._hScrollBar.thumbPercent=o/t,this._hScrollBar.setScroll(0,t-o,this._hScrollBar.value),this._hScrollBar.visible=!1)},Object.defineProperty(i.prototype,"contentWidth",{get:function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.x+i.width*i.scaleX,t)}return t},set:function(t){this._contentWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHeight",{get:function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.y+i.height*i.scaleY,t)}return t},enumerable:!0,configurable:!0}),i.prototype.setGraphicsUrl=function(t){this._bgUrl=t},i.prototype.setContentSize=function(e,i){this.touchThrough?this._bg&&(this._bg.destroy(),this._bg=null):(this._bg||(this._bg=new t.Image,this.addChildAt(this._bg,0),this._bg.alpha=0),this._bg.width=e,this._bg.height=i),this._content.width=e,this._content.height=i,this._content.scrollRect=new egret.Rectangle(0,0,e,i)},Object.defineProperty(i.prototype,"width",{get:function(){return egret.superGetter(i,this,"width")},set:function(t){egret.superSetter(i,this,"width",t),this.callLater(this.changeScroll,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return egret.superGetter(i,this,"height")},set:function(t){egret.superSetter(i,this,"height",t),this.callLater(this.changeScroll,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vScrollBarSkin",{get:function(){return this._vScrollBar.skin},set:function(i){null==this._vScrollBar&&(e.prototype.addChild.call(this,this._vScrollBar=new t.VScrollBar),this._vScrollBar.addEventListener(egret.Event.CHANGE,this.onScrollBarChange,this),this._vScrollBar.target=this,this.callLater(this.changeScroll,this)),this.checkSkinNull(i)||(this._vScrollBar.skin=i)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hScrollBarSkin",{get:function(){return this._hScrollBar.skin},set:function(i){null==this._hScrollBar&&(e.prototype.addChild.call(this,this._hScrollBar=new t.HScrollBar),this._hScrollBar.addEventListener(egret.Event.CHANGE,this.onScrollBarChange,this),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this,this.callLater(this.changeScroll,this)),this.checkSkinNull(i)||(this._hScrollBar.skin=i)},enumerable:!0,configurable:!0}),i.prototype.checkSkinNull=function(t){if(t){var e=t.lastIndexOf(".");if(-1!=e){var i=t.substr(e+1);if("null"==i)return!0}}return!1},Object.defineProperty(i.prototype,"vScrollBar",{get:function(){return this._vScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hScrollBar",{get:function(){return this._hScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),i.prototype.onScrollBarChange=function(e){var i=this._content.scrollRect;if(i){var n=e.currentTarget,o=Math.round(n.value);n.direction==t.ScrollBar.VERTICAL?i.y=o:i.x=o,this._content.scrollRect=i}},i.prototype.commitMeasure=function(){this.exeCallLater(this.changeScroll,this)},i.prototype.scrollTo=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.commitMeasure(),this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)},i.prototype.refresh=function(){this.changeScroll()},i.prototype.destroy=function(){this.removeLater(this.changeScroll,this),this._bg&&(this._bg.destroy(),this._bg=null);var t;if(this._content){t=this._content.numChildren;for(var i=0;t>i;i++)this._content.getChildAt(i).removeEventListener(egret.Event.RESIZE,this.onResizePanel,this);this._content.parent&&e.prototype.removeChild.call(this,this._content),this._content.destroy(),this._content=null}this._vScrollBar&&(this._vScrollBar.removeEventListener(egret.Event.CHANGE,this.onScrollBarChange,this),this._vScrollBar.parent&&e.prototype.removeChild.call(this,this._vScrollBar),this._vScrollBar.destroy(),this._vScrollBar=null),this._hScrollBar&&(this._hScrollBar.removeEventListener(egret.Event.CHANGE,this.onScrollBarChange,this),this._hScrollBar.parent&&e.prototype.removeChild.call(this,this._hScrollBar),this._hScrollBar.destroy(),this._hScrollBar=null)},i}(t.Box);t.Panel=e,__reflect(e.prototype,"morn.Panel")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._scrollSize=1,t._thumbPercent=1,t._touchScrollEnable=!0,t._mouseWheelEnable=!1,t.pixelScroll=!1,t._autoHide=!0,t._lastOffset=0,t._showButtons=!0,t.foreverHide=!1,t}return __extends(i,e),i.prototype.preinitialize=function(){this.touchEnabled=this.touchChildren=!0},i.prototype.createChildren=function(){this.addChild(this._slider=new t.Slider),this.addChild(this._upButton=new t.Button),this.addChild(this._downButton=new t.Button)},i.prototype.initialize=function(){this._slider.showLabel=!1,this._slider.addEventListener(egret.Event.CHANGE,this.onSliderChange,this),this._slider.setSlider(0,0,0),this._upButton.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonMouseDown,this),this._downButton.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonMouseDown,this),this.callLater(this.upDataScrollShow,this)},i.prototype.upDataScrollShow=function(){if(this.pixelScroll&&this._target){var t=this._target.scrollRect;this._autoHide?t&&this._target.height>t.height?(this.visible=!0,this._slider.disabled=this._upButton.disabled=this._downButton.disabled=!1,this._slider.bar.visible=!0):(this.visible=!1,this._slider.disabled=this._upButton.disabled=this._downButton.disabled=!0,this._slider.bar.visible=!1):(this.visible=!0,t?this._target.height>t.height?(this._slider.disabled=this._upButton.disabled=this._downButton.disabled=!1,this._slider.bar.visible=!0):(this._slider.disabled=this._upButton.disabled=this._downButton.disabled=!0,this._slider.bar.visible=!1):(this._slider.disabled=this._upButton.disabled=this._downButton.disabled=!1,this._slider.bar.visible=!0)),this._slider.changeValueNow()}this.foreverHide&&(this.visible=!1,this._slider.bar.visible=!1)},i.prototype.upDataTargetContent=function(){this.onSliderChange(null)},i.prototype.onSliderChange=function(t){if(this.sendEvent(egret.Event.CHANGE),null!=this._changeHandler&&this._changeHandler.execute(this.value),this.pixelScroll&&this._target){var e=this._target.scrollRect;if(e){if(this._target.height>e.height){var i=this._target.height-e.height;e.y=this.value/100*i,e.y<0&&(e.y=0)}else e.y=0;this._target.scrollRect=e}}},i.prototype.onButtonMouseDown=function(e){var i=e.currentTarget==this._upButton;this.slide(i),this._startLoopTimer=asf.App.timer.doOnce(t.Styles.scrollBarDelayTime,this.startLoop,this,[i],this._startLoopTimer),asf.App.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp,this)
},i.prototype.startLoop=function(t){this._slideTimer=asf.App.timer.doFrameLoop(1,this.slide,this,[t],this._slideTimer)},i.prototype.slide=function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize},i.prototype.onStageMouseUp=function(t){asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp,this),asf.App.timer.clearTimer(this._startLoopTimer),asf.App.timer.clearTimer(this._slideTimer)},Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this._skin&&(this._slider.skin=this._skin)),this.callLater(this.changeScrollBar,this)},enumerable:!0,configurable:!0}),i.prototype.changeScrollBar=function(){this._upButton.visible=this._showButtons,this._downButton.visible=this._showButtons,this._skin&&this._showButtons&&(this._upButton.skin=this._skin+"$up",this._downButton.skin=this._skin+"$down"),this._slider.direction==i.VERTICAL?this._slider.y=this._upButton.height:this._slider.x=this._upButton.width,this.resetPositions()},i.prototype.resetButtonPosition=function(){this._slider.direction==i.VERTICAL?(this._downButton.y=this._slider.y+this._slider.height,this._contentWidth=this._slider.width,this._contentHeight=this._downButton.y+this._downButton.height):(this._downButton.x=this._slider.x+this._slider.width,this._contentWidth=this._downButton.x+this._downButton.width,this._contentHeight=this._slider.height)},i.prototype.changeSize=function(){e.prototype.changeSize.call(this),this.resetPositions()},i.prototype.resetPositions=function(){this._slider.direction==i.VERTICAL?this._slider.height=this.height-this._upButton.height-this._downButton.height:this._slider.width=this.width-this._upButton.width-this._downButton.width,this.resetButtonPosition()},i.prototype.setScroll=function(t,e,i){this.exeCallLater(this.changeSize,this),this._slider.setSlider(t,e,i),this._upButton.disabled=0>=e,this._downButton.disabled=0>=e,this._slider.bar.visible=e>0,this.visible=!(this._autoHide&&t>=e)},Object.defineProperty(i.prototype,"max",{get:function(){return this._slider.max},set:function(t){this._slider.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._slider.min},set:function(t){this._slider.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._slider.value},set:function(t){this._slider.value=t},enumerable:!0,configurable:!0}),i.prototype.scrollToBottom=function(){asf.App.render.renderAll(),this._slider.value=this._slider.max},Object.defineProperty(i.prototype,"direction",{get:function(){return this._slider.direction},set:function(t){this._slider.direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sizeGrid",{get:function(){return this._slider.sizeGrid},set:function(t){this._slider.sizeGrid=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollSize",{get:function(){return this._scrollSize},set:function(t){this._scrollSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof Number||t instanceof String?this.value=Number(t):egret.superSetter(i,this,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"thumbPercent",{get:function(){return this._thumbPercent},set:function(e){this.exeCallLater(this.changeSize,this),this._thumbPercent=e,this._slider.direction==i.VERTICAL?this._slider.bar.height=Math.max(Math.min(Math.floor(this._slider.height*e),this.height),t.Styles.scrollBarMinNum):this._slider.bar.width=Math.max(Math.floor(this._slider.width*e),t.Styles.scrollBarMinNum)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this._target&&(this._target.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTargetMouseDown,this),this._target.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTargetMouseUp,this)),this._target=t,t&&(this._mouseWheelEnable,this._touchScrollEnable&&(this._target.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTargetMouseDown,this),this._target.addEventListener(egret.TouchEvent.TOUCH_END,this.onTargetMouseUp,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"touchScrollEnable",{get:function(){return this._touchScrollEnable},set:function(t){this._touchScrollEnable=t,this.target=this._target},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mouseWheelEnable",{get:function(){return this._mouseWheelEnable},set:function(t){this._mouseWheelEnable=t,this.target=this._target},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoHide",{get:function(){return this._autoHide},set:function(t){this._autoHide=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"changeHandler",{get:function(){return this._changeHandler},set:function(t){this._changeHandler=t},enumerable:!0,configurable:!0}),i.prototype.onTargetMouseDown=function(t){asf.App.timer.clearTimer(this._tweenMoveTimer),this.contains(t.target)||(asf.App.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp2,this),asf.App.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageEnterFrame,this),this._lastPoint=new egret.Point(t.stageX,t.stageY))},i.prototype.onTargetMouseUp=function(t){asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageEnterFrame,this),asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp2,this)},i.prototype.onStageEnterFrame=function(t){this._lastOffset=this._slider.direction==i.VERTICAL?t.stageY-this._lastPoint.y:t.stageX-this._lastPoint.x,Math.abs(this._lastOffset)>=1&&(this._lastPoint.x=t.stageX,this._lastPoint.y=t.stageY,this.value-=this._lastOffset)},i.prototype.onStageMouseUp2=function(t){asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp2,this),asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageEnterFrame,this),this._lastOffset=this._slider.direction==i.VERTICAL?t.stageY-this._lastPoint.y:t.stageX-this._lastPoint.x,Math.abs(this._lastOffset)>50&&(this._lastOffset=50*(this._lastOffset>0?1:-1)),this._tweenMoveTimer=asf.App.timer.doFrameLoop(1,this.tweenMove,this,null,this._tweenMoveTimer)},i.prototype.tweenMove=function(){this._lastOffset=.92*this._lastOffset,this.value-=this._lastOffset,Math.abs(this._lastOffset)<.5&&asf.App.timer.clearTimer(this._tweenMoveTimer)},i.prototype.destroy=function(){this.removeLater(this.changeScrollBar,this),this.removeLater(this.upDataScrollShow,this),this._target&&(this._target.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTargetMouseDown,this),this._target.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTargetMouseUp,this)),asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp2,this),asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageEnterFrame,this),this.onStageMouseUp(null),this._skin=null,this._upButton&&(this._upButton.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonMouseDown,this),this._upButton.parent&&this.removeChild(this._upButton),this._upButton.destroy(),this._upButton=null),this._downButton&&(this._downButton.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonMouseDown,this),this._downButton.parent&&this.removeChild(this._downButton),this._downButton.destroy(),this._downButton=null),this._slider&&(this._slider.removeEventListener(egret.Event.CHANGE,this.onSliderChange,this),this._slider.parent&&this.removeChild(this._slider),this._slider.destroy(),this._slider=null),null!=this._changeHandler&&(this._changeHandler.destroy(),this._changeHandler=null),this._lastPoint=null,asf.App.timer.clearTimer(this._tweenMoveTimer),asf.App.timer.clearTimer(this._startLoopTimer),asf.App.timer.clearTimer(this._slideTimer),e.prototype.destroy.call(this)},i.HORIZONTAL="horizontal",i.VERTICAL="vertical",i}(t.Component);t.ScrollBar=e,__reflect(e.prototype,"morn.ScrollBar")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._max=100,t._min=0,t._tick=1,t._value=0,t._showLabel=!0,t.mousePoint=new egret.Point,t}return __extends(i,e),i.prototype.preinitialize=function(){this.touchChildren=!0},i.prototype.createChildren=function(){this.addChild(this._back=new t.Image),this.addChild(this._bar=new t.Button),this.addChild(this._label=new t.Label)},i.prototype.initialize=function(){this._bar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonMouseDown,this),this._back.sizeGrid=this._bar.sizeGrid="4,4,4,4",this.allowBackClick=!0},i.prototype.onButtonMouseDown=function(t){this.mousePoint.x=t.stageX,this.mousePoint.y=t.stageY,asf.App.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp,this),asf.App.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageMouseMove,this),this._direction==i.VERTICAL?this.bounds=new egret.Rectangle(this._bar.x,0,this._bar.x,this.height-this._bar.height):this.bounds=new egret.Rectangle(0,this._bar.y,this.width-this._bar.width,this._bar.y),this.showValueText()},i.prototype.showValueText=function(){this._showLabel&&(this._label.text=this._value+"",this._direction==i.VERTICAL?(this._label.x=this._bar.x+20,this._label.y=.5*(this._bar.height-this._label.height)+this._bar.y):(this._label.y=this._bar.y-20,this._label.x=.5*(this._bar.width-this._label.width)+this._bar.x))},i.prototype.hideValueText=function(){this._label.text=""},i.prototype.onStageMouseUp=function(t){asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageMouseUp,this),asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageMouseMove,this),this.hideValueText()},i.prototype.onStageMouseMove=function(t){this._bar.x+=t.stageX-this.mousePoint.x,this._bar.y+=t.stageY-this.mousePoint.y,this.bounds&&(this._bar.x<this.bounds.x?this._bar.x=this.bounds.x:this._bar.x>this.bounds.width&&(this._bar.x=this.bounds.width),this._bar.y<this.bounds.y?this._bar.y=this.bounds.y:this._bar.y>this.bounds.height&&(this._bar.y=this.bounds.height)),this.mousePoint.x=t.stageX,this.mousePoint.y=t.stageY;var e=this._value;this._direction==i.VERTICAL?this._value=this._bar.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this._value=this._bar.x/(this.width-this._bar.width)*(this._max-this._min)+this._min,this._value=Math.round(this._value/this._tick)*this._tick,this._value!=e&&(this.showValueText(),this.sendChangeEvent())},i.prototype.sendChangeEvent=function(){this.sendEvent(egret.Event.CHANGE),null!=this._changeHandler&&this._changeHandler.execute(this._value)},Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this._back.url=this._skin,this._bar.skin=this._skin+"$bar",this._contentWidth=this._back.width,this._contentHeight=this._back.height,this.setBarPoint())},enumerable:!0,configurable:!0}),i.prototype.changeSize=function(){e.prototype.changeSize.call(this),this._back.width=this.width,this._back.height=this.height,this.setBarPoint()},i.prototype.setBarPoint=function(){this._direction==i.VERTICAL?this._bar.x=.5*(this._back.width-this._bar.width):this._bar.y=.5*(this._back.height-this._bar.height)},Object.defineProperty(i.prototype,"sizeGrid",{get:function(){return this._back.sizeGrid},set:function(t){this._back.sizeGrid=t,this._bar.sizeGrid=t},enumerable:!0,configurable:!0}),i.prototype.changeValue=function(){this._value=Math.round(this._value/this._tick)*this._tick,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value,this._direction==i.VERTICAL?this._bar.y=(this._value-this._min)/(this._max-this._min)*(this.height-this._bar.height):this._bar.x=(this._value-this._min)/(this._max-this._min)*(this.width-this._bar.width)},i.prototype.setSlider=function(t,e,i){this._value=-1,this._min=t,this._max=e>t?e:t,this.value=t>i?t:i>e?e:i},Object.defineProperty(i.prototype,"tick",{get:function(){return this._tick},set:function(t){this._tick=t,this.callLater(this.changeValue,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},set:function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue,this))},enumerable:!0,configurable:!0}),i.prototype.changeValueNow=function(){this.callLater(this.changeValue,this)},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.changeValue(),this.sendChangeEvent())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showLabel",{get:function(){return this._showLabel},set:function(t){this._showLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowBackClick",{get:function(){return this._allowBackClick},set:function(t){this._allowBackClick!=t&&(this._allowBackClick=t,this._allowBackClick?this._back.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBackBoxMouseDown,this):this._back.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBackBoxMouseDown,this))},enumerable:!0,configurable:!0}),i.prototype.onBackBoxMouseDown=function(t){this._direction==i.VERTICAL?this.value=this._back.mouseY/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=this._back.mouseX/(this.width-this._bar.width)*(this._max-this._min)+this._min},Object.defineProperty(i.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof Number||t instanceof String?this.value=Number(t):egret.superSetter(i,this,"dataSource",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bar",{get:function(){return this._bar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"changeHandler",{get:function(){return this._changeHandler},set:function(t){this._changeHandler=t},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this._direction=null,null!=this._skin&&(this._skin=null),this._back&&(this._back.parent&&this.removeChild(this._back),this._back.destroy(),this._back=null),this._bar&&(this._bar.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonMouseDown,this),this._bar.parent&&this.removeChild(this._bar),this._bar.destroy(),this._bar=null),this._label&&(this._label.parent&&this.removeChild(this._label),this._label.destroy(),this._label=null),null!=this._changeHandler&&(this._changeHandler.destroy(),this._changeHandler=null),e.prototype.destroy.call(this)},i.HORIZONTAL="horizontal",i.VERTICAL="vertical",i}(t.Component);t.Slider=e,__reflect(e.prototype,"morn.Slider")}(morn||(morn={}));var asf;!function(t){var e=function(){function e(){var i=i=t.ClassUtils.forInstance(this);if(i){if(e.classMap.hasKey(i))throw new Error(this+" 只允许实例化一次！");e.classMap.put(i,this)}}return e.prototype.destroy=function(t){void 0===t&&(t=null),e.classMap.remove(this.constructor),this.onDestroy()},e.prototype.onDestroy=function(){},e.removeInstance=function(t){this.classMap.remove(t)},e.getInstanceOrCreate=function(t){var i=this.classMap.get(t);return i||(i=new t,i instanceof e||this.classMap.put(t,i)),i},e.classMap=new t.Dictionary,e}();t.Singleton=e,__reflect(e.prototype,"asf.Singleton",["asf.IDestory"])}(asf||(asf={}));var morn;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.preinitialize=function(){this.touchEnabled=this.touchChildren=!0,this.layoutJsonParse=!1,this.layoutComolete=!1},i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.childUIArr=[],this.childUINum=0},i.prototype.initialize=function(){e.prototype.initialize.call(this),this.childUICompleteNum=0;for(var t=0,i=this.childUIArr;t<i.length;t++){var n=i[t];n.layoutComolete||(n.layoutCallback&&console.error("子UI不应该有除了他父级以外的完成回调函数"),n.layoutCallback=asf.CallBack.create(this.childComplete,this,n),this.childUINum++)}this.layoutJsonPath&&this.layoutJsonPath.length>0?RES.getResByUrl(this.layoutJsonPath,this.layoutJsonLoaded,this,RES.ResourceItem.TYPE_JSON):(this.layoutJsonParse=!0,this.checkComplete())},i.prototype.destroy=function(){this.layoutCallback=null,this.childUIArr=null,e.prototype.destroy.call(this)},i.prototype.setLayoutJsonPath=function(t){this.layoutJsonPath=t},i.prototype.childComplete=function(t){var e=this.childUIArr.indexOf(t);-1!=e&&this.childUIArr.splice(e,1),this.childUICompleteNum++,this.checkComplete()},i.prototype.layoutJsonLoaded=function(e,i){this.isDestroy||(t.LayoutJsonParse.parse(e,this),this.layoutJsonParse=!0,this.checkComplete())},i.prototype.checkComplete=function(){this.childUICompleteNum>=this.childUINum&&this.layoutJsonParse&&(this.layoutComolete=!0,this.layoutCallback&&this.layoutCallback.execute())},i}(t.Box);t.View=e,__reflect(e.prototype,"morn.View")}(morn||(morn={}));var game;!function(t){var e=function(){function t(){}return t.prototype.isCheckout=function(t){return this.msgLen=t.readShort(),this.msgLen==t.bytesAvailable?!0:!1},t}();t.BasicMsgCodec=e,__reflect(e.prototype,"game.BasicMsgCodec")}(game||(game={}));var game;!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.session=t.Session.instance,n.db=t.DB.ins,n}return __extends(i,e),i}(mvc.BasicHelper);t.Helper=e,__reflect(e.prototype,"game.Helper")}(game||(game={}));var game;!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.session=t.Session.instance,n.db=t.DB.ins,n}return __extends(i,e),i}(mvc.BasicModule);t.Module=e,__reflect(e.prototype,"game.Module")}(game||(game={}));var DebugBean=function(){function t(){}return t}();__reflect(DebugBean.prototype,"DebugBean");var DebugIpBean=function(){function t(){}return t}();__reflect(DebugIpBean.prototype,"DebugIpBean");var DebugGameBean=function(){function t(){}return t}();__reflect(DebugGameBean.prototype,"DebugGameBean");var asf;!function(t){var e=t.ASFObject,i=[],n=function(e){function n(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=e.call(this)||this;return r.x=t,r.y=i,r.width=n,r.height=o,r}return __extends(n,e),n.release=function(t){t&&i.push(t)},n.create=function(){var t=i.pop();return t||(t=new n),t},Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),n.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},n.prototype.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},n.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},n.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},n.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},n.prototype.$intersectInPlace=function(t){var e=this.x,i=this.y,n=t.x,o=t.y,r=Math.max(e,n),s=Math.min(e+this.width,n+t.width);if(s>=r){var a=Math.max(i,o),h=Math.min(i+this.height,o+t.height);if(h>=a)return this.setTo(r,a,s-r,h-a),this}return this.setEmpty(),this},n.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},n.prototype.isEmpty=function(){return this.width<=0||this.height<=0},n.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},n.prototype.clone=function(){var t=n.create();return t.setTo(this.x,this.y,this.width,this.height),t},n.prototype.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y?!0:!1},n.prototype.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,o=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<o&&e>this.x&&n>=e&&i>this.y&&o>=i},n.prototype.equals=function(t){return this===t?!0:this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},n.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},n.prototype.offset=function(t,e){this.x+=t,this.y+=e},n.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},n.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},n.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e},n.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},n.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return i*this.width+e*this.height},n}(e);t.Rect=n,__reflect(n.prototype,"asf.Rect"),t.$TempRect=new n}(asf||(asf={}));var $tempNetBytes,asf;!function(t){var e=function(){function t(){}return t.isTrue=function(t,e){void 0===e&&(e=""),t||this.isThrowIllegalArgumentError(e,"[Assert.isTrue] - 该表达式必须是为真。")},t.notNull=function(t,e){void 0===e&&(e=""),t||this.isThrowIllegalArgumentError(e,"[Assert.notNull] - 参数不能为空。")},t.isInstanceOf=function(t,e,i){void 0===i&&(i="")},t.isAbstractClass=function(t,e){},t.isIndexOutOfBounds=function(t,e,i){if(void 0===i&&(i=""),0>t||t>=e)throw new Error(i+"越界了，传入的是:"+t+"，实际长度是:"+e)},t.isThrowIllegalArgumentError=function(t,e){throw t&&0!=t.length||(t=e),new Error(t)},t}();t.Assert=e,__reflect(e.prototype,"asf.Assert")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){}return e.addRef=function(t){this.refMap.put(t,t)},e.removeRef=function(t){this.refMap.remove(t)},e.hasValue=function(t){return this.dataMap.hasKey(t)},e.addValue=function(t,e){this.dataMap.put(t,e)},e.getValue=function(t){return this.dataMap.get(t)},e.removeValue=function(t){return this.dataMap.remove(t)},e.createAny=function(){var t={};return t},e.subject=new t.Subject,e.refMap=new t.Dictionary,e.dataMap=new t.Dictionary,e.FRAMERATE_NORMAL=30,e}();t.Global=e,__reflect(e.prototype,"asf.Global")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.init=function(t){void 0===t&&(t=!1),this.funList=[],this.funPulsList=[],this.emptyFun=function(){};for(var e=0;e<this.funNames.length;e++)this.funList.push(console[this.funNames[e]]);for(var e=0;e<this.funNames.length;e++)this.createPlusFun(this.funList[e],this.funNames[e]);this.setConsoleMode(t)},t.setLevel=function(t){this.$level=t,this.openConsole()},t.setConsoleMode=function(t){this.isPlusMode=t,t?this.openConsolePlus():this.openConsole()},t.openConsole=function(){if(this.closeConsole(),this.isPlusMode)return void this.openConsolePlus();for(var t=this.$level;t<this.funNames.length;t++)console[this.funNames[t]]=this.funList[t]},t.closeConsole=function(){for(var t=0;t<this.funNames.length;t++)console[this.funNames[t]]=this.emptyFun},t.openConsolePlus=function(){this.isPlusMode=!0;for(var t=this.$level;t<this.funNames.length;t++)console[this.funNames[t]]=this.funPulsList[t]},t.closeConsolePlus=function(){this.isPlusMode=!1,this.openConsole()},t.createPlusFun=function(t,e){var i=function(i){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];console.group("["+e+"]["+new Date+"]"),t.apply(console,arguments),console.groupEnd()};this.funPulsList.push(i)},t.TRACE=0,t.DEBUG=1,t.LOG=2,t.INFO=3,t.WARN=4,t.ERROR=5,t.$level=t.LOG,t.funNames=["trace","debug","log","info","warn","error"],t}();t.ConsolePlus=e,__reflect(e.prototype,"asf.ConsolePlus")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){}return e.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.DEBUG,e)},e.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.INFO,e)},e.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.LOG,e)},e.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.WARN,e)},e.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.ERROR,e)},e.formatLog=function(t,e){if(this.isOpen&&this.level.level<=t.level){for(var i="",n=0;n<e.length;n++)""==i?i+=e[n]:i=i+","+e[n];console[t.name]("["+t.name+"]: "+i)}},e.setLevel=function(t){e.level=t},e.isOpen=!0,e.level=t.Level.DEBUG,e}();t.Log=e,__reflect(e.prototype,"asf.Log")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){}return e.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.DEBUG,e)},e.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.INFO,e)},e.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.LOG,e)},e.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.WARN,e)},e.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.ERROR,e)},e.formatLog=function(t,e){if(this.isOpen&&this.level.level<=t.level)for(var i=0;i<e.length;i++)console[t.name](e[i])},e.setLevel=function(e){t.Log.level=e},e.isOpen=!0,e.level=t.Level.LOG,e}();t.LogFactory=e,__reflect(e.prototype,"asf.LogFactory")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(t){"string"==typeof t&&(this.logHead=t)}return e.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.DEBUG,e)},e.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.INFO,e)},e.prototype.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.LOG,e)},e.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.WARN,e)},e.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.formatLog(t.Level.ERROR,e)},e.prototype.formatLog=function(e,i){if(t.Log.isOpen&&t.Log.level.level<=e.level){for(var n="",o=0;o<i.length;o++)""==n?n+=i[o]:n=n+","+i[o];console[e.name]("["+e.name+"]"+this.logHead+":"+n)}},e.prototype.setLevel=function(e){t.Log.level=e},e}();t.Logger=e,__reflect(e.prototype,"asf.Logger")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){}return e.init=function(i){this.stage=i.stage,e.timer=new t.TimerManager,e.render=new t.RenderManager,e.tick=new t.Tick,e.timeMgr=new t.TimeMgr},e}();t.App=e,__reflect(e.prototype,"asf.App")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(t,e,i){this.type=0,this.type=t,this.key=e,this.value=i}return t}();t.DictionaryExVo=e,__reflect(e.prototype,"asf.DictionaryExVo");var i=function(i){function n(){var t=i.call(this)||this;return t.isLoop=!1,t.clear(),t}return __extends(n,i),n.prototype.delayToHandler=function(){for(var t=this.waitHandlerArr.length,e=0;t>e;e++)0==this.waitHandlerArr[e].type?this.toPut(this.waitHandlerArr[e].key,this.waitHandlerArr[e].value):this.toRemove(this.waitHandlerArr[e].key);this.waitHandlerArr=[]},n.prototype.put=function(t,i){this.isLoop?this.waitHandlerArr.push(new e(0,t,i)):this.toPut(t,i)},n.prototype.toPut=function(t,e){var i=this.$keys.indexOf(t);-1==i?(this.$keys.push(t),this.$values.push(e)):this.$values[i]=e},n.prototype.get=function(t){var e=this.$keys.indexOf(t);return-1==e?null:this.$values[e]},n.prototype.remove=function(t){return this.isLoop?(this.waitHandlerArr.push(new e(1,t)),this.get(t)):this.toRemove(t)},n.prototype.toRemove=function(t){var e=this.$keys.indexOf(t);if(-1==e)return null;var i=this.get(t);return this.$keys.splice(e,1),this.$values.splice(e,1),i},n.prototype.indexOf=function(t){return this.$keys.indexOf(t)},n.prototype.isEmpty=function(){return 0==this.$keys.length},n.prototype.hasKey=function(t){return-1!=this.$keys.indexOf(t)},n.prototype.hasValue=function(t){return-1!=this.$values.indexOf(t)},n.prototype.size=function(){return this.$keys.length},n.prototype.keys=function(t){return void 0===t&&(t=!0),t?this.$keys.concat():this.$keys},n.prototype.values=function(t){return void 0===t&&(t=!0),t?this.$values.concat():this.$values},n.prototype.forEach=function(t,e){this.isLoop=!0;for(var i=this.$values.length,n=0;i>n;n++)t.call(e,this.$values[n]);this.isLoop&&this.delayToHandler(),this.isLoop=!1},n.prototype.forKeyValue=function(t,e){this.isLoop=!0;for(var i=this.$values.length,n=0;i>n;n++)t.call(e,this.$keys[n],this.$values[n]);this.isLoop&&this.delayToHandler(),this.isLoop=!1},n.prototype.getContainer=function(){return this.$values},n.prototype.clear=function(){this.$keys=[],this.$values=[],this.waitHandlerArr=[]},n.prototype.destroy=function(e){for(var i=0;i<this.$values.length;i++)t.DestroyUtils.destroy(this.$values[i]);delete this.$keys,delete this.$values,delete this.waitHandlerArr},n}(t.ASFObject);t.DictionaryEx=i,__reflect(i.prototype,"asf.DictionaryEx",["asf.IMap","asf.IDestory"])}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.resParseTime=15,t.sharingPoolDelay=3e4,t.isResSharing=!0,t.isCacheBytes=!0,t}();t.ASF=e,__reflect(e.prototype,"asf.ASF")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){this.clear()}return e.prototype.put=function(t,e){var i=this.$keyValues[t];i||this.length++,this.$keyValues[t]=e},e.prototype.get=function(t){return this.$keyValues[t]},e.prototype.remove=function(t){var e=this.$keyValues[t];return e&&(this.$keyValues.splice(t,1),this.length--),e},e.prototype.indexOf=function(t){return this.$keyValues[t]?t:-1},e.prototype.isEmpty=function(){return 0==this.length},e.prototype.hasKey=function(t){return this.$keyValues[t]?!0:!1},e.prototype.hasValue=function(t){return-1!=this.$keyValues.indexOf(t)},e.prototype.size=function(){return this.length},e.prototype.keys=function(t){void 0===t&&(t=!0);for(var e=this.$keyValues,i=e.length,n=[],o=0;i>o;o++)e[o]&&n.push(o);return n},e.prototype.values=function(t){void 0===t&&(t=!0);for(var e=this.$keyValues,i=e.length,n=[],o=0;i>o;o++)e[o]&&n.push(e[o]);return n},e.prototype.forEach=function(t,e){for(var i=this.$keyValues,n=i.length,o=0;n>o;o++)i[o]&&t.call(e,i[o])},e.prototype.forKeyValue=function(t,e){for(var i=this.$keyValues,n=i.length,o=0;n>o;o++)i[o]&&t.call(e,o,i[o])},e.prototype.getContainer=function(){return this.$keyValues},e.prototype.clear=function(){this.length=0,this.$keyValues=[]},e.prototype.destroy=function(e){for(var i=this.$keyValues,n=i.length,o=0;n>o;o++)i[o]&&t.DestroyUtils.destroy(i[o]);delete this.$keyValues},e}();t.NumberKeyMap=e,__reflect(e.prototype,"asf.NumberKeyMap",["asf.IMap","asf.IDestory"])}(asf||(asf={}));var asf;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.obj=new Object,t._length=0,t}return __extends(i,e),i.prototype.put=function(t,e){null!=this.obj[t]&&this._length--,this.obj[t]=e,this._length++
},i.prototype.get=function(t){return this.obj[t]},i.prototype.clear=function(){this.obj=new Object,this._length=0},i.prototype.remove=function(t){var e=this.obj[t];return null!=e&&(delete this.obj[t],this._length--),e},i.prototype.size=function(){return this._length},i.prototype.isEmpty=function(){return 0==this._length},i.prototype.hasKey=function(t){return null!=this.obj[t]},i.prototype.hasValue=function(t){for(var e in this.obj)if(this.obj[e]==t)return!0;return!1},i.prototype.values=function(){var t=[];if(0!=this._length){for(var e in this.obj)t.push(this.obj[e]);return t}return t},i.prototype.keys=function(){var t=[];if(0!=this._length){for(var e in this.obj)t.push(e);return t}return t},i.prototype.getContainer=function(){return this.obj},i.prototype.forEach=function(t,e){for(var i in this.obj)t.call(e,this.obj[i])},i.prototype.forKeyValue=function(t,e){for(var i in this.obj)t.call(e,i,this.obj[i])},i.prototype.destroy=function(e){for(var i in this.obj)t.DestroyUtils.destroy(this.obj[i]);this.obj=null},i}(t.ASFObject);t.ObjectMap=e,__reflect(e.prototype,"asf.ObjectMap",["asf.IMap","asf.IDestory"])}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){}return e.init=function(){this.$poolMap=new t.Dictionary},e.getPool=function(t){return this.$poolMap.get(t)},e.regClass=function(e,i,n){void 0===i&&(i=-1),void 0===n&&(n=!1);var o=this.$poolMap;if(!o.hasKey(e)){-1==i&&(i=this.defaultMax);var r=new t.Pool(e,i,n);return o.put(e,r),r}},e.regPool=function(t,e){this.$poolMap.put(t,e)},e.clearPoolChildren=function(t){var e=this.$poolMap.get(t);e&&e.destroy()},e.clearPool=function(t,e){void 0===e&&(e=!1);var i=this.$poolMap,n=i.get(t);n&&(e?(n.destroy(),i.remove(t)):n.clear())},e.create=function(t){var e=this.$poolMap.get(t);return e?e.create():null},e.release=function(e,i){void 0===i&&(i=null),i||(i=t.ClassUtils.forInstance(e));var n=this.$poolMap.get(i);n&&n.release(e)},e.isFull=function(e,i){void 0===i&&(i=null),i||(i=t.ClassUtils.forInstance(e));var n=this.$poolMap.get(i);return n.isFull()},e.defaultMax=20,e}();t.PoolMgr=e,__reflect(e.prototype,"asf.PoolMgr")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){this.resource=new RES.Resource,this.foreverArr=[],this.timerId=-1,this.isInitLoadGroup=!1,this.preloadNums=0,this.resKeyMap={},t.PoolMgr.regClass(i,1e3),this.resCountMap=new t.HashMap,this.loaderMap=new t.HashMap,this.disposeMap=new t.HashMap,this.resUrlMap=new t.HashMap,this.resUrlCountMap=new t.HashMap,this.preloadArr=[]}return e.prototype.init=function(e,i,n,o){this.timerId=t.App.timer.doLoop(1e4,this.loopDispose,this,null,this.timerId),n&&(this.configCallBack=new t.CallBack(n,o),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfig,this),RES.addEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.configError,this),RES.loadConfig(e,i))},e.prototype.onConfig=function(t){console.info("配置加载完成",t.target),this.resKeyMap=t.target,this.configCallBack.execute()},e.prototype.configError=function(t){console.info("配置加载报错",t)},e.prototype.loadGroup=function(e,n,o){var r=this.resource;this.isInitLoadGroup||(this.isInitLoadGroup=!0,r.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),r.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),r.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),r.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)),this.groupResMap||(this.groupResMap=new t.HashMap);var s=new i;s.url=e,s.callback=new t.CallBack(n,o),s.thisObj=o,this.groupResMap.put(e,s),r.loadGroup(e),r.setMaxRetryTimes(1)},e.prototype.onResourceLoadComplete=function(t){if(this.groupResMap){var e=this.groupResMap.remove(t.groupName);e&&e.callback&&(e.data=t.resItem,e.callback.execute(e))}},e.prototype.onResourceLoadError=function(t){},e.prototype.onResourceProgress=function(t){},e.prototype.onItemLoadError=function(){},e.prototype.getGroupByName=function(t){return this.resource.getGroupByName(t)},e.prototype.preload=function(t,e,i,o){var r=new n;r.id=this.preloadNums,r.thisObj=this,r.urls=t,r.type=e,r.callback=i,r.callbackThisObj=o,this.preloadArr.push(r);for(var s,a=0;a<t.length;a++)s=t[a],this.resource.getResByUrl(s,this.onResPreloadLoadComplete,r);return this.preloadNums++,r},e.prototype.onResPreloadLoadComplete=function(t,e){if(this instanceof n){var i=this.thisObj.preloadArr[this.id],o=i.urls.indexOf(e);-1!=o&&(this.thisObj.resUrlMap.put(e,t),i.callNum++,this.thisObj.preloadLoadComplete(i))}},e.prototype.preloadLoadComplete=function(t){t.callNum>=t.urls.length&&(t.callback.call(t.callbackThisObj),this.preloadArr[t.id]=null)},e.prototype.checkLocalResUrl=function(t){var i=t,n=!1;if(e.isLoadLocalRes&&-1!=t.indexOf("/")){var o=t.split("/");t=o[o.length-1],o=t.split("."),t=o[0]+"_"+o[1],this.resKeyMap[t]?n=!0:t=i}return t},e.prototype.getRes=function(e,n,o,r){var s=this.getMainTextureName(e);this.disposeMap.hasKey(s)&&this.disposeMap.remove(s);e=this.checkLocalResUrl(e);var a=this.resource,h=a.getRes(e);if(a.hasRes(e)&&h){if(n){var l=new i;l.callback=new t.CallBack(n,o),l.thisObj=o,l.url=e,l.callback.execute(l)}return h}if(-1==e.indexOf("?")&&1==e.indexOf("."))return void console.error(e+"在图集中不存在！");var l=new i;l.callback=new t.CallBack(n,o),l.thisObj=o,l.url=e;var c=e.split("."),u=c[c.length-1],p=RES.ResourceItem.TYPE_IMAGE;if("json"==u?(console.log("获取json文件"),p=RES.ResourceItem.TYPE_JSON):"text"==u&&(p=RES.ResourceItem.TYPE_TEXT),l.param=r,this.loaderMap.hasKey(e)){var d=this.loaderMap.get(e);d.push(l)}else this.loaderMap.put(e,[l]);this.resUrlMap.hasKey(e)?this.onResLoadComplete(this.resUrlMap.get(e),e):a.getResByUrl(e,this.onResLoadComplete,this,p)},e.prototype.onResLoadComplete=function(t,e){if(this.loaderMap.hasKey(e)){if(t){var i=this.getMainTextureName(e);this.disposeMap.hasKey(i)&&this.disposeMap.remove(i);for(var n,o=this.loaderMap.get(e),r=o.length,s=0;r>s;s++)n=o[s],n.callback.execute(t,e);this.resUrlMap.put(e,t)}this.loaderMap.remove(e)}},e.prototype.getMainTextureName=function(t){var e=t;if(this.resKeyMap[t]){var i=this.resKeyMap[t].url.split("/");e=i[i.length-2]+"_json"}else{var n=e.replace(/.*\./,"");this.resKeyMap[n]&&(e=this.resKeyMap[n].name)}return e},e.prototype.addCount=function(t){var e=this.resUrlCountMap.get(t);e||(e=0),this.resUrlCountMap.put(t,e+1);var i=this.getMainTextureName(t),e=this.resCountMap.get(i);e||(e=0),this.resCountMap.put(i,e+1)},e.prototype.removeCount=function(t){var e=this.resUrlCountMap.get(t);e&&e>0&&(e--,this.resUrlCountMap.put(t,e)),(!e||0>=e)&&this.resUrlCountMap.remove(t);var i=this.getMainTextureName(t),e=this.resCountMap.get(i);return e&&e>0&&(e--,this.resCountMap.put(i,e)),!e||0>=e?(this.resCountMap.remove(i),this.dispose(null,i),!0):!1},e.prototype.setForever=function(t){this.foreverArr.push(t)},e.prototype.setForeverGroup=function(t){var e=this.resource.getGroupByName(t);0==e.length&&console.log("我有问题");for(var i=0;i<e.length;i++)this.setForever(e[i].name),console.log(e[i].name)},e.prototype.dispose=function(t,e){-1==this.foreverArr.indexOf(e)&&this.disposeMap.put(e,e)},e.prototype.loopDispose=function(){this.disposeMap.size()>0&&(this.disposeMap.forEach(function(t){var e=this.getMainTextureName(t),i=this.resCountMap.get(e);if(!i||0>=i){var n=this.resUrlMap.remove(t);n&&n.dispose(),RES.hasRes(t)}},this),this.disposeMap.clear())},e.ins=function(){return null==this.instance&&(this.instance=new e),this.instance},e.isLoadLocalRes=!1,e}();t.ResMgr=e,__reflect(e.prototype,"asf.ResMgr");var i=function(){function t(){}return t}();t.LoaderInfo=i,__reflect(i.prototype,"asf.LoaderInfo");var n=function(){function t(){this.callNum=0}return t}();t.PreloadInfo=n,__reflect(n.prototype,"asf.PreloadInfo")}(asf||(asf={}));var asf;!function(t){function e(t){}t.addTick=e}(asf||(asf={}));var asf;!function(t){var e=function(){function t(t,e,i){void 0===i&&(i=!1),this.listener=t,this.thisObj=e,this.isOnce=i}return t}();t.NoticeData=e,__reflect(e.prototype,"asf.NoticeData")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){this.listeners=[]}return t}();t.NoticeList=e,__reflect(e.prototype,"asf.NoticeList")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.QUEUE="queue",t.SAME="same",t.REPEAT="repeat",t.ALONE="alone",t.INJECT_ACTOR="actor",t.INJECT_PARAM="param",t.INJECT_SET_PARAMS="setParams",t}();t.ActionConsts=e,__reflect(e.prototype,"asf.ActionConsts")}(asf||(asf={}));var mvc;!function(t){var e=function(){function e(){}return e.init=function(){this.moduleBeanMap=new asf.Dictionary,this.viewBeanMap=new asf.Dictionary,this.beanMap=new asf.Dictionary,this.mvcSession=t.MvcSession.getInstance(),this.subjects=this.mvcSession.subjects,t.MvcReg.init(this.moduleBeanMap,this.viewBeanMap,this.beanMap),t.MvcReg.regBean("mvcSession",this.mvcSession),t.MvcReg.regBean("subjects",this.subjects)},e.initModule=function(){},e.takeServer=function(){this.moduleBeanMap.forEach(function(t){if(t.instance&&!t.instance.isTakeServer){t.instance.isTakeServer=!0;try{t.instance.takeServer()}catch(e){console.error(t.name+"takeServer报错:",e)}}},this)},e.startModule=function(i,n){var o=this.moduleBeanMap.get(i);if(asf.Assert.notNull(o,i+"必须需提前注册"),!o.instance){o.instance=new o.clazz,o.instance.init();var r=t.MvcUtils.createCore(o);t.MvcUtils.setIdName(r,o),e.$moduleMgrClass&&e.$moduleMgrClass.hasOwnProperty(r.name)&&(e.$moduleMgrClass[r.name]=r)}},e.$destroyViewEvent=function(e){var i=this.viewBeanMap.get(t.MvcUtils.getViewKey(e));if(i){i.isOpen=!1,i.instance=null;for(var n=0;n<i.helperBeans.length;n++)i.helperBeans[n].instance=null}},e.$getModule=function(t){return this.moduleBeanMap.get(t).instance},e.$getViewBean=function(t){return this.viewBeanMap.get(t)},e.$openView=function(e,i,n,o,r){if(i&&!n)throw new Error("openView方法如果有callBack方法，thisObj则不能为空");var s=this.viewBeanMap.get(e);if(!s)throw new Error(e+"openView方法必须通过MvcReg进行注册");if(!s.isLoading&&!this.$holdupView.openViewHold(s,o,i,n)){if(!s.instance)return s.isOpen=!0,void(i?new t.InitView(!0,s,asf.CallBack.create(i,n,null,!0),o):new t.InitView(!0,s,null,o));if(!r&&this.$viewHanlder.hasView(s))return void s.instance.close();s.instance.openFlag=!0,s.openView(o),asf.FuncUtils.execute(i,n)}},e.$getView=function(t,e){var i=this.viewBeanMap.get(t);return i.instance},e.$closeView=function(e){var i=this.viewBeanMap.get(t.MvcUtils.getViewKey(e));if(!i)throw console.info("closeView关闭失败"),new Error(e+"Context.$closeView方法必须通过MvcReg进行注册");i.instance.openFlag=!1,this.$viewHanlder.delView(i)},e.addView=function(e,i,n){if(n&&t.MvcUtils.eachInject(n,e),i)for(var o=0;o<i.length;o++)t.MvcUtils.eachInject(e,i[o]),n&&t.MvcUtils.eachInject(n,i[o]);this.$addView(e)},e.$addView=function(e){var i=this.viewBeanMap.get(t.MvcUtils.getViewKey(e));i||(i=new t.ViewBean(e,t.MvcUtils.createConfig(e,t.ViewConfig)),i.name=e.name,this.viewBeanMap.put(e.name,i),e.id&&0!=e.id&&this.viewBeanMap.put(e.id,i)),i.instance=e,this.$viewHanlder.addView(i)},e.$removeView=function(e,i){var n=this.viewBeanMap.get(t.MvcUtils.getViewKey(e));return n?void this.$viewHanlder.delView(n):void console.error(e.name+"$removeView删除失败")},e.startView=function(i,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var s=e.$getViewBean(i);if(!s&&(s=t.MvcReg.regView(i),o&&o.length>0))for(var a=0;a<o.length;a++)t.MvcReg.regHelper(i,o[a]);s.instance?s.instance.isOpen||s.instance.open():new t.InitView(!0,s)},e.startup=function(e,i,n){new t.StartupCore(this.moduleBeanMap,this.viewBeanMap,asf.CallBack.create(i,n)).startup()},e}();t.Context=e,__reflect(e.prototype,"mvc.Context")}(mvc||(mvc={}));var mvc;!function(t){function e(e,i,n,o,r){console.info("初始化mvc框架"),t.Context.$holdupView=i,t.Context.$viewHanlder=e,t.Context.$resLoaderClass=n,t.Context.$moduleMgrClass=o,t.Context.$dbClass=r,t.Context.init(),mvc_subjects=t.Context.subjects}function i(e,i,n,o,r){t.Context.$openView(e,i,n,o,r)}function n(e,i,n){t.Context.$openView(e,null,null,i,n)}function o(t){this.closeView(t,!0)}function r(e){void 0===e&&(e=-1),t.Context.$viewHanlder.closeViewByLv(e)}function s(e,i){void 0===i&&(i=!1);var n=t.Context.$getViewBean(e);if(n&&n.instance)return i&&!n.instance.isOpen?void t.Context.$destroyViewEvent(n.instance):void(i?n.instance.destroy():n.instance.close())}function a(e,i){return t.Context.$getView(e,i)}function h(e){return t.Context.$viewHanlder.hasViewByLayer(e)}function l(e){return t.Context.$getModule(e)}function c(t,e){mvc_subjects.notice(t,e)}function u(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];mvc_subjects.notice(t,e)}function p(t,e,i){return mvc_subjects.on(t,e,i)}function d(t,e,i){return mvc_subjects.once(t,e,i)}function f(t,e,i){mvc_subjects.off(t,e,i)}function g(t){mvc_subjects.offs(t)}t.init=e,t.openView=i,t.open=n,t.destroyView=o,t.closeViewByLv=r,t.closeView=s,t.getView=a,t.hasViewByLayer=h,t.getModule=l,t.notice=c,t.send=u,t.on=p,t.once=d,t.off=f,t.offs=g}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function t(){}return t.VIEW_COMPLETE="viewComplete",t.VIEW_OPEN="viewOpen",t.VIEW_CLOSE="viewClose",t.VIEW_DESTORY="viewDestory",t.OPEN_VIEW="openView",t.CLOSE_VIEW="openView",t.DESTORY_VIEW="openView",t.BG_LAYER=1,t.SCENE_LAYER=2,t.VIEW_BG_LAYER=3,t.MAIN_LAYER=4,t.VIEW_BOTTOM_LAYER=5,t.VIEW_LAYER=6,t.VIEW_TOP_LAYER=7,t.TIP_LAYER=8,t.TOP_LAYER=9,t.LAYER_NAME_ARRAY=["bgLayer","sceneLayer","viewBgLayer","mainLayer","viewBottomLayer","viewLayer","viewTopLayer","tipLayer","topLayer"],t.VIEW_LV=-1,t.VIEW_LV_MAX=3,t.VIEW_LV_0=0,t.VIEW_LV_1=1,t.VIEW_LV_2=2,t.VIEW_LV_3=3,t}();t.MvcConst=e,__reflect(e.prototype,"mvc.MvcConst")}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function e(){}return e.init=function(t,e,i){this.moduleBeanMap=t,this.viewBeanMap=e,this.beanMap=i},e.regBean=function(t,e){this.beanMap.put(t,e)},e.reg=function(t,e,i){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var r=this.regModule(t,i,e);this.regView(e,i,t);for(var s=0;s<n.length;s++)n[s]&&this.regHelper(e,n[s]);return r},e.del=function(t){var e=this.moduleBeanMap.remove(t);if(e){if(e.viewBeans.length>0)for(var i=0;i<e.viewBeans.length;i++)this.delView(e.viewBeans[i].clazz);e.instance&&(e.instance.destroy(),e.instance=null),e.name&&this.moduleBeanMap.remove(e.name),e.id&&this.moduleBeanMap.remove(e.id)}},e.delView=function(t){var e=this.viewBeanMap.remove(t);e&&(e.name&&this.viewBeanMap.remove(e.name),e.id&&this.viewBeanMap.remove(e.id))},e.regModule=function(e,i){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!e)throw new Error("注册module的时候，构造函数不能为空");var r=this.moduleBeanMap.get(e);if(!r){var s=new t.ModuleConfig;r=new t.ModuleBean(e,s),r.dbClass=i,this.moduleBeanMap.put(e,r),t.MvcUtils.regIdName(this.moduleBeanMap,e,r,!1)}if(n&&n.length>0)for(var a=0;a<n.length;a++)this.regView(n[a],i,e);return r.config},e.regView=function(e,i,n){var o=this.viewBeanMap.get(e);if(!o){var r=new t.ViewConfig,o=new t.ViewBean(e,r);o.dbClass=i,o.viewBeanMap=this.viewBeanMap,this.viewBeanMap.put(e,o),t.MvcUtils.regIdName(this.viewBeanMap,e,o,!0)}if(n){var s=this.moduleBeanMap.get(n);s||(s=new t.ModuleBean(n,new t.ModuleConfig),this.moduleBeanMap.put(n,s)),s.viewBeans.push(o),o.moduleBean=s}return o},e.regHelper=function(e,i,n){var o=this.viewBeanMap.get(e);if(!o)throw new Error(e+"没找到对应的ViewBean对象，请先注册View对象");var r=new t.HelperBean(i,n,o);t.MvcUtils.regIdName(null,i,r,!1),o.helperBeans.push(r)},e.regModel=function(){},e}();t.MvcReg=e,__reflect(e.prototype,"mvc.MvcReg")}(mvc||(mvc={}));var mvc;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.subjects=new asf.Subjects,e}return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e}(asf.Singleton);t.MvcSession=e,__reflect(e.prototype,"mvc.MvcSession")}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function t(){}return t.regIdName=function(t,e,i,n){if(e.hasOwnProperty("NAME")){if(e.NAME=asf.StringUtils.uncapitalize(e.NAME),i.name=e.NAME,t){if(t.hasKey(i.name))throw new Error(i.name+"已经注册过，出现相同名字！"+e);t.put(i.name,i)}n&&(i.OPEN_VIEW="open"+asf.StringUtils.capitalize(e.NAME))}if(e.hasOwnProperty("ID")&&(i.id=e.ID,t)){if(t.hasKey(i.id))throw new Error(t.get(i.id).name+"已经注册过，出现相同ID！"+e+" class2:"+e);t.put(i.id,i)}},t.setIdName=function(t,e){e.name&&""!=e.name&&(t.name&&""!=t.name||(t.name=e.name)),e.id&&0!=e.id&&0==t.id&&(t.id=e.id)},t.createCore=function(t){var e=new t.clazz;return e.name&&(t.name&&""!=t.name||(t.name=e.name)),t.instance=e,e},t.getViewKey=function(t){return t.id&&0!=t.id?t.id:t.name&&""!=t.name?t.name:asf.ClassUtils.forInstance(t)},t.mvcInject=function(t,e,i){this.eachInject(t,e),i&&(this.eachInject(t,i),this.eachInject(e,i))},t.eachInject=function(t,e){t.hasOwnProperty(e.name)&&(t[e.name]=e),e.hasOwnProperty(t.name)&&(e[t.name]=t)},t.createConfig=function(e,i){var n,o=e.config;return o&&(o instanceof i?n=o:(n=new i,t.copyConfig(e,n))),n},t.copyConfig=function(t,e){var i=t.config;if(i)for(var n in i)e[n]=i[n]},t}();t.MvcUtils=e,__reflect(e.prototype,"mvc.MvcUtils")}(mvc||(mvc={}));var asf;!function(t){var e=function(){function e(e){this._actor=e,this._actionMap=new t.HashMap,this._sameIdMap=new t.Dictionary}return e.prototype.setActor=function(t){this._actor=t},e.prototype.act=function(e,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),this._thisObj=n,e.initAction(i,this._thisObj,o);var r=this._actionMap.get(e.getName());if(e.getType()==t.ActionConsts.QUEUE){var s=null;return null==r?(s=new t.QueueActionProxy,this._actionMap.put(e.getName(),s),s.addAction(e),s.start(this._actor)):(s=r,s.addAction(e)),!0}return null!=r?e.getType()==t.ActionConsts.ALONE?this.delAction(r):(this._sameIdCount++,this._sameIdMap.put(e,e.getName()+this._sameIdCount),this._actionMap.put(e.getName()+this._sameIdCount,e)):this._actionMap.put(e.getName(),e),e.start(this._actor),!0},e.prototype.delAction=function(e,i){if(void 0===i&&(i=!0),e){if(e.getType()==t.ActionConsts.QUEUE&&e instanceof t.QueueActionProxy)return void e.actAction();e.getType()==t.ActionConsts.SAME&&this._sameIdMap.hasKey(e)?this._actionMap.remove(this._sameIdMap.get(e)):this._actionMap.remove(e.getName()),i&&e.destroy()}},e}();t.ActorProxyer=e,__reflect(e.prototype,"asf.ActorProxyer")}(asf||(asf={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var mvc;!function(t){var e=function(t){function e(e,i,n){var o=t.call(this,e,i)||this;return o.viewBean=n,o}return __extends(e,t),e}(t.BasicBean);t.HelperBean=e,__reflect(e.prototype,"mvc.HelperBean")}(mvc||(mvc={}));var mvc;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.BasicConfig);t.HelperConfig=e,__reflect(e.prototype,"mvc.HelperConfig")}(mvc||(mvc={}));var mvc;!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.viewBeans=[],n}return __extends(e,t),e}(t.BasicBean);t.ModuleBean=e,__reflect(e.prototype,"mvc.ModuleBean")}(mvc||(mvc={}));var mvc;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.lazy=!1,e}return __extends(e,t),e}(t.BasicConfig);t.ModuleConfig=e,__reflect(e.prototype,"mvc.ModuleConfig")}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function t(){}return t}();t.ResBean=e,__reflect(e.prototype,"mvc.ResBean")}(mvc||(mvc={}));var mvc;!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.helperBeans=new Array,n.isOpen=!1,n.helperBeans=[],n.helperMap=new asf.Dictionary,n}return __extends(e,t),e.prototype.openView=function(t){var e=!0;if(null!=this.moduleBean){var i=this.moduleBean.instance;i.hasOwnProperty(this.name)&&(i[this.name]=this.instance),i[this.OPEN_VIEW]?e=i[this.OPEN_VIEW](this.instance):i.openView&&(e=i.openView(this.instance))}if((e||null==e)&&(this.instance.open(t),null!=this.helperBeans&&this.helperBeans.length>0))for(var n=0;n<this.helperBeans.length;n++)this.helperBeans[n].instance&&this.helperBeans[n].instance.viewOpen()},e}(t.BasicBean);t.ViewBean=e,__reflect(e.prototype,"mvc.ViewBean")}(mvc||(mvc={}));var mvc;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.auto=!0,e.open=!1,e.x=0,e.y=0,e.reset=!1,e.swap=!0,e.tab=!0,e.drag=!1,e.topView=!1,e.alone=!1,e}return __extends(e,t),e}(t.BasicConfig);t.ViewConfig=e,__reflect(e.prototype,"mvc.ViewConfig")}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function e(){this.isIniting=!1,this.isComplete=!1,this.viewCount=0}return e.prototype.initModule=function(e,i){this.callBack=i,this.moduleBean=e;var n=t.MvcUtils.createCore(e);if(t.MvcUtils.setIdName(n,e),t.Context.$moduleMgrClass&&t.Context.$moduleMgrClass.hasOwnProperty(n.name)&&(t.Context.$moduleMgrClass[n.name]=n),e.dbClass){var o=new e.dbClass;o.init&&o.init(),n.seflDB=o,e.selfDB=o;var r=e.dbClass.NAME;t.Context.$dbClass&&r&&(r=asf.StringUtils.uncapitalize(r),t.Context.$dbClass[r]=o)}try{n.init()}catch(s){console.error(e.name+"initModule报错:",s)}this.isIniting=!0,this.isComplete=!1,this.callBack&&(this.callBack.execute(e),this.callBack=null)},e.prototype.onInit=function(){for(var e,i=this.moduleBean.viewBeans,n=i.length,o=0;n>o;o++)e=i[o],e.instance||e.config.lazy||(this.viewCount++,new t.InitView(!1,e,new asf.CallBack(this.onViewComplete,this)));this.isIniting=!1,0!=this.viewCount||this.isComplete?this.callBack&&asf.Global.addRef(this):this.initComplete(this.moduleBean)},e.prototype.onViewComplete=function(t){this.viewCount--,0!=this.viewCount||this.isIniting||this.initComplete(t.moduleBean)},e.prototype.initComplete=function(t){this.isComplete||(this.isComplete=!0,this.callBack&&(this.callBack.execute(t),this.callBack=null),asf.Global.removeRef(this))},e}();t.InitModule=e,__reflect(e.prototype,"mvc.InitModule")}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function e(e,i,n,o){this.viewBean=i,this.callBack=n,this.isOpen=e,this.openParam=o,this.view=t.MvcUtils.createCore(i),this.view.openFlag=!0,this.view.once(t.MvcConst.VIEW_DESTORY,t.Context.$destroyViewEvent,t.Context),t.MvcUtils.setIdName(this.view,i),this.view.name&&""!=this.view.name&&!i.viewBeanMap.hasKey(this.view.name)&&(i.OPEN_VIEW||(i.name=this.view.name,i.OPEN_VIEW="open"+asf.StringUtils.capitalize(this.view.name)),i.viewBeanMap.put(this.view.name,i)),this.view.id||0==this.view.id||i.viewBeanMap.hasKey(this.view.id)||i.viewBeanMap.put(this.view.id,i);var r,s=i.moduleBean;if(s){var a=s.instance;a.hasOwnProperty(this.viewBean.name)&&(a[this.viewBean.name]=this.view),this.view.hasOwnProperty(s.name)&&(this.view[s.name]=a),this.view.module=a,a.$addView(this.view),r=s.selfDB}!r&&i.dbClass&&(i.selfDB?r=i.selfDB:(r=new i.dbClass,i.selfDB=r,r.init())),r&&(this.view.seflDB=r),t.MvcUtils.copyConfig(this.view,i.config),i.isLoading=!0,i.config.resList&&i.config.resList.length>0?(this.resLoader=new t.Context.$resLoaderClass,this.resLoader.loadResList(i.config.resList,this)):this.initLayoutJson()}return e.prototype.initLayoutJson=function(){this.view.initLayoutJson(asf.CallBack.create(this.hasInit,this))},e.prototype.hasInit=function(){this.view.init(),this.viewBean.config.auto?this.onViewComplete():(asf.Global.addRef(this),this.view.once(t.MvcConst.VIEW_COMPLETE,this.onViewComplete,this))},e.prototype.setResList=function(t,e){this.resLoader.destroy(),delete this.resLoader,this.initLayoutJson()},e.prototype.onViewComplete=function(){this.viewBean.isLoading=!1,asf.Global.removeRef(this);for(var e,i,n=this.viewBean.helperBeans,o=0;o<n.length;o++)e=n[o],i=e.instance,i||(i=t.MvcUtils.createCore(e),t.MvcUtils.setIdName(i,e),e.clazz.hasOwnProperty("NAME")&&this.viewBean.helperMap.put(e.clazz.NAME,i)),i.view=this.view,t.MvcUtils.eachInject(this.view,i),this.viewBean.moduleBean&&t.MvcUtils.eachInject(i,this.viewBean.moduleBean.instance);if(this.viewBean.helperMap.size()>0)for(var r=0;r<n.length;r++){i=n[r].instance;for(var s in i)this.viewBean.helperMap.hasKey(s)&&(i[s]=this.viewBean.helperMap.get(s))}for(var a=0;a<n.length;a++)n[a].instance.init();this.view.start(),(this.isOpen||this.viewBean.config.open)&&this.viewBean.instance&&this.viewBean.instance.openFlag&&this.viewBean.openView(this.openParam),this.callBack&&(this.callBack.execute(this.viewBean),delete this.callBack)},e}();t.InitView=e,__reflect(e.prototype,"mvc.InitView",["mvc.IReser"])}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function e(t,e,i){this.moduleMap=t,this.viewMap=e,this.complete=i}return e.prototype.startup=function(){this.isStartup=!0,this.moduleCount=0;for(var e,i=null,n=this.moduleMap.values(),o=new asf.Dictionary,r=0;r<n.length;r++)if(e=n[r],!e.config.lazy&&!e.instance){if(o.hasKey(e))continue;o.put(e,e),this.moduleCount++,i=new t.InitModule,i.initModule(e,new asf.CallBack(this.onInitModule,this)),asf.ObjectUtils.strNoNull(e.instance,"name")&&(this.moduleMap.hasKey(e.instance.name)||this.moduleMap.put(e.instance.name,e))}this.isStartup=!1,0==this.moduleCount&&this.startupView()},e.prototype.onInitModule=function(t){this.moduleCount--,this.isStartup||0!=this.moduleCount||this.startupView()},e.prototype.startupView=function(){this.isStartup=!0,this.moduleCount=0;for(var e,i=new asf.Dictionary,n=this.viewMap.values(),o=0;o<n.length;o++)e=n[o],e.config.lazy||e.instance||i.hasKey(e)||(i.put(e,e),this.moduleCount++,new t.InitView(!1,e,asf.CallBack.create(this.onInitView,this,!0)));this.isStartup=!1,0==this.moduleCount&&this.complete?this.finish():asf.Global.addRef(this)},e.prototype.onInitView=function(t){this.moduleCount--,this.isStartup||0!=this.moduleCount||this.finish()},e.prototype.finish=function(){this.complete.execute(),this.complete=null,asf.Global.removeRef(this)},e}();t.StartupCore=e,__reflect(e.prototype,"mvc.StartupCore")}(mvc||(mvc={}));var asf;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.actions=[],i.mType=t.ActionConsts.QUEUE,i.mName="QueueProxyAction",i}return __extends(i,e),i.prototype.destroy=function(t){if(void 0===t&&(t=null),null!=this.currAction&&(this.overAction(this.currAction),this.currAction=null),null!=this.actions&&this.actions.length>0)for(var e=0;e<this.actions.length;e++)this.overAction(this.actions[e]);this.actions=null},i.prototype.onStart=function(){this.actAction()},i.prototype.overAction=function(t){t&&t.destroy()},i.prototype.addAction=function(t){this.actions.push(t)},i.prototype.actAction=function(){0==this.actions.length&&this.destroy(),this.currAction=this.actions.shift(),this.currAction?this.currAction.start(this.mActor):this.actAction()},i}(t.BasicAction);t.QueueActionProxy=e,__reflect(e.prototype,"asf.QueueActionProxy")}(asf||(asf={}));var asf;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.timerId=-1,t}return __extends(i,e),i.prototype.start=function(i){e.prototype.start.call(this,i),this.timerId=t.App.timer.doFrameLoop(1,this.tick,this,null,this.timerId)},i.prototype.destroy=function(i){void 0===i&&(i=null),t.App.timer.clearTimer(this.timerId),this.isDestory||e.prototype.destroy.call(this,i)},i.prototype.tick=function(){return!1},i}(t.BasicAction);t.TickAction=e,__reflect(e.prototype,"asf.TickAction")}(asf||(asf={}));var asf;!function(t){var e=function(e){function i(i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o="5");var r=e.call(this,i,n,o)||this;return r._bmh=!0,r._binaryHeap=new t.BinaryHeap("_F"),r}return __extends(i,e),i.prototype.setBMH=function(t){this._bmh=t},i.prototype.getBMH=function(){return this._bmh},i.prototype.findPath=function(e,i){var n=egret.Point.create(e.x,e.y);if(!this._ddArray[n.x])return[];if(null==this._moveJudgeFun)throw new Error("Min:未设置移动判断函数");if(!this._moveJudgeFun(this._ddArray[n.x][n.y])){var o=1;t:for(;;){for(var r=-1;1>=r;r++)for(var s=-1;1>=s;s++)if(0!=r&&0!=s){if(!this._ddArray[n.x+r*o])break t;if(this._moveJudgeFun(this._ddArray[n.x+r*o][n.y+s*o])){n.x=n.x+r*o,n.y=n.y+s*o;break t}}o++}}if(!this._ddArray[i.x])return[];if(!this._moveJudgeFun(this._ddArray[i.x][i.y]))for(;!this._moveJudgeFun(this._ddArray[i.x][i.y]);)if(i.x>n.x?i.x--:i.x<n.x&&i.x++,i.y>n.y?i.y--:i.y<n.y&&i.y++,i.x==n.x&&n.y==i.y)return[];this.resetParameters(n,i);for(;;){if(this._bmh?this.testPoint(this._binaryHeap.getTop()):(t.SortUtil.sortBy2(this._waitList,"_F",!1,!1),this.testPoint(this._waitList[0])),this._finded)return this.findComplete(),this._targetPoint.getWay().reverse();if(this._bmh){if(null==this._binaryHeap.getTop())break}else if(0==this._waitList.length)break}return this.findComplete(),[]},i.prototype.resetParameters=function(t,i){e.prototype.resetParameters.call(this,t,i),this._bmh?(this._binaryHeap.clear(),this._binaryHeap.addToBMH(this._startPoint)):this._waitList=[this._startPoint]},i.prototype.testPoint=function(t){this._bmh?this._binaryHeap.removeFromBMHByIndex(0):this._waitList.splice(0,1),t._wait=!1,t._moved=!0,this._finishList.push(t),e.prototype.testPoint.call(this,t)},i.prototype.testAroundPoint=function(t,e,i){var n=t.x+e,o=t.y+i;if(n<this._mapRectangle.x||n>this._mapRectangle.x+this._mapRectangle.width-1||o<this._mapRectangle.y||o>this._mapRectangle.y+this._mapRectangle.height-1)return!1;var r=this._pointsArr2D[n][o],s=0!=e&&0!=i?14:10;if(!r._moved){if(r._wait)return r._G>t._G+s&&(r._parentPoint=t,r._G=t._G+s,r._F=r._G+10*(Math.abs(this._targetPoint.x-r.x)+Math.abs(this._targetPoint.y-r.y)),this._bmh&&this._binaryHeap.changeFromBMH(r)),!0;if(this._moveJudgeFun(this._ddArray[r.x][r.y]))return r._parentPoint=t,r._G=t._G+s,r._F=r._G+10*(Math.abs(this._targetPoint.x-r.x)+Math.abs(this._targetPoint.y-r.y)),r==this._targetPoint?this._finded=!0:(r._wait=!0,this._bmh?this._binaryHeap.addToBMH(r):this._waitList.push(r)),!0}return!1},i.prototype.findComplete=function(){for(var t=this._bmh?this._binaryHeap.getArr():this._waitList,i=(t.length,0);i<t.length;i++)t[i]._wait=!1;e.prototype.findComplete.call(this)},i}(t.Path);t.AStar=e,__reflect(e.prototype,"asf.AStar")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(t){this.url=t}return t.prototype.addParam=function(t,e){this.keys.push(t),this.values.push(e)},t.prototype.toURL=function(){for(var t=this.url+"?",e=this.keys.length,i=0;e>i;i++)0==i&&(t+="&"),t+=this.keys[i]+"="+this.values[i];return t},t}();t.URLParameter=e,__reflect(e.prototype,"asf.URLParameter")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(t,e){void 0===e&&(e=300),this.objectFactory=t,this.maxIdle=e,this.list=[]}return t.prototype.create=function(){var t=null;return t=0==this.list.length?this.objectFactory.create():this.list.shift(),this.objectFactory.activate(t),t},t.prototype.release=function(t){this.list.length<this.maxIdle&&(this.objectFactory.passivate(t),this.list.push(t))},t.prototype.getNumIdle=function(){return this.list.length},t.prototype.clear=function(){},t.prototype.destroy=function(t){void 0===t&&(t=null)},t.prototype.isFull=function(){return!1},t}();t.FactoryObjectPool=e,__reflect(e.prototype,"asf.FactoryObjectPool",["asf.IPool","asf.IDestory"])}(asf||(asf={}));var asf;!function(t){var e=function(){function e(t,e,i){void 0===e&&(e=100),void 0===i&&(i=!1),this.$clazz=t,this.$maxIdle=e,this.$hasStatus=i,this.$idles=[]}return e.prototype.create=function(){var t;return t=0==this.$idles.length?new this.$clazz:this.$idles.pop(),this.$hasStatus&&t.hasOwnProperty("activate")&&t.activate(),t},e.prototype.release=function(e){this.$idles.length>this.$maxIdle?t.DestroyUtils.destroy(e):(this.$hasStatus&&e.hasOwnProperty("passivate")&&e.passivate(),this.$idles.push(e))},e.prototype.getNumIdle=function(){return this.$idles.length},e.prototype.clear=function(){this.$idles=[]},e.prototype.isFull=function(){return this.$idles.length>this.$maxIdle?!0:!1},e.prototype.destroy=function(e){void 0===e&&(e=null);
for(var i=0;i<this.$idles.length;i++)t.DestroyUtils.destroy(this.$idles[i]);this.$idles=null},e}();t.Pool=e,__reflect(e.prototype,"asf.Pool",["asf.IPool","asf.IDestory"])}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){this.isFocus=!0,this.funs=[],this.thisObjs=[],this.fps=16,t.curTime=egret.getTimer(),egret.startTick(this.tickframe,this)}return t.prototype.tickframe=function(e){e-t.curTime;return t.curTime=e,t.curFrame++,this.onEnterFrame(e),!1},t.prototype.onEnterFrame=function(t){for(var e=this.funs.length,i=0;e>i;i++)this.funs[i]&&this.funs[i].call(this.thisObjs[i],[t])},t.prototype.lifecycle=function(){this.isFocus=!1;var t=this;egret.stopTick(this.tickframe,this),window.clearInterval(this.timer),this.timer=window.setInterval(function(){t.tickframe(egret.getTimer()),egret.ticker.update()},this.fps)},t.prototype.lifecycleResume=function(){this.isFocus=!0,window.clearInterval(this.timer),egret.startTick(this.tickframe,this)},t.prototype.push=function(t,e){this.funs.push(t),this.thisObjs.push(e)},t.prototype.remove=function(t,e){var i=this.funs.indexOf(t);-1!=i&&this.funs.splice(i,1),i=this.thisObjs.indexOf(e),-1!=i&&this.thisObjs.splice(i,1)},t.prototype.clear=function(){for(var e=this.funs.length,i=0;e>i;i++)this.funs[i].call(this.thisObjs[i],[t.curTime]);this.funs=[],this.thisObjs=[]},t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.curFrame=0,t.curTime=0,t}();t.IntervalMgr=e,__reflect(e.prototype,"asf.IntervalMgr")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){this.shape=new egret.Shape,this.pool=[],this.timerArr=[],this.keyArr=[],this.count=0,this.maxIndex=0,this.index=0,t.IntervalMgr.getInstance().push(this.onEnterFrame,this),this.currTimer=egret.getTimer()}return e.prototype.onEnterFrame=function(t){this.currTimer=egret.getTimer();for(var e,i=this.timerArr.length,n=0,o=i,r=this,s=r.timerArr,a=r.currTimer,h=n;o>h;h++)if(e=s[h],e&&!e.isPause&&a>=e.exeTime){var l=e.method,c=e.args;e.exeTime+=e.delay,l.apply(e.thisObj,c)}},e.prototype.create=function(e,i,n,o,r){if(void 0===o&&(o=null),void 0===r&&(r=void 0),r&&this.clearTimer(r),1>e)return i.apply(n,o),-1;var s=this.pool.length>0?this.pool.shift():new t.TimerHandler;return s.userFrame=!1,s.repeat=!0,s.delay=e,s.method=i,s.thisObj=n,s.args=o,s.exeTime=e+this.currTimer,this.addHandler(s)},e.prototype.doLoop=function(t,e,i,n,o){return void 0===n&&(n=null),void 0===o&&(o=void 0),this.create(t,e,i,n,o)},e.prototype.addHandler=function(t){this.count++;var e=this.maxIndex++;return t.key=e,this.timerArr.push(t),this.keyArr.push(e),e},e.prototype.clearTimer=function(t){var e=this.keyArr.indexOf(t);-1!=e&&(this.count--,this.keyArr.splice(e,1),this.timerArr.splice(e,1))},e}();t.Tick=e,__reflect(e.prototype,"asf.Tick")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){this._isNext=!1,this._methods=new t.Dictionary}return e.prototype.invalidate=function(){egret.callLater(this.renderAll,this)},e.prototype.renderAll=function(){for(var t,e=this._methods.keys(),i=0,n=e;i<n.length;i++){t=n[i];var o=this._methods.get(t);if(o)for(var r,s=o.keys(),a=0,h=s;a<h.length;a++)r=h[a],this.exeCallLater(t,r)}for(var l=0,c=e;l<c.length;l++)return t=c[l],this.renderAll()},e.prototype.callLater=function(e,i,n){void 0===n&&(n=null);var o=this._methods.get(e);null==o&&(o=new t.Dictionary,this._methods.put(e,o)),o.hasKey(i)||(i||console.log("disW:"+t.App.stage.stageWidth),o.put(i,n||[]),this.invalidate())},e.prototype.exeCallLater=function(t,e){var i=this._methods.get(t);if(i){var n=i.get(e);i.remove(e),0==i.size()&&this._methods.remove(t),t.apply(e,n)}else this._methods.remove(t)},e.prototype.removeLater=function(t,e){var i=this._methods.get(t);i&&(i.remove(e),0==i.size()&&this._methods.remove(t))},e}();t.RenderManager=e,__reflect(e.prototype,"asf.RenderManager")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){this._pool=[],this._count=0,this._maxIndex=0,this._waitDelHandlerArr=[],this._keyMap=new t.HashMap,this.start()}return e.prototype.start=function(){t.IntervalMgr.getInstance().push(this.onEnterFrame,this),this._initial=!0},e.prototype.stop=function(){t.IntervalMgr.getInstance().remove(this.onEnterFrame,this),console.log("请不要随意停止timer")},e.prototype.clear=function(){this._initial=!1,t.IntervalMgr.getInstance().clear(),this.toClearTimer(),this._keyMap.clear(),this._count=0},e.prototype.onEnterFrame=function(e){this.lifecycleTime=0;var i,n=this,o=this._keyMap.getContainer();for(var r in o)if(i=o[r],i&&!i.isPause&&!i.isDel){var s=i.userFrame?t.IntervalMgr.curFrame:e;if(s>=i.exeTime){var a=i.method,h=i.args;if(i.repeat)for(var l=!0;s>=i.exeTime&&i.repeat;)i.exeTime+=i.delay,(i.isFillFrame||l)&&a.apply(i.thisObj,h),l=!1;else n.clearTimer(i.key),a.apply(i.thisObj,h)}}this.toClearTimer()},e.prototype.create=function(e,n,o,r,s,a,h){if(void 0===a&&(a=null),void 0===h&&(h=!1),1>o)return r.apply(s,a),0;var l=this._pool.length>0?this._pool.shift():new i;l.userFrame=e,l.repeat=n,l.delay=o,l.method=r,l.thisObj=s,l.args=a,l.isFillFrame=h,l.exeTime=o+(e?t.IntervalMgr.curFrame:t.IntervalMgr.curTime);var c=this.addHandler(l);return l.key=c,c},e.prototype.addHandler=function(t){if(this._initial){this._count++;var e=++this._maxIndex;return this._keyMap.put(e,t),e}},e.prototype.doOnce=function(t,e,i,n,o){return void 0===o&&(o=null),n&&this.clearTimer(n),this.create(!1,!1,t,e,i,o)},e.prototype.doLoop=function(t,e,i,n,o,r){return void 0===o&&(o=null),void 0===r&&(r=!1),n&&this.clearTimer(n),this.create(!1,!0,t,e,i,o,r)},e.prototype.doFrameOnce=function(t,e,i,n,o){return void 0===o&&(o=null),n&&this.clearTimer(n),this.create(!0,!1,t,e,i,o)},e.prototype.doFrameLoop=function(t,e,i,n,o,r){return void 0===o&&(o=null),void 0===r&&(r=!1),n&&this.clearTimer(n),this.create(!0,!0,t,e,i,o,r)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.clearTimer=function(t){var e=this.getHandler(t);e&&!e.isDel&&(e.isDel=!0,this._waitDelHandlerArr.push(e))},e.prototype.toClearTimer=function(){for(var t,e=this._waitDelHandlerArr.length,i=0;e>i;i++)t=this._waitDelHandlerArr[i],this._keyMap.remove(t.key),t.clear(),this._pool.push(t),this._count--;this._waitDelHandlerArr.length=0},e.prototype.getHandler=function(t){var e=this._keyMap.get(t);return e},e.prototype.pauseTimer=function(t){var e=this._keyMap.get(t);e.isPause=!0},e.prototype.resumeTimer=function(t){var e=this._keyMap.get(t);e.isPause=!1},e}();t.TimeMgr=e,__reflect(e.prototype,"asf.TimeMgr");var i=function(){function t(){this.key=-1,this.isFillFrame=!1,this.isDel=!1}return t.prototype.clear=function(){this.key=-1,this.method=null,this.thisObj=null,this.args=null,this.isPause=!1,this.isDel=!1},t}();t.TimerVo=i,__reflect(i.prototype,"asf.TimerVo")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){this._shape=new egret.Shape,this._pool=[],this._currFrame=0,this._count=0,this._maxIndex=0,this._isForEachLoop=!1,this._keyMap=new t.Dictionary,egret.startTick(this.onEnterFrame,this),this._currTimer=egret.getTimer()}return e.prototype.start=function(){egret.startTick(this.onEnterFrame,this)},e.prototype.stop=function(){egret.stopTick(this.onEnterFrame,this),console.log("请不要随意停止timer")},e.prototype.onEnterFrame=function(t){this.lifecycleTime=0,this._currFrame++,this._currTimer=egret.getTimer();for(var e,i=this._keyMap.values(!1),n=i.length,o=this,r=0;n>r;r++)if(e=i[r],e&&!e.isPause){var s=e.userFrame?o._currFrame:o._currTimer;if(s>=e.exeTime){var a=e.method,h=e.args;if(e.repeat)for(var l=!0;s>=e.exeTime&&e.repeat;)e.exeTime+=e.delay,(e.isFillFrame||l)&&(a.apply(e.thisObj,h),l||console.info("补帧了")),l=!1;else o.clearTimer(e.key),a.apply(e.thisObj,h)}}return!1},e.prototype.updateTimerHandler=function(t){this._isForEachLoop=!0;var e=this._keyMap.get(t);if(!e.isPause){var i=e.userFrame?this._currFrame:this._currTimer;if(i>=e.exeTime){var n=e.method,o=e.args;if(e.repeat)for(var r=!0;i>=e.exeTime&&this._keyMap.hasKey(t)&&e.repeat;){e.exeTime+=e.delay;try{(e.isFillFrame||r)&&(n.apply(e.thisObj,o),r||console.log("补帧了"))}catch(s){console.error(s),alert(s.message+"\n"+s.stack),this.clearTimer(t)}r=!1}else{this.clearTimer(t);try{n.apply(e.thisObj,o)}catch(s){console.error(s),alert(s.message+"\n"+s.stack)}}}this._isForEachLoop=!1}},e.prototype.create=function(t,e,n,o,r,s,a,h){if(void 0===s&&(s=null),void 0===a&&(a=-1),void 0===h&&(h=!1),-1!=a&&this.clearTimer(a),1>n)return o.apply(r,s),-1;var l=this._pool.length>0?this._pool.shift():new i;l.userFrame=t,l.repeat=e,l.delay=n,l.method=o,l.thisObj=r,l.args=s,l.isFillFrame=h,l.exeTime=n+(t?this._currFrame:this._currTimer);var c=this.addHandler(l);return l.key=c,c},e.prototype.addHandler=function(t){this._count++;var e=this._maxIndex++;return this._keyMap.put(e,t),e},e.prototype.doOnce=function(t,e,i,n,o){return void 0===n&&(n=null),void 0===o&&(o=-1),this.create(!1,!1,t,e,i,n,o)},e.prototype.doLoop=function(t,e,i,n,o,r){return void 0===n&&(n=null),void 0===o&&(o=-1),void 0===r&&(r=!1),this.create(!1,!0,t,e,i,n,o,r)},e.prototype.doFrameOnce=function(t,e,i,n,o){return void 0===n&&(n=null),void 0===o&&(o=-1),this.create(!0,!1,t,e,i,n,o)},e.prototype.doFrameLoop=function(t,e,i,n,o,r){return void 0===n&&(n=null),void 0===o&&(o=-1),void 0===r&&(r=!1),this.create(!0,!0,t,e,i,n,o,r)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.clearTimer=function(t){var e=this.getHandler(t);null!=e&&(this._keyMap.remove(e.key),e.clear(),this._pool.push(e),this._count--)},e.prototype.toClearTimer=function(t,e){},e.prototype.getHandler=function(t){var e=this._keyMap.get(t);return e},e.prototype.pauseTimer=function(t){var e=this.getHandler(t);e.isPause=!0},e.prototype.resumeTimer=function(t){var e=this.getHandler(t);e.isPause=!1},e}();t.TimerManager=e,__reflect(e.prototype,"asf.TimerManager");var i=function(){function t(){this.isFillFrame=!1}return t.prototype.clear=function(){this.method=null,this.args=null,this.isPause=!1},t}();t.TimerHandler=i,__reflect(i.prototype,"asf.TimerHandler")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.removeItem=function(t,e){for(var i=t.length;i>0;)if(i--,t[i]===e)return void t.splice(i,1);console.log("removeItem")},t.randomAry=function(t){for(var e,i,n,o=t.slice(),r=o.length;r;)i=r-1,n=Math.floor(Math.random()*r),r--,i!=n&&(e=o[i],o[i]=o[n],o[n]=e);return o},t.copyDict=function(e,i){if(!e)return e;var n=e instanceof Array?[]:{};for(var o in e)"function"!=typeof e[o]&&(i?n[o]="object"==typeof e[o]?t.copyDict(e[o]):e[o]:n[o]=e[o]);return n},t}();t.ArrayUtils=e,__reflect(e.prototype,"asf.ArrayUtils")}(asf||(asf={}));var asf;!function(asf){var ClassUtils=function(){function ClassUtils(){}return ClassUtils.getClassName=function(t,e){void 0===e&&(e=!1);var i=t.prototype.constructor.name;return e?asf.StringUtils.uncapitalize(i):i},ClassUtils.forInstance=function(t){return t[this.CONSTRUCTOR_NAME]?null:t[this.CONSTRUCTOR_NAME]},ClassUtils.forName=function(name){return eval(name)},ClassUtils.newInstance=function(t,e){void 0===e&&(e=null);var i,n=null==e?[]:e;switch(n.length){case 1:i=new t(n[0]);break;case 2:i=new t(n[0],n[1]);break;case 3:i=new t(n[0],n[1],n[2]);break;case 4:i=new t(n[0],n[1],n[2],n[3]);break;case 5:i=new t(n[0],n[1],n[2],n[3],n[4]);break;case 6:i=new t(n[0],n[1],n[2],n[3],n[4],n[5]);break;case 7:i=new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);break;case 8:i=new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);break;case 9:i=new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]);break;case 10:i=new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);break;default:i=new t}return i},ClassUtils.CONSTRUCTOR_NAME="constructor",ClassUtils}();asf.ClassUtils=ClassUtils,__reflect(ClassUtils.prototype,"asf.ClassUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.getColor=function(t,e,i,n){return void 0===n&&(n=255),n<<24|t<<16|e<<8|i},t.getARGB=function(t){var e={};return e.a=t>>24&255,e.r=t>>16&255,e.g=t>>8&255,e.b=255&t,e},t.getRGB=function(t){var e={};return e.r=t>>16&255,e.g=t>>8&255,e.b=255&t,e},t.getHexStringFromARGB=function(t,e,i,n){var o=t.toString(16),r=e.toString(16),s=i.toString(16),a=n.toString(16);return o=1==o.length?"0"+o:o,r=1==r.length?"0"+r:r,s=1==s.length?"0"+s:s,a=1==a.length?"0"+a:a,(o+r+s+a).toUpperCase()},t.getHexStringFromRGB=function(t,e,i){var n=t.toString(16),o=e.toString(16),r=i.toString(16);return n=1==n.length?"0"+n:n,o=1==o.length?"0"+o:o,r=1==r.length?"0"+r:r,(n+o+r).toUpperCase()},t.retrieveRGB=function(t){var e=t>>16,i=t>>8&255,n=255&t;return[e,i,n]},t.generateFromRGB=function(t){return null==t||3!=t.length||t[0]<0||t[0]>255||t[1]<0||t[1]>255||t[2]<0||t[2]>255?16777215:t[0]<<16|t[1]<<8|t[2]},t.generateTransitionalColor=function(t,e,i){if(3>i)return[];var n=this.retrieveRGB(t),o=this.retrieveRGB(e),r=[];r.push(t),i-=2;for(var s=o[0]-n[0],a=o[1]-n[1],h=o[2]-n[2],l=1;i-1>l;l++){var c=[n[0]+s*l/i,n[1]+a*l/i,n[2]+h*l/i];r.push(this.generateFromRGB(c))}return r.push(e),r},t}();t.ColorUtil=e,__reflect(e.prototype,"asf.ColorUtil")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t}();t.DateUtils=e,__reflect(e.prototype,"asf.DateUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.destroy=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.destroy(t[e]);else for(var e=0;e<this.keyNames.length;e++)if(t[this.keyNames[e]])return void t[this.keyNames[e]]()},t.keyNames=["destroy","dispose"],t}();t.DestroyUtils=e,__reflect(e.prototype,"asf.DestroyUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.execute=function(t,e,i){void 0===i&&(i=null),null!=t&&(null==i?t.call(e):t.call(e,i))},t.executeAry=function(t,e,i){return void 0===i&&(i=null),null!=t?null==i?void t.call(e):void t.apply(e,i):void 0},t}();t.FuncUtils=e,__reflect(e.prototype,"asf.FuncUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.addJS=function(t,e){var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.text=t,e||(e=document.body),e.appendChild(i),e.removeChild(i)},t}();t.JSUtils=e,__reflect(e.prototype,"asf.JSUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){}return e.getRadian=function(t,e,i,n){var o=egret.Point.create(t,e),r=egret.Point.create(i,n),s=r.subtract(o),a=Math.atan2(s.y,s.x);return a=-a},e.isInteger=function(t){return t%1===0},e.oneTwo=function(){return t.RandomUtils.random(0,1)>.5?!0:!1},e.toFixed=function(t,e){if(void 0===e&&(e=0),"string"==typeof t){if("NaN"==t)throw Error("该字符串不能正确转换成数值类型");t=Number(t)}return Number(t.toFixed(e))},e.toFixedNo=function(t,e){void 0===e&&(e=0);var i=t+"",n=i.indexOf(".");return-1==n?Number(i):(i=i.substr(0,n+e),Number(i))},e.rotatePos=function(e,i,n,o,r){var s=t.Point.create(e,i);return r?(s.x=e*o+i*n,s.y=i*o-e*n):(s.x=e*o-i*n,s.y=i*o+e*n),s},e.distance=function(e,i,n,o){return t.Point.distance(t.Point.create(e,i),t.Point.create(n,o))},e.radian=function(t,e,i,n){var o=t-i,r=e-n;return Math.atan2(r,o)},e.aToR=function(e){return e*t.MathUtils.PI_divideBy180},e.rToA=function(e){return e*t.MathUtils.PI_divide180},e.angle=function(t,e,i,n){return this.rToA(this.radian(t,e,i,n))},e.plusAngle=function(t){return t+=360,t%=360},e.halfAngle=function(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t},e.precision=function(t,e){return void 0===e&&(e=10),isNaN(t)?0:Number(t.toFixed(e))},e.isInCircle=function(t,e,i,n,o){return this.distance(t,e,i,n)<=o},e.isInRect=function(t,e,i,n,o,r){var s=Math.abs(t-i),a=Math.abs(e-n);return o/2>=s&&r/2>=a},e.momentumConservation=function(t,e,i,n){var o=t-e;return t=((i-n)*t+2*n*e)/(i+n),e=o+t,[t,e]},e.random=function(t,e,i){void 0===i&&(i=1);(e-t+i)/i*Math.random()*i;return(e-t+i)/i*Math.random()*i+t},e.rangedArray=function(t,e,i,n,o){void 0===i&&(i=1),void 0===n&&(n=!1),void 0===o&&(o=!1);var r=0,s=0,a=[],h=!1;for(t>e&&(s=e,e=t,t=s,h=!0),r=t+(n?0:i);e-(o?0:i)>=r;)a.push(r),r+=i;return h&&a.reverse(),a},e.convertVectorToRadians=function(t){return this.correctRadians(Math.atan2(t.y,t.x))},e.lengthBetweenPoints=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.correctRadians=function(t){return 0>t?t+=2*Math.PI:t>=2*Math.PI&&(t-=2*Math.PI),t},e.numberAsHexString=function(t,e){void 0===e&&(e=1);for(var i=0,n="";t>0||e>0;){switch(e-=1,i=15&t){case 10:n="A"+n;break;case 11:n="B"+n;break;case 12:n="C"+n;break;case 13:n="D"+n;break;case 14:n="E"+n;break;case 15:n="F"+n;break;default:n=i.toString()+n}t>>>=4}return n},e.PI_divideBy180=Math.PI/180,e.PI_divide180=180/Math.PI,e}();t.MathUtils=e,__reflect(e.prototype,"asf.MathUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),n=i+1,o=t.sinInt(i);if(i==e)return o;var r=t.sinInt(n);return(e-i)*r+(n-e)*o},t.sinInt=function(t){return t%=360,0>t&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),n=i+1,o=t.cosInt(i);if(i==e)return o;var r=t.cosInt(n);return(e-i)*r+(n-e)*o},t.cosInt=function(t){return t%=360,0>t&&(t+=360),egret_cos_map[t]},t}();t.NumberUtils=e,__reflect(e.prototype,"asf.NumberUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.hasProperty=function(t,e){return t.hasOwnProperty(e)?!0:void 0==t[e]?!1:!0},t.strNoNull=function(t,e){return void 0==t[e]?!1:null==t[e]?!1:""==t[e]?!1:!0},t.copyObject=function(t,e){e||(e={});for(var i in t)e[i]=t[i];return e},t}();t.ObjectUtils=e,__reflect(e.prototype,"asf.ObjectUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.random=function(t,e){return this.randomInt(t,e,1)},t.randomInt=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=1),t>e){var n=t;t=e,e=n}var o=e-t+1*i,r=Math.random()*o;return r+=t,Math.floor(r/i)*i},t.randomBoolean=function(){return 1==this.randomInt(1,2)},t.randomWave=function(){return this.randomBoolean()?1:-1},t.isRateSucced=function(t){if(0>=t)return!1;if(t>=100)return!0;t/=100;var e=[];return e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),t>=e[this.randomInt(0,2)]?!0:!1},t.isRateSuccedInt=function(t){if(0>=t)return!1;var e=[];return e[0]=this.randomInt(1,100),e[1]=this.randomInt(1,100),e[2]=this.randomInt(1,100),t>=e[this.randomInt(0,2)]?!0:!1},t.isRandTrue=function(t){var e=this.randomInt(0,1e4);return t>e},t}();t.RandomUtils=e,__reflect(e.prototype,"asf.RandomUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function e(){}return e.init=function(){this.shakeMap=new t.Dictionary},e.shake=function(i,n,o,r,s){if(void 0===n&&(n=2),void 0===o&&(o=4),void 0===r&&(r=32),void 0===s&&(s=3),!e.shakeMap.hasKey(i)){var a=new egret.Point(i.x,i.y),h=[0,0],l=0;this.timerId=t.App.timer.doLoop(r,function(){h[l%2]=l++%4<2?0:o,l>4*n+1&&(t.App.timer.clearTimer(this.timerId),l=0,e.shakeMap.remove(i)),1==s?i.y=h[1]+a.y:2==s?i.x=h[0]+a.x:(i.y=h[1]+a.y,i.x=h[0]+a.x)},this,null,this.timerId),e.shakeMap.put(i,{point:a,id:this.timerId})}},e.stopShake=function(i){var n=e.shakeMap.get(i);n&&(t.App.timer.clearTimer(n.id),i.x=n.point.x,i.y=n.point.y,e.shakeMap.remove(i))},e.timerId=-1,e}();t.ShakeUtil=e,__reflect(e.prototype,"asf.ShakeUtil")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.sortBy=function(t,e,i){function n(t,i){return i>t?e?-1:1:t==i?0:e?1:-1}void 0===e&&(e=!1),void 0===i&&(i=!0);var o=i?t.concat():t;return o.sort(n),o},t.sortBy2=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0),this._p=e,this._re=i;var o=n?t.concat():t;return o.sort(this.sortFun),o},t.sortFun=function(e,i){return e[t._p]<i[t._p]?t._re?-1:1:e[t._p]==i[t._p]?0:t._re?1:-1},t.sortBy3=function(t,e,i,n){function o(t,n){for(var o=0;;){if(t[e[o]]<n[e[o]])return i?1:-1;if(t[e[o]]>n[e[o]])return i?-1:1;if(t[e[o]]==n[e[o]]&&(o++,o>=e.length))break}return 0}void 0===i&&(i=!1),void 0===n&&(n=!0);var r=n?t.concat():t;return r.sort(o),r},t.sortBy4=function(t,e,i,n){function o(t,n){for(var o,r=t,s=n,a=!1,h=0;h<e.length;h++){for(t=r,n=s,a=i[h],o=0;o<e[h].length;o++)t=t[e[h][o]];for(o=0;o<e[h].length;o++)n=n[e[h][o]]}return n>t?a?-1:1:t==n?0:a?1:-1}void 0===n&&(n=!0);var r=n?t.concat():t;return r&&0!=r.length?(r.sort(o),r):[]},t.sortBy5=function(t,e,i,n){function o(t,n){for(var o=0;;){var r=i[o];if(t[e[o]]<n[e[o]])return r?1:-1;if(t[e[o]]>n[e[o]])return r?-1:1;if(t[e[o]]==n[e[o]]&&(o++,o>=e.length))break}return 0}void 0===i&&(i=[]),void 0===n&&(n=!0);var r=n?t.concat():t;return r.sort(o),r},t}();t.SortUtil=e,__reflect(e.prototype,"asf.SortUtil")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.hasValue=function(t){return t&&""!=t?!0:!1},t.formate=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0;n<e.length;n++)t=t.replace(new RegExp("\\{"+n+"\\}","gm"),e[n]);return t},t.formateArys=function(t,e){for(var i=0;i<e.length;i++)t=this.formateOne(i,t,e[i]);return t},t.formateOne=function(t,e,i){return e.replace(new RegExp("\\{"+t+"\\}","gm"),i)},t.chomp=function(t){return this.chompString(t,"(\r\n|\r|\n)")},t.chompString=function(t,e){return this.isEmpty(t)||null==e?t:t.replace(new RegExp(e+"$",""),"")},t.trim=function(t){return null==t?null:t.replace(/^\s*/,"").replace(/\s*$/,"")},t.deleteWhitespace=function(t){return this.deleteFromString(t,/\s/g)},t.deleteFromString=function(t,e){return this.isEmpty(t)?t:t.replace(e,"")},t.replace=function(t,e,i){return null==t||this.isEmpty(e)||null==i?t:t.replace(new RegExp(e,"g"),i)},t.defaultIfEmpty=function(t,e){return this.isEmpty(t)?e:t},t.isEmpty=function(t){return t?0==t.length:!0},t.capitalize=function(t){return this.isEmpty(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},t.uncapitalize=function(t){return this.isEmpty(t)?t:t.charAt(0).toLowerCase()+t.substring(1)},t.replaceStrColorAndStr=function(e,i,n,o){return void 0===n&&(n="&"),void 0===o&&(o=null),t.replaceString(t.replaceStrColor(e,o),i,n)},t.replaceString=function(t,e,i){void 0===i&&(i="&");for(var n=t.split(i),o="",r=0;r<n.length;r++)o+=e&&null!=e[r]?n[r]+e[r]:n[r];return o},t.replaceStrColor=function(e,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1);var r=e.match(/#[0-9,a-f,A-F]{6}/g),s=[],a="";n&&(a="'size='"+n);var h;if(r)for(var l=0,c=r;l<c.length;l++)h=c[l],s[h]||(s[h]=!0,e=t.replaceGanN(e),e=o?e.split(h).join("</b></font><font color='"+h+a+"'><b>"):e.split(h).join("</font><font color='"+h+a+"'>"));return e=e.split("#normal").join("</font><font color='#6992CD'>"),e=e.split("#yellow").join("</font><font color='#F9E167'>"),e=e.split("#white").join("</font><font color='#FFFFFF'>"),e=e.split("#green").join("</font><font color='#00CB2B'>"),e=e.split("#black").join("</font><font color='#000000'>"),e=e.split("#blue").join("</font><font color='#6992CD'>"),e=e.split("#purple").join("</font><font color='#C91CCD'>"),e=e.split("#red").join("</font><font color='#E10000'>"),e=e.split("#orange").join("</font><font color='#C46A00'>"),e=e.replace(/\[#\]/g,"</font><font color='"+i+a+"'>"),o?null==i?"<font><b>"+e+"<b></font>":"<font color='"+i+a+"'><b>"+e+"<b></font>":null==i?e:"<font color='"+i+a+"'>"+e+"</font>"},t.replaceGanN=function(t){var e=t.replace(/\\n/g,"\n");return e},t.getColorHtmlString=function(t,e){return"<font color='#"+e+"'>"+t+"</font>"},t.getColorHtmlString2=function(t,e){return"<font color='"+e+"'>"+t+"</font>"},t.getLinkHtmlString=function(t,e,i){void 0===i&&(i=!0);var n=i?"<u>":"",o=i?"</u>":"";return"<a href='event:"+e+"'>"+n+t+o+"</a>"},t.numberToShortString=function(t,e){void 0===e&&(e=!0);var i,n,o=String(t),r=o.indexOf("."),s="",a="";return-1!=r?(i=o.slice(0,r).length,n=o.slice(r).length,i>8?(s=o.slice(-8-n,-6-n),a="亿",o=o.slice(0,-8-n)):i>4&&(a="万",o=o.slice(0,-4-n))):(i=o.length,i>8?(s=o.slice(-8,-6),a="亿",o=o.slice(0,-8)):i>4&&(a="万",o=o.slice(0,-4))),s.length>0&&(e||(s="00"),s="00"==s?"":"."+s),o+s+a},t.numToChn=function(t){if(0==t)return"零";for(var e={0:"零",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"},i={1:"十",2:"百",3:"千",4:"万"},n="",o=t.toString(),r=o.length,s=o.length,a=!1,h=0;s>h;h++){r--;var l=o.charAt(h);("0"!=l||t%Math.pow(10,r+1)!=0)&&("0"==l&&a||("0"==l&&(a=!0),n+=e[l],("0"!=l||1!=r)&&("0"!=l||2!=r)&&i[r]&&(n+=i[r])))}return t>=10&&20>t&&(n=n.slice(1)),n},t}();t.StringUtils=e,__reflect(e.prototype,"asf.StringUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.getServerTime=function(t){return Math.floor(this.getServerTimeMill(t)/1e3)},t.getServerTimeMill=function(t){return this.ServerTime+(t-this.ServerTimeStamp)},t.getServerTimeYmd=function(e){return Number(t.dateFormat("yyyyMMdd",this.getServerTime(e)))},t.getServerTimeYmd2=function(t){return this.dateFormat("yyyyMMdd-hh:mm:ss",this.getServerTime(t))},t.dateFormat=function(t,e){var i=new Date(1e3*e),n={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},t.diffTimeFormat=function(e,i,n){void 0===n&&(n=1);var o=t.number2int(i/86400),r=t.number2int(i%86400/3600),s=t.number2int(i%3600/60),a=t.number2int(i%60);new RegExp("(d+)").test(e)||(r+=24*o),new RegExp("(h+)").test(e)||(s+=60*r);var h={"d+":o,"h+":r,"m+":s,"s+":a};for(var l in h)new RegExp("("+l+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?h[l]:1==(""+h[l]).length?"0"+h[l]:h[l]));return e},t.format1=function(e){return t.diffTimeFormat("hh:mm:ss",e)},t.format2=function(e){return t.diffTimeFormat("hh时mm分ss秒",e)},t.number2int=function(e){return parseInt(t.number2str(e))},t.number2str=function(t){return t},t.getRemainTimeBySeconds=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n,o="",r=0,s=0,a=0;return r=Math.floor(t/this.secondsPerHour),r=0>r?0:r,n=Math.floor(t%this.secondsPerHour),s=Math.floor(n/60),s=0>s?0:s,a=n%60,a=0>a?0:a,!i&&e?o=this.formatString(r)+":"+this.formatString(s)+":"+this.formatString(a):i?i&&(r>0&&(o+=r+"时"),s>0&&(o+=s+"分"),o+=a+"秒"):o=this.formatString(s)+":"+this.formatString(a),o},t.formatString=function(t){if(0>t)return"00";var e;return e=9>=t?"0"+t:t.toString()},t.getMonthLength=function(t){var e=new Date;e.setTime(t);var i,n=e.getFullYear(),o=e.getMonth()+1;return i=2==o?n%4==0?29:28:1==o||3==o||5==o||7==o||8==o||10==o||12==o?31:30},t.getBeiJingTime=function(e){var i=e+6e4*t.BeiJingDate.getTimezoneOffset()+288e5;return new Date(i)},t.getWeekName=function(t,e){if(void 0===e&&(e=!0),e)switch(t){case 0:return"星期日";case 1:return"星期一";case 2:return"星期二";case 3:return"星期三";case 4:return"星期四";case 5:return"星期五";case 6:return"星期六"}else switch(t){case 0:return"星期一";case 1:return"星期二";case 2:return"星期三";case 3:return"星期四";case 4:return"星期五";case 5:return"星期六";case 6:return"星期日"}return""},t.ServerTime=0,t.ServerTimeStamp=0,t.BeiJingDate=new Date,t.secondsPerDay=86400,t.secondsPerHour=3600,t}();t.TimeUtils=e,__reflect(e.prototype,"asf.TimeUtils")}(asf||(asf={}));var asf;!function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t},t.isString=function(t){return"string"==typeof t},t.isArray=function(t){var e=typeof t;return"array"===e},t.isBoolean=function(t){return"boolean"==typeof t},t.createAny=function(){var t={};return t},t.asAny=function(t){return t},t}();t.TypeofUtils=e,__reflect(e.prototype,"asf.TypeofUtils")}(asf||(asf={}));var game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){},Object.defineProperty(e.prototype,"dataSource",{set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(morn.Box);t.AnnularItem=e,__reflect(e.prototype,"game.AnnularItem")}(game||(game={}));var game;!function(t){var e=function(t){function e(e,i){var n=t.call(this)||this;return n.r=0,n.num=0,n.nowAngle=0,n.turnDir="",n._itemArr=[],n._infoArr=[],n._sourceInfoArr=[],n._selectedIndex=-1,n.r=e,n.num=i,n.imgSp=new egret.Sprite,n.addChild(n.imgSp),n}return __extends(e,t),e.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)},e.prototype.setItemRender=function(t){this._itemRender=t,this.clearAll(),this.updateList()},e.prototype.setDataSource=function(t){this._sourceInfoArr=t.concat(),this._sourceInfoArr=this._sourceInfoArr.slice(0,this.num),this.updateList()},e.prototype.updateList=function(){if(this._itemRender){for(var t=0;t<this._sourceInfoArr.length;t++)null!=this._infoArr[t]&&void 0!=this._infoArr[t]?this._infoArr[t]=this._sourceInfoArr[t]:this._infoArr.push(this._sourceInfoArr[t]),this._itemArr[t]||(this._itemArr[t]=this.createOne(),this._itemArr[t].id=t),this._itemArr[t].dataSource=this._infoArr[t];var e=this._infoArr.length-this._sourceInfoArr.length;if(e>0){this._infoArr.splice(this._sourceInfoArr.length);for(var i,n=this._itemArr.splice(this._sourceInfoArr.length),o=0,r=n;o<r.length;o++)i=r[o],i.remove(),i.destroy()}}},e.prototype.createOne=function(){var t=new this._itemRender;t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchItem,this);var e=360/this.num,i=this._itemArr.length,n=asf.MathUtils.aToR(e*i);return t.x=Math.cos(n)*this.r-.5*t.width,t.y=Math.sin(n)*this.r-.5*t.height,this.imgSp.addChild(t),t},e.prototype.onTouchItem=function(t){var e=t.currentTarget;this.selectedIndex(e.id)},e.prototype.setSelectHandler=function(t){this._selectHandler=t},e.prototype.setMaskRect=function(t,e,i,n){var o=new egret.Shape;o.graphics.lineStyle(0,0),o.graphics.beginFill(0),o.graphics.drawRect(0,0,i,n),o.graphics.endFill(),o.x=t,o.y=e,this.addChild(o),this.mask=o},e.prototype.onTouchBegin=function(t){this.turnDir="",this.touchBeginX=t.stageX,this.touchBeginY=t.stageY,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchEnd=function(t){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this);var e=360/this.num;e=Math.floor(this.imgSp.rotation/e)*e,this.tweenAngle(e)},e.prototype.selectedIndex=function(t){this._selectedIndex=t,this._selectHandler&&this._selectHandler.execute(this._selectedIndex)},e.prototype.getSelectedIndex=function(){return this._selectedIndex},e.prototype.getSelectInfoByIndex=function(t){return this._infoArr[t]},e.prototype.onTouchMove=function(t){var e=this.touchBeginX-t.stageX,i=t.stageY-this.touchBeginY;Math.abs(e)>5?this.turnDir="x":Math.abs(i)>5&&(this.turnDir="y"),"x"==this.turnDir?e>0?this.move(!1):0>e&&this.move(!0):"y"==this.turnDir&&(i>0?this.move(!1):0>i&&this.move(!0)),""!=this.turnDir&&(this.touchBeginX=t.stageX,this.touchBeginY=t.stageY)},e.prototype.move=function(t){this.nowAngle=this.imgSp.rotation,t?this.nowAngle+=3:this.nowAngle-=3,this.imgSp.rotation=this.nowAngle},e.prototype.tweenAngle=function(t){this.imgSp.rotation=t},e.prototype.clearAll=function(){for(var t,e=0,i=this._itemArr;e<i.length;e++)t=i[e],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchItem,this),t.remove(),t.destroy();this._itemArr=[],this._infoArr=[]},e.prototype.destroy=function(){this.clearAll(),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.prototype.destroy.call(this)},e}(morn.Box);t.AnnularMenu=e,__reflect(e.prototype,"game.AnnularMenu")}(game||(game={}));var game;!function(t){var e=function(){function t(e,i,n,o){void 0===i&&(i=t.SHAPE_TYPE_RECT),void 0===n&&(n=e.width),void 0===o&&(o=e.height),this.timerId=-1,this.loopId=-1,this.obj=e,this.shapeType=i,this.width=n,this.height=o,this.init()}return t.prototype.init=function(){return null==this.obj||isNaN(this.shapeType)?void console.log("MaskControl参数有误"):(this.centerPoint=new egret.Point(this.obj.width/2,this.obj.height/2),this.shape=new egret.Shape,this.obj.addChild(this.shape),this.label=new morn.Label,this.label.width=this.obj.width,this.label.size=26,this.label.color=16777215,this.label.text="0",this.label.align="center",this.label.y=.5*(this.height-this.label.height),this.obj.addChild(this.label),void(this.label.text=""))
},t.prototype.destroy=function(){isNaN(this.timerId)||asf.App.timer.clearTimer(this.timerId),this.shape&&(this.shape.parent&&this.shape.parent.removeChild(this.shape),this.shape.graphics.clear()),this.shape=null,this.obj=null,this.centerPoint=null,this.label.parent&&this.label.parent.removeChild(this.label),this.label=null,this.callback=null},t.prototype.start=function(e,i,n){if(void 0===n&&(n=0),0>e||0>n)throw new Error("参数不能小于0");return this.isPause=!1,this.callback=i,n>=e?void this.complete():(this.curTime=n,this.countDownTime=e,this.timeStamp=egret.getTimer(),this.currentRadian=t.START_RADIAN+n/e*t.PI2,this.creatShape(this.currentRadian,t.END_RADIAN),void(this.timerId=asf.App.timer.doFrameLoop(1,this.tick,this,null,this.timerId)))},t.prototype.pause=function(){this.isPause||isNaN(this.timerId)||(this.isPause=!0,asf.App.timer.pauseTimer(this.timerId))},t.prototype.resume=function(){this.isPause&&(isNaN(this.timerId)||(this.isPause=!1,this.timeStamp=egret.getTimer(),asf.App.timer.resumeTimer(this.timerId)))},t.prototype.tick=function(){var e=egret.getTimer(),i=e-this.timeStamp;this.curTime+=i;var n=this.countDownTime-this.curTime,o=i/this.countDownTime;this.timeStamp=e,this.currentRadian+=t.PI2*o,this.currentRadian<t.END_RADIAN?(this.creatShape(this.currentRadian,t.END_RADIAN),this.label.text=String(Math.ceil(n/1e3))):(asf.App.timer.clearTimer(this.timerId),this.complete())},t.prototype.complete=function(){this.isPause=!0,this.shape.graphics.clear(),this.label.text="",this.callback&&this.callback.execute()},t.prototype.creatShape=function(e,i){switch(this.shapeType){case t.SHAPE_TYPE_CIRCLE:this.creatCircleShape(e,i);break;case t.SHAPE_TYPE_RECT:this.creatRectShape(e,i)}},t.prototype.creatRectShape=function(t,e){this.shape.graphics.clear(),this.shape.graphics.beginFill(0,.5),this.shape.graphics.moveTo(this.centerPoint.x,this.centerPoint.y),this.shape.graphics.lineTo(this.centerPoint.x,0);var i=Math.atan(this.centerPoint.y/this.centerPoint.x);-i>t?this.shape.graphics.lineTo(-this.centerPoint.y/Math.tan(t)+this.centerPoint.x,0):i>t?(this.shape.graphics.lineTo(this.width,0),this.shape.graphics.lineTo(this.width,this.centerPoint.x*Math.tan(t)+this.centerPoint.y)):t<Math.PI-i?(this.shape.graphics.lineTo(this.width,0),this.shape.graphics.lineTo(this.width,this.height),this.shape.graphics.lineTo(this.centerPoint.y/Math.tan(t)+this.centerPoint.x,this.height)):t<Math.PI+i?(this.shape.graphics.lineTo(this.width,0),this.shape.graphics.lineTo(this.width,this.height),this.shape.graphics.lineTo(0,this.height),this.shape.graphics.lineTo(0,-this.centerPoint.x*Math.tan(t)+this.centerPoint.y)):(this.shape.graphics.lineTo(this.width,0),this.shape.graphics.lineTo(this.width,this.height),this.shape.graphics.lineTo(0,this.height),this.shape.graphics.lineTo(0,0),this.shape.graphics.lineTo(-this.centerPoint.y/Math.tan(t)+this.centerPoint.x,0)),this.shape.graphics.lineTo(this.centerPoint.x,this.centerPoint.y),this.shape.graphics.endFill()},t.prototype.getLabel=function(){return this.label},t.prototype.creatCircleShape=function(t,e){this.shape.graphics.clear(),this.shape.graphics.beginFill(0,.5),this.shape.graphics.moveTo(this.centerPoint.x,this.centerPoint.y),this.shape.graphics.lineTo(this.centerPoint.x,0),this.shape.graphics.drawArc(this.centerPoint.x,this.centerPoint.y,this.width/2,t,e,!1),this.shape.graphics.lineTo(this.centerPoint.x,this.centerPoint.y),this.shape.graphics.endFill()},t.SHAPE_TYPE_RECT=1,t.SHAPE_TYPE_CIRCLE=2,t.START_RADIAN=-Math.PI/2,t.END_RADIAN=3*Math.PI/2,t.PI2=2*Math.PI,t}();t.MaskControl=e,__reflect(e.prototype,"game.MaskControl")}(game||(game={}));var PageBarControl=function(){function t(t,e,i){void 0===i&&(i=null),this.prevBtn=t,this.nextBtn=e,this.text=i,this.init()}return t.prototype.init=function(){this._totalPage=1,this._curPage=1,asf.App.render.callLater(this.changePage,this),this.prevBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.destroy=function(){this.prevBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nextBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.prevBtn=null,this.nextBtn=null,this.text=null,this.changePageCallBack=null,asf.App.render.removeLater(this.changePage,this)},Object.defineProperty(t.prototype,"curPage",{get:function(){return this._curPage},set:function(t){t>0&&t<=this.totalPage&&(this._curPage=t,asf.App.render.callLater(this.changePage,this),this.changePageCallBack&&this.changePageCallBack.execute())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalPage",{get:function(){return this._totalPage},set:function(t){t>0&&(this._totalPage=t,this._totalPage<this._curPage&&(this._curPage=this._totalPage),asf.App.render.callLater(this.changePage,this),this.changePageCallBack&&this.changePageCallBack.execute())},enumerable:!0,configurable:!0}),t.prototype.changePage=function(){this.text&&(this.text.text=this.curPage+"/"+this.totalPage),morn.ObjectUtils.gray(this.prevBtn,1==this.curPage),morn.ObjectUtils.gray(this.nextBtn,this.curPage==this.totalPage)},t.prototype.onClick=function(t){switch(t.currentTarget){case this.prevBtn:this.curPage>1&&this.curPage--;break;case this.nextBtn:this.curPage<this.totalPage&&this.curPage++}},t}();__reflect(PageBarControl.prototype,"PageBarControl");var game;!function(t){var e=function(){function t(t){this.bar=t;var e=new egret.Rectangle(0,0,t.width,t.height);this.bar.scrollRect=e,this.percent=0}return t.prototype.setRect=function(t,e){var i=this.bar.scrollRect;i.width=t,i.height=e,this.bar.scrollRect=i,this.percent=this._percent},t.prototype.destroy=function(){egret.Tween.removeTweens(this),this.bar=null},t.prototype.setProgress=function(t){this.percent=t},Object.defineProperty(t.prototype,"percent",{get:function(){return this._percent},set:function(t){0>t?t=0:t>1&&(t=1),this._percent=t;var e=this.bar.scrollRect;e.right=this.bar.width*this._percent,this.bar.scrollRect=e,this.bar.visible=t>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),t.prototype.run=function(t,e,i,n,o,r,s){void 0===e&&(e=1e3),void 0===i&&(i=0),void 0===n&&(n=!0),void 0===o&&(o=null),void 0===r&&(r=null),void 0===s&&(s=null),this._isPlaying=!0,egret.Tween.removeTweens(this),0>t?t=0:t>1&&(t=1);var a;i>0?(a=(n?1-this.percent:this.percent-0)*e,egret.Tween.get(this,{onChange:r?r.fun:null,onChangeObj:r?r.thisObj:null}).to({percent:n?1:0},a).call(this.callBack,this,[t,e,i-1,n,o,r,s])):(a=Math.abs(t-this.percent)*e,egret.Tween.get(this,{onChange:r?r.fun:null,onChangeObj:r?r.thisObj:null}).to({percent:t},a).call(this.complete,this,[o]))},t.prototype.complete=function(t){this._isPlaying=!1,t&&t.execute()},t.prototype.stop=function(){egret.Tween.removeTweens(this)},t.prototype.callBack=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];1==t[3]?this.percent=0:this.percent=1;var i=t[6];i&&i.execute(),this.run.apply(this,t)},t}();t.ProgressBar=e,__reflect(e.prototype,"game.ProgressBar")}(game||(game={}));var game;!function(t){var e=function(){function t(t,e,i){this.touchPointID=-1,this.scaleValue=1,this.rocker=t,this.limitDistance=e,this.iRockerControl=i,this.touchStatus=!1,this.distance=new egret.Point,this.originalX=this.rocker.x,this.originalY=this.rocker.y,this.resultPoint=new egret.Point,this.rocker.touchEnabled=!0,this.rocker.stage?(this.rocker.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.rocker.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this)):this.rocker.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this)}return t.prototype.destroy=function(){this.rocker.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this),this.rocker.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.rocker.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this.rocker.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this),this.resultPoint=null,this.iRockerControl=null,this.rocker=null,this.distance=null},t.prototype.onAddtoStage=function(t){this.rocker.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this),this.rocker.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.rocker.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this)},t.prototype.mouseDown=function(t){this.setRockScale(this.scaleValue),this.touchPointID=t.touchPointID,this.touchStatus=!0,this.distance.x=t.localX,this.distance.y=t.localY,this.rocker.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},t.prototype.mouseUp=function(t){this.touchPointID==t.touchPointID&&(this.touchPointID=-1,this.touchStatus&&(this.setRockScale(1),this.touchStatus=!1,this.rocker.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this),this.rocker.x=this.originalX,this.rocker.y=this.originalY,this.iRockerControl.reset()))},t.prototype.mouseMove=function(t){if(this.touchPointID==t.touchPointID&&this.touchStatus){this.rocker.parent.globalToLocal(t.stageX-this.distance.x,t.stageY-this.distance.y,this.resultPoint),this.rocker.x=this.resultPoint.x,this.rocker.y=this.resultPoint.y;var e=Math.atan2(this.rocker.y-this.originalY,this.rocker.x-this.originalX),i=this.getDistance(this.rocker.x,this.rocker.y,this.originalX,this.originalY);i>this.limitDistance&&(i=this.limitDistance,this.rocker.x=this.originalX+Math.cos(e)*this.limitDistance,this.rocker.y=this.originalY+Math.sin(e)*this.limitDistance),this.iRockerControl.move(e,i/this.limitDistance)}},t.prototype.getDistance=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))},t.prototype.setScaleValue=function(t,e){void 0===t&&(t=.7),void 0===e&&(e=!1),this.scaleValue=t,e&&(this.rocker.scale=t,this.setRockScale(t))},t.prototype.setRockScale=function(t){var e=this.rocker.width,i=this.rocker.height;this.rocker.scaleX=this.rocker.scaleY=t,this.rocker.x=.5*(e-this.rocker.width*t),this.rocker.y=.5*(i-this.rocker.height*t)},t}();t.Rocker=e,__reflect(e.prototype,"game.Rocker")}(game||(game={}));var morn;!function(t){var e=function(){function t(t,e){this.sizeNums=3,this._skin=t,this._list=t.list,this._label=t.nameLab,this._btn=t.btn,this._mc=t.mc,this._bg=t.bg,this._arrow=t.arrow,this._list.itemRender=e,this._list.selectHandler=new asf.CallBack(this.onSelectHandler,this),this._mc.visible=!1,this._btn.ansTime=0,this._label.text="Label",this._btn.setClickHandler(this.onClickBtn,this),asf.App.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickOutside,this),this.initSize()}return t.prototype.initSize=function(){this._mc.y=this._btn.height+this._btn.y,this._mc.x=.5*(this._btn.width-this._bg.width),this._label.width=this._label.textField.width,this._arrow.x=this._btn.width-t.ARROW_MARGIN_RIGHT-this._arrow.width,this._list.height=999},t.prototype.setBtnText=function(e){this._label.text=e,this._label.width=this._label.textField.width,this._label.width>this._btn.width-2*t.LABEL_MARGIN_LEFT?this._btn.width=this._label.width+2*t.LABEL_MARGIN_LEFT:this._label.x=.5*(this._btn.width-this._label.width),this._arrow.x=this._btn.width-t.ARROW_MARGIN_RIGHT-this._arrow.width},t.prototype.setData=function(e,i,n,o,r){void 0===i&&(i=0),void 0===n&&(n=!1),this._list.dataSource=e;for(var s=0,a=this._list.getSelectedCellByIndex(0),h=0;h<this._list.length;h++)this._list.getSelectedCellByIndex(h).width>s&&(s=this._list.getSelectedCellByIndex(h).width,a=this._list.getSelectedCellByIndex(h));n?(a.btn&&(o=a.btn.x,r=a.btn.y),this._list.height=a.height*this._list.length,this._list.width=s+(o?o:t.ITEM_MARGIN_LEFT),this._list.y=t.ITEM_MARGIN_TOP,this._bg.height=this._list.height+(r?r:t.ITEM_MARGIN_TOP)+t.ITEM_MARGIN_TOP,this._bg.width=this._list.width):(this._list.height=a.height*this._list.length,this._list.width=s,this._bg.height=this._list.height+2*(r?r:t.ITEM_MARGIN_TOP),this._bg.width=this._list.width+2*(o?o:t.ITEM_MARGIN_LEFT),this._list.x=o?o:t.ITEM_MARGIN_LEFT,this._list.y=r?r:t.ITEM_MARGIN_TOP),0!=i&&(n?(this._list.height=(a.height-(r?r:t.ITEM_MARGIN_TOP))*i,this._list.y=t.ITEM_MARGIN_TOP,this._bg.height=this._list.height+2*t.ITEM_MARGIN_TOP):(this._list.height=a.height*i,this._bg.height=this._list.height+2*(r?r:t.ITEM_MARGIN_TOP))),this._list.updateList(),this._btn.width=this._bg.width,this._label.x=.5*(this._btn.width-this._label.width),this._mc.x=.5*(this._btn.width-this._bg.width),this._arrow.x=this._btn.width-t.ARROW_MARGIN_RIGHT-this._arrow.width},t.prototype.onClickBtn=function(){this._mc.visible?(this._mc.visible=!1,this._arrow.scaleY=1):(this._mc.visible=!0,this._arrow.scaleY=-1)},t.prototype.onClickOutside=function(t){var e,i=this._mc.x,n=this._mc.y;if(this._mc.visible){for(e=this._mc.parent;!(e instanceof egret.Stage);)i+=e.x,n+=e.y,e=e.parent;(t.stageX<i||t.stageX>i+this._mc.width||t.stageY<n-this._btn.height||t.stageY>n+this._mc.height)&&(this._mc.visible=!1,this._arrow.scaleY=1)}},t.prototype.setSelectHandler=function(t,e,i){this._selectHandler=new asf.CallBack(t,e,i)},t.prototype.onSelectHandler=function(t){this._label.text=this._list.getSelectedInfoByIndex(t),this._selectHandler&&this._selectHandler.execute(this._list.selectedIndex),this._mc.visible=!1,this._arrow.scaleY=1},t.prototype.getSelectIndex=function(){return this._list.selectedIndex},t.prototype.setSelectIndex=function(t){this._list.selectedIndex=t},t.prototype.setSizeNum=function(t){this.sizeNums=t},t.prototype.destroy=function(){asf.App.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickOutside,this),this._selectHandler&&delete this._selectHandler},t.LABEL_MARGIN_LEFT=20,t.ARROW_MARGIN_RIGHT=16,t.ITEM_MARGIN_LEFT=16,t.ITEM_MARGIN_TOP=15,t}();t.ComboBox=e,__reflect(e.prototype,"morn.ComboBox")}(morn||(morn={}));var morn;!function(t){var e=function(){function t(t){void 0===t&&(t=""),this.name=t}return t}();t.ComboboxInfo=e,__reflect(e.prototype,"morn.ComboboxInfo")}(morn||(morn={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._page=0,e._tabList=[],e._tabClass=[],e.setTabClass(),e}return __extends(e,t),e.prototype.setTabClass=function(){},Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(t){this._page=t,this.openTabPage()},enumerable:!0,configurable:!0}),e.prototype.openTabPage=function(){if(this.removeAllTabs(),this._tabClass&&this._tabClass[this._page]){this._tabList[this._page]||(this._tabList[this._page]=new this._tabClass[this._page],this._nowTab=this._tabList[this._page],this.preinit(this._page),this._tabList[this._page].init()),this._nowTab=this._tabList[this._page];var t=this._nowTab;this.mainViewTabMc.addChild(t),this._nowTab.onTabOpen()}},Object.defineProperty(e.prototype,"mainViewTabMc",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.tabClose=function(){t.prototype.tabClose.call(this),this._nowTab&&this._nowTab.onTabClose()},e.prototype.removeAllTabs=function(){if(this._tabList)for(var t,e=0,i=this._tabList;e<i.length;e++)t=i[e],t&&t instanceof egret.DisplayObject&&t.parent&&(t.onTabClose(),t.parent.removeChild(t))},e.prototype.clearTabList=function(){if(this.removeAllTabs(),this._tabList)for(var t,e=0,i=this._tabList;e<i.length;e++)t=i[e],t&&t.destroy();this._nowTab=null,this._tabList=[],this._tabClass=[]},e.prototype.destroy=function(){if(this.removeAllTabs(),this._tabList)for(var e,i=0,n=this._tabList;i<n.length;i++)e=n[i],e&&e.destroy();this._nowTab=null,this._tabList=null,this._tabClass=null,t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"nowTab",{get:function(){var t=this._nowTab;return t},enumerable:!0,configurable:!0}),e}(t.TabWin);t.TabSecWin=e,__reflect(e.prototype,"game.TabSecWin")}(game||(game={}));var asf;!function(t){var e=function(){function t(t,e){void 0===e&&(e=!0),this._arr=[],this._attributeName=t,this._min=e}return t.prototype.getTop=function(){return this._arr[0]},t.prototype.getArr=function(){return this._arr},t.prototype.hasElement=function(t){return this._arr.indexOf(t)>=0},t.prototype.clear=function(){this._arr=[]},t.prototype.addToBMH=function(t){this._arr.push(t),this.bHUp(this._arr.length-1)},t.prototype.removeFromBMH=function(t){var e=this._arr.indexOf(t);this.removeFromBMHByIndex(e)},t.prototype.removeFromBMHByIndex=function(t){t>=this._arr.length||0>t||(t==this._arr.length-1?this._arr.pop():(this._arr[t]=this._arr.pop(),this.bHDown(t)))},t.prototype.changeFromBMH=function(t){var e=this._arr.indexOf(t),i=this._arr[e];if(i){var n=e+1,o=Math.floor(n/2),r=this._arr[o-1];r&&r[this._attributeName]>i[this._attributeName]?this.bHUp(e):this.bHDown(e)}},t.prototype.bHDown=function(t){for(var e=t+1;;){var i=this._arr[e-1];if(!i)break;var n=2*e,o=this._arr[n-1],r=this._arr[n];if(r&&r[this._attributeName]<o[this._attributeName]){if(!(r[this._attributeName]<i[this._attributeName]))break;this._arr[n]=i,this._arr[e-1]=r,e=n+1}else{if(!(o&&o[this._attributeName]<i[this._attributeName]))break;this._arr[e-1]=o,this._arr[n-1]=i,e=n}}},t.prototype.bHUp=function(t){for(var e=t+1;;){var i=this._arr[e-1];if(!i)break;var n=Math.floor(e/2),o=this._arr[n-1];if(!(o&&o[this._attributeName]>i[this._attributeName]))break;this._arr[n-1]=i,this._arr[e-1]=o,e=n}},t}();t.BinaryHeap=e,__reflect(e.prototype,"asf.BinaryHeap")}(asf||(asf={}));var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.ImageLoader.crossOrigin="anonymous",egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};try{var e=location.search;e&&-1!=e.indexOf("?")&&(e=decodeURIComponent(e),this.urlParams=this.getUrlkey(e))}catch(i){console.error("解析url参数报错",i)}this.loadGameCfg()},e.prototype.getUrlkey=function(t){for(var e={},i=t.split("?"),n=i[1].split("&"),o=0,r=n.length;r>o;o++){var s=n[o].split("=");e[s[0]]=s[1]}return e},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return asf.PoolMgr.init(),asf.ShakeUtil.init(),asf.App.init(this),asf.ResMgr.ins(),game.HttpManager.urlHead="http://liuwei.dev.linjiexian.cn/game/",[4,this.loadResource()];case 1:return t.sent(),asf.ResMgr.ins().init(this.configBean.assets,this.configBean.assets),this.gameMain=new game.GameMain(this.configBean,this),this.gameMain.init(),[2]}})})},e.prototype.onInitResMgrComplete=function(t){console.info("资源加载初始化完成，egret配置加载完成")},e.prototype.loadGameCfg=function(){console.time("加载gamecfg.json");var t=new egret.URLRequest;t.url="gamecfg.json?v="+asf.RandomUtils.randomInt(1,99999999),this.gameCfgLoader=new egret.URLLoader,this.gameCfgLoader.addEventListener(egret.Event.COMPLETE,this.onGamecfg,this),this.gameCfgLoader.load(t)},e.prototype.onGamecfg=function(t){this.gameCfgLoader.removeEventListener(egret.Event.COMPLETE,this.onGamecfg,this),this.configBean=JSON.parse(this.gameCfgLoader.data),game.Session.instance.config=this.configBean,morn.Morn.ResUrl=this.configBean.assets+"mornui/",this.configBean.token&&""!=this.configBean.token&&(game.HttpManager.token=this.configBean.token),this.configBean.httpVer&&""!=this.configBean.httpVer&&(game.HttpManager.ver=this.configBean.httpVer),this.configBean.server&&""!=this.configBean.server&&(game.HttpManager.urlHead=this.configBean.server),this.configBean.loadingSpeed&&(game.NC.LoadingSpeed=this.configBean.loadingSpeed),!this.configBean.debug&&this.configBean.showLog>=0&&(asf.ConsolePlus.init(),asf.ConsolePlus.setLevel(this.configBean.showLog)),console.timeEnd("加载gamecfg.json");try{game.JSBrigd.getInstance().init()}catch(e){console.error("初始化JSBrigd出错",e)}this.urlParams&&this.urlParams.token&&""!=this.urlParams.token?(game.HttpManager.token=this.urlParams.token,this.runGame()["catch"](function(t){console.log(t)})):this.configBean.debug?this.runGame()["catch"](function(t){console.log(t)}):(console.info("调用app的token"),mvc.once(game.NC.Update_Token,this.onUpdateToken,this),game.JSBrigd.getInstance().getToken())},e.prototype.onUpdateToken=function(t){console.info("app传回的token："+t),game.HttpManager.token=t,this.runGame()["catch"](function(t){console.log(t)})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,RES.loadConfig(this.configBean.assets+"default.res.json?v="+asf.RandomUtils.randomInt(1,99999999),this.configBean.assets)];case 1:return i.sent(),console.info("default.res.json加载完成，加载preload资源"),t=new game.EgretVersion,RES.registerVersionController(t),t.setVersion(null,this.configBean.cfgVersion,this.configBean.version),[4,RES.loadGroup("loading",0)];case 2:return i.sent(),this.loadingView=new LoadingView,this.stage.addChild(this.loadingView),[4,RES.loadGroup("preload",0,this.loadingView)];case 3:return i.sent(),this.stage.removeChild(this.loadingView),console.info("preload加载完成"),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var game;!function(t){var e=function(){function t(){}return t}();t.PlatformBean=e,__reflect(e.prototype,"game.PlatformBean")}(game||(game={}));var game;!function(t){var e=function(){function t(t,e){this.speed=2,t&&(this.image=t,this.timeKey=asf.App.timer.doLoop(33,this.onLoop,this))}return t.prototype.clear=function(){asf.App.timer.clearTimer(this.timeKey)},t.prototype.play=function(){this.timeKey=asf.App.timer.doLoop(33,this.onLoop,this)},t.prototype.onLoop=function(){this.image.rotation+=this.speed},t}();t.AutoRotationEffect=e,__reflect(e.prototype,"game.AutoRotationEffect")}(game||(game={}));var game;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return e?(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,i.onResourceLoadComplete,i),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,i.onResourceLoadError,i),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i.onItemLoadError,i),RES.loadGroup(e)):i.init(),i}return __extends(e,t),e.prototype.onResourceLoadComplete=function(t){t.groupName==this.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.init())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.init=function(){},e.prototype.initContainer=function(t){this.container=t},e.prototype.close=function(){this.container.parent&&this.container.parent.removeChild(this.container),this.onClose()},e.prototype.onClose=function(){},e}(egret.DisplayObjectContainer);t.EgretContainer=e,__reflect(e.prototype,"game.EgretContainer")}(game||(game={}));var game;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.frameRate=12,i}return __extends(i,e),i.prototype.playOnce=function(e){this.url=e,t.MovieMgr.getInstance().load("mc",t.Session.instance.config.assets+e,new asf.CallBack(this.onLoadMove,this))},i.prototype.onLoadMove=function(t,e,i){this.mc=new egret.MovieClip(t),this.addChild(this.mc),this.mc.frameRate=this.frameRate,this.mc.addEventListener(egret.Event.COMPLETE,this.onPlayComplete,this),this.mc.play()},i.prototype.onPlayComplete=function(){console.log(this.url+"播放完成"),this.mc.stop(),this.mc.removeEventListener(egret.Event.COMPLETE,this.onPlayComplete,this),this.removeChild(this.mc),this.parent&&this.parent.removeChild(this)},i}(egret.Sprite);t.EgretMovieEffect=e,__reflect(e.prototype,"game.EgretMovieEffect")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return e.addCacheMovie=function(t){},e.playOnce=function(t,e,i){!t.parent&&this.mcContainer&&this.mcContainer.addChild(t)},e.playOnceUrl=function(e){t.MovieMgr.getInstance().load("mc",t.Session.instance.config.assets+e,new asf.CallBack(this.onLoadMove,this))},e.onLoadMove=function(t,e,i){new egret.MovieClip(t)},e}();t.EgretMovieUtils=e,__reflect(e.prototype,"game.EgretMovieUtils")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.prototype.init=function(){return Promise.resolve()},t.prototype.setVersion=function(t,e,i){this.cfgVersion=e,this.version=i,this.hotMap=t},t.prototype.getVirtualUrl=function(t){var e;if(this.hotMap){var i=this.hotMap[t];i&&(e=""+i)}return e||(e=this.version),-1==t.indexOf("?")?t+"?v="+e:t+"&v="+e},t}();t.EgretVersion=e,__reflect(e.prototype,"game.EgretVersion",["RES.VersionController","RES.IVersionController"])}(game||(game={}));var game;!function(t){var e=function(){function t(){null==t.loadCompleteDic&&(t.loadCompleteDic=new asf.Dictionary),null==this.groupDic&&(this.groupDic={})}return t.prototype.destroy=function(t){delete this.reser},t.removeRes=function(e){var i=this.loadCompleteDic.get(e);i&&i--,i&&0!=i?t.loadCompleteDic.put(e,i):this.loadCompleteDic.remove(e);for(var n=RES.getGroupByName(e),o=0;o<n.length;o++)asf.ResMgr.ins().removeCount(n[o].name)},t.prototype.addRefCount=function(e){var i=t.loadCompleteDic.get(e);i||0==i?i++:i=1;for(var n=RES.getGroupByName(e),o=0;o<n.length;o++)asf.ResMgr.ins().addCount(n[o].name);t.loadCompleteDic.put(e,i)},t.prototype.loadResList=function(e,i){var n=RES;this.reser=i,n.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),n.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),t.loadingViewClass&&n.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),n.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this);var o=[];this.loadCount=0;for(var r=0;r<e.length;r++)t.loadCompleteDic.hasKey(e[r].path)?this.addRefCount(e[r].path):(this.loadCount++,this.groupDic[e[r].path]=!0,o.push(e[r].path));if(0==this.loadCount&&this.reser)i.setResList(null,null);else if(t.loadingViewClass){for(var s=!1,r=0;r<o.length;r++)n.loadGroup(o[r]),n.isGroupLoaded(o[r])||(s=!0);s&&mvc.openView(t.loadingViewClass)}else for(var r=0;r<e.length;r++)n.loadGroup(e[r].path)},t.prototype.onResourceLoadComplete=function(e){this.groupDic[e.groupName]&&(this.loadCount--,this.addRefCount(e.groupName),0==this.loadCount&&(this.reser.setResList(null,null),t.loadingViewClass&&mvc.closeView(t.loadingViewClass),delete this.reser))},t.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},t.prototype.onResourceProgress=function(e){if(t.loadingViewClass){var i=mvc.getView(t.loadingViewClass);i&&i.updateProgress(e.itemsLoaded/e.itemsTotal)}},t}();t.MvcResLoader=e,__reflect(e.prototype,"game.MvcResLoader",["mvc.IResLoader","asf.IDestory"])}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.doAction=function(e,i,n,o,r,s){void 0===n&&(n=100),void 0===r&&(r=null),void 0===s&&(s=!0),egret.Tween.get(e).to(i,n,o).call(t.callback,null,[s,e,r])},t.callback=function(t,e,i){t&&null!=e.parent&&e.parent.removeChild(e),i&&i.execute()},t}();t.NumberEffect=e,__reflect(e.prototype,"game.NumberEffect")}(game||(game={}));var mvc;!function(t){var e=function(){function e(e){this.containerMap=new asf.Dictionary,this.rootContainer=e,this.createContainer(t.MvcConst.BG_LAYER),this.createContainer(t.MvcConst.SCENE_LAYER),this.createContainer(t.MvcConst.VIEW_BG_LAYER),this.createContainer(t.MvcConst.MAIN_LAYER),this.createContainer(t.MvcConst.VIEW_BOTTOM_LAYER),this.createContainer(t.MvcConst.VIEW_LAYER),this.createContainer(t.MvcConst.VIEW_TOP_LAYER),this.createContainer(t.MvcConst.TIP_LAYER),this.createContainer(t.MvcConst.TOP_LAYER)}return e.prototype.onResize=function(t){console.info("RootContainer onResize");var e=(this.originalWidth/this.originalHeight,asf.App.stage.stageWidth/asf.App.stage.stageHeight,asf.App.stage.stageWidth/this.originalWidth),i=asf.App.stage.stageHeight/asf.App.stage.stageHeight,n=asf.App.stage.stageWidth,o=asf.App.stage.stageHeight;e>i?(this.viewLayer.scaleY=i,this.viewLayer.scaleX=i,n=this.originalWidth*i,o=asf.App.stage.stageHeight*i):(this.viewLayer.scaleY=e,this.viewLayer.scaleX=e,n=this.originalWidth*e,o=asf.App.stage.stageHeight*e),console.log("widthRatio:"+e),console.log("heightRatio："+i),this.viewLayer.x=.5*(asf.App.stage.stageWidth-n),this.viewLayer.y=.5*(asf.App.stage.stageHeight-o)},e.getInstance=function(t){return null==this.instance&&(this.instance=new e(t)),this.instance},e.prototype.init=function(){},e.prototype.createContainer=function(e){var i=new egret.Sprite;this.rootContainer.addChild(i),this.containerMap.put(e,i),this[t.MvcConst.LAYER_NAME_ARRAY[e-1]]=i},e.prototype.getContainer=function(t){return this.containerMap.get(t)},e.prototype.addChild=function(t,e){this.containerMap.get(t).addChild(e)},e.prototype.removeChild=function(t,e){e.parent==this.containerMap.get(t)&&this.containerMap.get(t).removeChild(e)},e}();t.RootContainer=e,__reflect(e.prototype,"mvc.RootContainer")}(mvc||(mvc={}));var mvc;!function(t){var e=function(){function e(e){this.rootContainer=e,this.viewMap=new asf.HashMap,this.lvMax=t.MvcConst.VIEW_LV_MAX,this.lvList=[];for(var i=0;i<this.lvMax;i++)this.lvList[i]=null}return e.prototype.closeViewByLv=function(t){var e=t,i=e+1;-1==t&&(e=1,i=this.lvList.length);for(var n=this.viewMap,o=e;i>o;o++){var r=this.lvList[o];r&&r.instance&&(r.instance.close(),n.remove(r.instance),this.lvList[t]=null)}},e.prototype.hasView=function(t){return 1==t.instance.lv?this.viewMap.hasKey(t.instance):!1},e.prototype.addView=function(t){var e=!1;if(1==t.instance.lv){var i=this.lvList[t.instance.lv];t==i&&(e=!0);for(var n=1;5>n;n++)i=this.lvList[n],i&&i.instance&&i!=t&&(t.instance.noCloseIds&&-1!=t.instance.noCloseIds.indexOf(i.name)||(i.instance.close(),this.lvList[n]=null))}if(e)return!1;this.lvList[t.instance.lv]=t,this.viewMap.put(t.instance,t);var o=t.instance.container;return this.rootContainer.addChild(t.instance.layer,o),!0},e.prototype.delView=function(t){this.viewMap.remove(t.instance),this.lvList[t.instance.lv]=null;var e=t.instance.container;e?this.rootContainer.removeChild(t.instance.layer,e):console.error(t.name+" delView出现没有container的情况")},e.prototype.hasViewByLv=function(t){var e=this.lvList[t];return e&&e.instance?!0:!1},e.prototype.hasViewByLayer=function(t){var e=this.viewMap,i=e.values();if(i)for(var n=0,o=i;n<o.length;n++){var r=o[n];if(r.instance.layer==t)return!0}return!1},e}();t.ViewHandler=e,__reflect(e.prototype,"mvc.ViewHandler",["mvc.IViewHandler"])}(mvc||(mvc={}));var asf;!function(t){var e=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);
i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),o=Array(16),r=0;16>r;r++)n[r]=909522486^i[r],o[r]=1549556828^i[r];var s=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(o.concat(s),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;r<t.length;r++)i=t.charCodeAt(r),o+=n.charAt(i>>>4&15)+n.charAt(15&i);return o},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=t.length,r=0;o>r;r+=3)for(var s=t.charCodeAt(r)<<16|(o>r+1?t.charCodeAt(r+1)<<8:0)|(o>r+2?t.charCodeAt(r+2):0),a=0;4>a;a++)n+=8*r+6*a>8*t.length?this.b64pad:i.charAt(s>>>6*(3-a)&63);return n},t.prototype.rstr2any=function(t,e){var i,n,o,r,s,a=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l);for(n=0;l>n;n++){for(s=Array(),r=0,i=0;i<h.length;i++)r=(r<<16)+h[i],o=Math.floor(r/a),r-=o*a,(s.length>0||o>0)&&(s[s.length]=o);c[n]=r,h=s}var u="";for(i=c.length-1;i>=0;i--)u+=e.charAt(c[i]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",o=-1;++o<t.length;)e=t.charCodeAt(o),i=o+1<t.length?t.charCodeAt(o+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),o++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,o=-1732584194,r=271733878,s=0;s<t.length;s+=16){var a=i,h=n,l=o,c=r;i=this.md5_ff(i,n,o,r,t[s+0],7,-680876936),r=this.md5_ff(r,i,n,o,t[s+1],12,-389564586),o=this.md5_ff(o,r,i,n,t[s+2],17,606105819),n=this.md5_ff(n,o,r,i,t[s+3],22,-1044525330),i=this.md5_ff(i,n,o,r,t[s+4],7,-176418897),r=this.md5_ff(r,i,n,o,t[s+5],12,1200080426),o=this.md5_ff(o,r,i,n,t[s+6],17,-1473231341),n=this.md5_ff(n,o,r,i,t[s+7],22,-45705983),i=this.md5_ff(i,n,o,r,t[s+8],7,1770035416),r=this.md5_ff(r,i,n,o,t[s+9],12,-1958414417),o=this.md5_ff(o,r,i,n,t[s+10],17,-42063),n=this.md5_ff(n,o,r,i,t[s+11],22,-1990404162),i=this.md5_ff(i,n,o,r,t[s+12],7,1804603682),r=this.md5_ff(r,i,n,o,t[s+13],12,-40341101),o=this.md5_ff(o,r,i,n,t[s+14],17,-1502002290),n=this.md5_ff(n,o,r,i,t[s+15],22,1236535329),i=this.md5_gg(i,n,o,r,t[s+1],5,-165796510),r=this.md5_gg(r,i,n,o,t[s+6],9,-1069501632),o=this.md5_gg(o,r,i,n,t[s+11],14,643717713),n=this.md5_gg(n,o,r,i,t[s+0],20,-373897302),i=this.md5_gg(i,n,o,r,t[s+5],5,-701558691),r=this.md5_gg(r,i,n,o,t[s+10],9,38016083),o=this.md5_gg(o,r,i,n,t[s+15],14,-660478335),n=this.md5_gg(n,o,r,i,t[s+4],20,-405537848),i=this.md5_gg(i,n,o,r,t[s+9],5,568446438),r=this.md5_gg(r,i,n,o,t[s+14],9,-1019803690),o=this.md5_gg(o,r,i,n,t[s+3],14,-187363961),n=this.md5_gg(n,o,r,i,t[s+8],20,1163531501),i=this.md5_gg(i,n,o,r,t[s+13],5,-1444681467),r=this.md5_gg(r,i,n,o,t[s+2],9,-51403784),o=this.md5_gg(o,r,i,n,t[s+7],14,1735328473),n=this.md5_gg(n,o,r,i,t[s+12],20,-1926607734),i=this.md5_hh(i,n,o,r,t[s+5],4,-378558),r=this.md5_hh(r,i,n,o,t[s+8],11,-2022574463),o=this.md5_hh(o,r,i,n,t[s+11],16,1839030562),n=this.md5_hh(n,o,r,i,t[s+14],23,-35309556),i=this.md5_hh(i,n,o,r,t[s+1],4,-1530992060),r=this.md5_hh(r,i,n,o,t[s+4],11,1272893353),o=this.md5_hh(o,r,i,n,t[s+7],16,-155497632),n=this.md5_hh(n,o,r,i,t[s+10],23,-1094730640),i=this.md5_hh(i,n,o,r,t[s+13],4,681279174),r=this.md5_hh(r,i,n,o,t[s+0],11,-358537222),o=this.md5_hh(o,r,i,n,t[s+3],16,-722521979),n=this.md5_hh(n,o,r,i,t[s+6],23,76029189),i=this.md5_hh(i,n,o,r,t[s+9],4,-640364487),r=this.md5_hh(r,i,n,o,t[s+12],11,-421815835),o=this.md5_hh(o,r,i,n,t[s+15],16,530742520),n=this.md5_hh(n,o,r,i,t[s+2],23,-995338651),i=this.md5_ii(i,n,o,r,t[s+0],6,-198630844),r=this.md5_ii(r,i,n,o,t[s+7],10,1126891415),o=this.md5_ii(o,r,i,n,t[s+14],15,-1416354905),n=this.md5_ii(n,o,r,i,t[s+5],21,-57434055),i=this.md5_ii(i,n,o,r,t[s+12],6,1700485571),r=this.md5_ii(r,i,n,o,t[s+3],10,-1894986606),o=this.md5_ii(o,r,i,n,t[s+10],15,-1051523),n=this.md5_ii(n,o,r,i,t[s+1],21,-2054922799),i=this.md5_ii(i,n,o,r,t[s+8],6,1873313359),r=this.md5_ii(r,i,n,o,t[s+15],10,-30611744),o=this.md5_ii(o,r,i,n,t[s+6],15,-1560198380),n=this.md5_ii(n,o,r,i,t[s+13],21,1309151649),i=this.md5_ii(i,n,o,r,t[s+4],6,-145523070),r=this.md5_ii(r,i,n,o,t[s+11],10,-1120210379),o=this.md5_ii(o,r,i,n,t[s+2],15,718787259),n=this.md5_ii(n,o,r,i,t[s+9],21,-343485551),i=this.safe_add(i,a),n=this.safe_add(n,h),o=this.safe_add(o,l),r=this.safe_add(r,c)}return[i,n,o,r]},t.prototype.md5_cmn=function(t,e,i,n,o,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,r)),o),i)},t.prototype.md5_ff=function(t,e,i,n,o,r,s){return this.md5_cmn(e&i|~e&n,t,e,o,r,s)},t.prototype.md5_gg=function(t,e,i,n,o,r,s){return this.md5_cmn(e&n|i&~n,t,e,o,r,s)},t.prototype.md5_hh=function(t,e,i,n,o,r,s){return this.md5_cmn(e^i^n,t,e,o,r,s)},t.prototype.md5_ii=function(t,e,i,n,o,r,s){return this.md5_cmn(i^(e|~n),t,e,o,r,s)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();t.MD5=e,__reflect(e.prototype,"asf.MD5")}(asf||(asf={}));var morn;!function(t){var e=function(){function e(){}return e.parse=function(e,i){var n={};for(var o in e)if("addChild"!=o){if("this"!=o){var r=e[o]["new"];if(r)switch(r){case"Box":i[o]=new t.Box;break;case"Image":i[o]=new t.Image;break;case"Button":i[o]=new t.Button;break;case"Label":i[o]=new t.Label;break;case"ViewStack":i[o]=new t.ViewStack;break;case"NumberLine":i[o]=new t.NumberLine;break;case"TreeList":i[o]=new t.TreeList;break;case"CheckBox":i[o]=new t.CheckBox;break;case"ListBox":i[o]=new t.ListBox;break;case"Panel":i[o]=new t.Panel;break;case"RadioButton":i[o]=new t.RadioButton;break;case"RadioGroup":i[o]=new t.RadioGroup;break;case"ShapeMc":i[o]=new t.ShapeMc;break;case"Tab":i[o]=new t.Tab;break;case"TextInput":i[o]=new t.TextInput;break;default:throw new Error("LayoutJsonParse里面没有关于"+r+"类型的解析")}}var s=e[o].prop;for(var a in s)if(asf.TypeofUtils.isString(s[a])&&-1!=s[a].indexOf("@morn.Morn.ResUrl@")){var h=t.Morn.ResUrl+s[a].replace("@morn.Morn.ResUrl@","");"this"==o?i[a]=h:i[o][a]=h}else"this"==o?i[a]=s[a]:i[o][a]=s[a];var l=e[o].func;if(l)for(var c=0,u=l;c<u.length;c++){var p=u[c];"this"==o?i[p]():(n[o]||(n[o]=[]),n[o].push(p))}}var d=e.addChild;if(d)for(var f in d){var g=d[f],m=g[0],_=g[1];"this"==m?i.addChild(i[_]):i[m].addChild(i[_])}for(var v in n){var p=n[v];i[v][p]()}},e}();t.LayoutJsonParse=e,__reflect(e.prototype,"morn.LayoutJsonParse")}(morn||(morn={}));var morn;!function(t){var e=function(){function t(){}return t.ResUrl="",t.PanelGraphicsUrl="common_json.blank",t}();t.Morn=e,__reflect(e.prototype,"morn.Morn")}(morn||(morn={}));var morn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initSize=function(){this._width=0/0,this._height=0/0},Object.defineProperty(e.prototype,"width",{get:function(){if(isNaN(this._width)){var t=this.texture;return t?t.textureWidth:egret.superGetter(e,this,"width")}return this._width},set:function(t){this._width!=t&&(this._width=t,asf.App.render.callLater(this.changeSize,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){if(isNaN(this._height)){var t=this.texture;return t?t.textureHeight:egret.superGetter(e,this,"height")}return this._height},set:function(t){this._height!=t&&(this._height=t,asf.App.render.callLater(this.changeSize,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeGrid",{get:function(){return this._sizeGridStr},set:function(t){this._sizeGridStr=t,asf.App.render.callLater(this.changeSize,this)},enumerable:!0,configurable:!0}),e.prototype.textureForKey=function(t,e){this._source=t,this._key!=e&&(this._key&&asf.ResMgr.ins().removeCount(this._key),this._key=e,asf.ResMgr.ins().addCount(this._key)),asf.App.render.callLater(this.changeSize,this),asf.App.render.exeCallLater(this.changeSize,this)},e.prototype.changeSize=function(){if(this._source){this.texture=this._source,this._sizeGridStr&&this._sizeGridStr.length>0&&(this._sizeGrid||(this._sizeGrid=new egret.Rectangle),this._sizeGrid.x=Number(this._sizeGridStr[0]),this._sizeGrid.y=Number(this._sizeGridStr[1]),this._sizeGrid.width=this._source.textureWidth-Number(this._sizeGridStr[0])-Number(this._sizeGridStr[2]),this._sizeGrid.height=this._source.textureHeight-Number(this._sizeGridStr[1])-Number(this._sizeGridStr[3]),this.scale9Grid=this._sizeGrid);var t=Math.round(this.width),i=Math.round(this.height);egret.superSetter(e,this,"width",t),egret.superSetter(e,this,"height",i)}this._anchorX&&(this.anchorOffsetX=this._anchorX*this.width),this._anchorY&&(this.anchorOffsetY=this._anchorY*this.height)},Object.defineProperty(e.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){this._anchorX=t,asf.App.render.callLater(this.changeSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){this._anchorY=t,asf.App.render.callLater(this.changeSize,this)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(t){void 0===t&&(t=null),asf.App.render.removeLater(this.changeSize,this),this.dispose()},e.prototype.dispose=function(){if(this._key){asf.ResMgr.ins().removeCount(this._key)}this._key=null,this._source=null,this.texture=null,asf.App.render.removeLater(this.changeSize,this)},e}(egret.Bitmap);t.AutoBitmap=e,__reflect(e.prototype,"morn.AutoBitmap",["asf.IDestory"])}(morn||(morn={}));var BitmapArray=function(t){function e(){var e=t.call(this)||this;return e._length=0,e._direction=1,e._interval=0,e._align="left",e.realWidth=0,e.realHeight=0,e.bitmapArr=[],e.clipContainerVec=[],e}return __extends(e,t),e.prototype.destroy=function(){if(this.bitmapArr){for(;this.bitmapArr.length>0;)this.bitmapArr.pop().destroy();this.bitmapArr=null}if(this.clipContainerVec){for(;this.clipContainerVec.length>0;){var t=this.clipContainerVec.pop();t.parent&&t.parent.removeChild(t)}this.clipContainerVec=null}this.texture=null},Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!=t&&(this._direction=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skin",{get:function(){return this._skin},set:function(t){t&&this._skin!=t&&(this._skin=t,asf.ResMgr.ins().getRes(this._skin,this.setBitmapData,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){this._length!=t&&(this._length=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._interval},set:function(t){this._interval!=t&&(this._interval=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.changeClip())},enumerable:!0,configurable:!0}),e.prototype.setBitmapData=function(t,e){this._skin==e&&(this.texture=t,this.changeClip())},e.prototype.changeClip=function(){if(this.texture){for(var t=this.bitmapArr.length,e=0;e<this.length;e+=1)if(t>e){this.bitmapArr[e].textureForKey(this.texture,this._skin),this.bitmapArr[e].width=this.texture.textureWidth,this.bitmapArr[e].height=this.texture.textureHeight;var i=this.texture.textureWidth/2,n=this.texture.textureHeight/2;this.bitmapArr[e].x=-i,this.bitmapArr[e].y=-n,this.bitmapArr[e].visible=!0}else{var o=new morn.AutoBitmap;this.bitmapArr.push(o),o.textureForKey(this.texture,this._skin);var r=new egret.Sprite;this.clipContainerVec.push(r),r.addChild(o),this.addChild(r);var i=o.width/2,n=o.height/2;o.x=-i,o.y=-n}for(e=this.length;e<this.bitmapArr.length;e+=1)this.bitmapArr[e].visible=!1;var s=this.texture.textureWidth,a=this.texture.textureHeight,h=(this.length-1)*this.interval+this.length*s,l=(this.length-1)*this.interval+this.length*a;for(e=0;e<this.length;e+=1)1==this.direction?(this.clipContainerVec[e].y=0,"center"==this.align?this.clipContainerVec[e].x=e*(s+this.interval)-h/2+s/2:"right"==this.align?this.clipContainerVec[e].x=e*(s+this.interval)-h+s:this.clipContainerVec[e].x=e*(s+this.interval)):(this.clipContainerVec[e].x=0,"center"==this.align?this.clipContainerVec[e].y=e*(a+this.interval)-l/2+a/2:"right"==this.align?this.clipContainerVec[e].y=e*(a+this.interval)-l+a:this.clipContainerVec[e].y=e*(a+this.interval));this.realWidth=h,this.realHeight=l}},Object.defineProperty(e.prototype,"width",{get:function(){if(this.texture){var t,e=this.length,i=this.texture.textureWidth;t=1==this.direction?(e-1)*this.interval+e*i:i,this.realWidth=t}return this.realWidth},set:function(t){egret.superSetter(e,this,"width",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){if(this.texture){var t,e=this.length,i=this.texture.textureHeight;t=1==this.direction?i:(e-1)*this.interval+e*i,this.realHeight=t}return this.realHeight},set:function(t){egret.superSetter(e,this,"height",t)},enumerable:!0,configurable:!0}),e}(morn.Box);__reflect(BitmapArray.prototype,"BitmapArray");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var asf;!function(t){var e=function(){function e(){}return e.isPeak=function(t,e,i){return(i.x-e.x)/(i.y-e.y)!=(t.x-e.x)/(t.y-e.y)},e.getCrossPoint=function(e,i,n){void 0===n&&(n=!0);var o,r,s,a,h=[],l=i.x>e.x?1:-1,c=i.y>e.y?1:-1;if(i.x==e.x)for(a=Math.min(e.y,i.y),r=Math.abs(i.y-e.y)+1,o=0;r>o;o++)h.push(new egret.Point(e.x,a+o));else if(i.y==e.y)for(s=Math.min(e.x,i.x),r=Math.abs(i.x-e.x)+1,o=0;r>o;o++)h.push(new egret.Point(s+o,e.y));else{var u=(i.x-e.x)/(i.y-e.y);if(1==u||-1==u)for(r=Math.abs(i.x-e.x),o=0;r+1>o;o++)h.push(new egret.Point(e.x+l*o,e.y+c*o)),!n&&r>o&&(h.push(new egret.Point(e.x+l*o+l,e.y+c*o)),h.push(new egret.Point(e.x+l*o,e.y+c*o+c)));else{var p=Math.abs(i.x-e.x),d=Math.abs(i.y-e.y),f=Math.abs(u)>1;s=f?e.x:e.y,a=f?e.y:e.x;var g=f?l:c;r=f?p:d;var m,_;for(o=0;r>o;o++){var v=(f?(o+.5)/u:(o+.5)*u)*g;if(t.MathUtils.isInteger(v))_=a+v,m=s+g*o,this.putPoint(m,_,h,f),m+=g,this.putPoint(m,_,h,f);else if(t.MathUtils.isInteger(v/.5))if(n);else{_=Math.floor(a+v),m=s+g*o,this.putPoint(m,_,h,f);var y=Math.ceil(a+v);this.putPoint(m,y,h,f),m+=g,this.putPoint(m,y,h,f),this.putPoint(m,_,h,f)}else _=v>0?Math.floor(a+v+.5):Math.ceil(a+v-.5),m=s+g*o,this.putPoint(m,_,h,f),m+=g,this.putPoint(m,_,h,f)}}}return h},e.putPoint=function(t,e,i,n){var o=n?t:e,r=n?e:t;this.inLine(o,r,i)||i.push(new egret.Point(o,r))},e.inLine=function(t,e,i){for(var n=i.length,o=0;n>o;o++)if(i[o].x==t&&i[o].y==e)return!0;return!1},e.getPeaksInLine=function(t,i,n){var o=[];if(!t||t.length<2)return o;var r=t.length;if(!(r>1))throw new Error("Min:参数错误");for(var s=1;r-1>s;s++)null!=i?1==i.call(n,t[s])&&e.isPeak(t[s],t[s-1],t[s+1])&&o.push(t[s]):e.isPeak(t[s],t[s-1],t[s+1])&&o.push(t[s]);return o.unshift(t[0]),o.push(t[t.length-1]),o},e.getPathLength=function(t){var e=t.length,i=0;if(e>1)for(var n=1;e>=n;n++)t[n]instanceof Array?i+=egret.Point.distance(new egret.Point(t[n][0],t[n][1]),new egret.Point(t[n-1][0],t[n-1][1])):t[n]instanceof egret.Point&&(i+=egret.Point.distance(t[n],t[n-1]));return i},e}();t.PathLineUtils=e,__reflect(e.prototype,"asf.PathLineUtils")}(asf||(asf={}));var morn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.preinitialize=function(){t.prototype.preinitialize.call(this),this._toggle=!0,this._autoSize=!1,this.ansTime=0},e.prototype.initialize=function(){t.prototype.initialize.call(this),this._btnLabel.autoSize="left"},e.prototype.changeLabelSize=function(){this.exeCallLater(this.changeClips,this),this._btnLabel.x=this._bitmap.width+this._labelMargin[0]+2,this._btnLabel.y=.5*(this._bitmap.height-this._btnLabel.height)+this._labelMargin[1]},e.prototype.commitMeasure=function(){this.exeCallLater(this.changeLabelSize,this)},Object.defineProperty(e.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof Boolean?this.selected=t:t instanceof String?this.selected="true"==t:egret.superSetter(e,this,"dataSource",t)},enumerable:!0,configurable:!0}),e}(t.Button);t.CheckBox=e,__reflect(e.prototype,"morn.CheckBox")}(morn||(morn={}));var asf;!function(t){var e=function(t){function e(e,i,n){void 0===n&&(n=null);var o=t.call(this)||this;return o.x=e,o.y=i,o._parentPoint=n,o}return __extends(e,t),e.prototype.getWay=function(){for(var t=[],e=this;e;)t.push(e),e=e._parentPoint;return t},e}(egret.Point);t.PathPoint=e,__reflect(e.prototype,"asf.PathPoint")}(asf||(asf={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._showHour=!0,t._showMinute=!0,t._showSecond=!0,t.realWidth=0,t}return __extends(i,e),i.prototype.preinitialize=function(){e.prototype.preinitialize.call(this);var i=this,n=new t.Box;i.container=n,i.addChild(n),i._interval=0,i._value=0,i._align="left",i.numLoadedCount=[],i.colonLoadedCount=[],i.hourNumLine=new t.NumberLine,i.hourNumLine.interval=i._interval,i.minuteNumLine=new t.NumberLine,i.minuteNumLine.interval=i._interval,i.secondNumLine=new t.NumberLine,i.secondNumLine.interval=i._interval,i.colon1=new t.Image,i.colon2=new t.Image,n.addChild(i.hourNumLine),n.addChild(i.minuteNumLine),n.addChild(i.secondNumLine),n.addChild(i.colon1),n.addChild(i.colon2)},i.prototype.destroy=function(){this._skin=null,this._colonSkin=null,this._align=null,this.numLoadedCount=null,this.colonLoadedCount=null,this.hourNumLine.destroy(),this.hourNumLine=null,this.minuteNumLine.destroy(),this.minuteNumLine=null,this.secondNumLine.destroy(),this.secondNumLine=null,this.colon1.destroy(),this.colon1=null,this.colon2.destroy(),this.colon2=null,e.prototype.destroy.call(this)},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showHour",{get:function(){return this._showHour},set:function(t){this._showHour!=t&&(this._showHour=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showMinute",{get:function(){return this._showMinute},set:function(t){this._showMinute!=t&&(this._showMinute=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showSecond",{get:function(){return this._showSecond},set:function(t){this._showSecond!=t&&(this._showSecond=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){t&&this._skin!=t&&(this._skin=t,this.numLoadedCount=[],this.hourNumLine.loadedCallback=asf.CallBack.create(this.numLoaded,this,1),this.minuteNumLine.loadedCallback=asf.CallBack.create(this.numLoaded,this,2),this.secondNumLine.loadedCallback=asf.CallBack.create(this.numLoaded,this,3),this.hourNumLine.skin=this._skin,this.minuteNumLine.skin=this._skin,this.secondNumLine.skin=this._skin)},enumerable:!0,configurable:!0}),i.prototype.numLoaded=function(t){-1==this.numLoadedCount.indexOf(t)&&this.numLoadedCount.push(t),this.changeClip()},Object.defineProperty(i.prototype,"colonSkin",{get:function(){return this._colonSkin},set:function(t){t&&this._colonSkin!=t&&(this._colonSkin=t,this.colonLoadedCount=[],this.colon1.setLoadComplete(asf.CallBack.create(this.colonLoaded,this,1)),this.colon2.setLoadComplete(asf.CallBack.create(this.colonLoaded,this,2)),this.colon1.url=this._colonSkin,this.colon2.url=this._colonSkin)},enumerable:!0,configurable:!0}),i.prototype.colonLoaded=function(t){-1==this.colonLoadedCount.indexOf(t)&&this.colonLoadedCount.push(t),this.changeClip()},Object.defineProperty(i.prototype,"interval",{get:function(){return this._interval},set:function(t){this._interval!=t&&(this._interval=t,this.hourNumLine.interval=this._interval,this.minuteNumLine.interval=this._interval,this.secondNumLine.interval=this._interval,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.changeClip())},enumerable:!0,configurable:!0}),i.prototype.changeClip=function(){if(3==this.numLoadedCount.length&&2==this.colonLoadedCount.length){var t=Math.floor(this.value/3600),e=Math.floor(this.value%3600/60),i=this.value%60,n=(10>t?"0"+t:t).toString();this.hourNumLine.value=n,this.minuteNumLine.value=10>e?"0"+e:e,this.secondNumLine.value=10>i?"0"+i:i;var o=0,r=this.hourNumLine.width/n.length/2;this.hourNumLine.x=r,this.hourNumLine.visible=this.showHour,this.showHour&&(o+=this.hourNumLine.width),this.colon1.visible=this.showHour&&this.showMinute,this.minuteNumLine.visible=this.showMinute,this.showMinute&&(this.colon1.visible&&(this.colon1.x=o+this.interval,o+=this.interval+this.colon1.width,this.colon1.y=-this.colon1.height/2),this.minuteNumLine.x=o+this.interval+r,o+=this.interval+this.minuteNumLine.width),this.secondNumLine.visible=this.showSecond,this.colon2.visible=(this.showHour||this.showMinute)&&this.showSecond,this.showSecond&&(this.colon2.visible&&(this.colon2.x=o+this.interval,o+=this.interval+this.colon2.width,this.colon2.y=-this.colon2.height/2),this.secondNumLine.x=o+this.interval+r,o+=this.interval+this.secondNumLine.width),"center"==this.align?this.container.x=-o/2:"right"==this.align?this.container.x=-o:this.container.x=0,this.realWidth=o}},Object.defineProperty(i.prototype,"width",{get:function(){return this.realWidth},set:function(e){egret.superSetter(t.NumberLine,this,"width",e)},enumerable:!0,configurable:!0}),i}(t.Component);t.CountDownBitmap=e,__reflect(e.prototype,"morn.CountDownBitmap")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._fontPointArr=null,t._clipX=10,t._clipY=1,t._selectIndex=0,t._isCenter=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"isCenter",{get:function(){return this._isCenter},set:function(t){this._isCenter!=t&&(this._isCenter=t,this.callLater(this.changeFont,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSkin",{set:function(e){this._fontSkinStr!=e&&(this._fontSkinStr=e,this._fontSkin=this._fontSkinStr.split(","),null==this._fontbitmap&&this.addChild(this._fontbitmap=new t.AutoBitmap),this.callLater(this.changeFont,this))},enumerable:!0,configurable:!0}),i.prototype.changeFont=function(){this._fontbitmap&&this._fontSkin&&this.updateFont()},i.prototype.updateFont=function(){this._fontSkin&&(this._nowfontSkin=this._fontSkin[this.state],this._fontSkin[this.state]||(this._nowfontSkin=this._fontSkin[this._fontSkin.length-1]),asf.ResMgr.ins().getRes(this._nowfontSkin,this.onFontSkinLoaded,this))},i.prototype.onFontSkinLoaded=function(t){this._fontbitmap&&(t?(this._fontbitmap.x=t.$offsetX,this._fontbitmap.y=t.$offsetY,this._fontbitmap.textureForKey(t,this._nowfontSkin)):this._fontbitmap.dispose()),this.changeFontClip()},i.prototype.changeFontClip=function(){this._fontbitmap&&(this._isCenter?(this._fontbitmap.x=.5*(this.width-this._fontbitmap.width),this._fontbitmap.y=.5*(this.height-this._fontbitmap.height)):(this._fontbitmap.x=0,this._fontbitmap.y=0),this._fontPointArr&&(this._fontbitmap.x+=Number(this._fontPointArr[0]),this._fontbitmap.y+=Number(this._fontPointArr[1])))},i.prototype.changeLabelSize=function(){this.updateFont()},Object.defineProperty(i.prototype,"fontPoint",{set:function(t){this._fontPointArr=t.split(","),this.callLater(this.changeFont,this)},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this.removeLater(this.changeFont,this),this._fontbitmap&&(this._fontbitmap.parent&&this.removeChild(this._fontbitmap),this._fontbitmap.dispose(),this._fontbitmap=null),this._fontPointArr&&(this._fontPointArr=null),null!=this._fontSkin&&(this._fontSkin=null),e.prototype.destroy.call(this)},i}(t.Button);t.FontButton=e,__reflect(e.prototype,"morn.FontButton")}(morn||(morn={}));var game;!function(t){var e=function(){function t(){}return t.Original_Width=480,t.Original_Height=800,t.Value_CCY=1,t.Value_GCY=2,t.Value_TEAM_LV=3,t.Value_FIGHTER_EXP=4,t.Value_TiLi=5,t.Value_LingQi=6,t.Value_WanJia_DengJi=100,t.Value_GongNeng_POINT=102,t.Value_WanJia_JingYan=103,t.Value_Chong_Zhi=104,t.MAP_LAYER="mapContainer",t.MAP_EFFECT_LAYER="mapEffectContainer",t.ROLE_LAYER="roleContainer",t.ROLE_MASK_LAYER="roleMaskContainer",t.EFFECT_LAYER="effectContainer",t.CENTER_LAYER="centerContainer",t.TOP_LAYER="topContainer",t.BATTLE_READY="battleReady",t.BATTLING="battling",t.BATTLE_OVER="battleOver",t.ATK=0,t.GOODS=1,t.FLEE=2,t.CATCH=3,t.SKILL=4,t.DC=5,t.Idle=0,t.Run=1,t.Atk=2,t.Skill=3,t.Hit=4,t.RideRun=5,t.RideIdle=6,t.UP=0,t.RIGHT_UP=1,t.RIGHT=2,t.RIGHT_DOWN=3,t.DOWN=4,t.LEFT_DOWN=5,t.LEFT=6,t.LEFT_UP=7,t.N=0,t.NE=1,t.E=2,t.ES=3,t.S=4,t.SW=5,t.W=6,t.WN=7,t.BAG=15,t.EXIT=14,t.PLAYER=1,t.PET=2,t.NPC=3,t.MONSTER=4,t.EFFECT=999,t.TRAP=17,t}();t.CoreDefine=e,__reflect(e.prototype,"game.CoreDefine")}(game||(game={}));var morn;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this._slider.direction=t.ScrollBar.HORIZONTAL},i}(t.ScrollBar);t.HScrollBar=e,__reflect(e.prototype,"morn.HScrollBar")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.preinitialize=function(){e.prototype.preinitialize.call(this),this.direction=t.Slider.HORIZONTAL},i}(t.Slider);t.HSlider=e,__reflect(e.prototype,"morn.HSlider")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this)||this;return i._url=t,i}return __extends(i,e),i.prototype.createChildren=function(){this.addChild(this._bitmap=new t.AutoBitmap)},i.prototype.setLoadComplete=function(t){this._loadComplete=t},Object.defineProperty(i.prototype,"url",{get:function(){return this._url},set:function(t){if(this._url!=t)if(this._url=t,this._urlFormat=this._url,Boolean(t))try{RES.hasRes(this._urlFormat)?RES.getResAsync(this._urlFormat,this.set$bitmapData,this):RES.getResByUrl(this._urlFormat,this.set$bitmapData,this,RES.ResourceItem.TYPE_IMAGE)}catch(e){console.error("资源加载失败：url=",t,e)}else this.texture=null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return egret.superGetter(i,this,"width")},set:function(t){egret.superSetter(i,this,"width",t),this._bitmap&&(this._bitmap.width=egret.superGetter(i,this,"width"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return egret.superGetter(i,this,"height")},set:function(t){egret.superSetter(i,this,"height",t),this._bitmap&&(this._bitmap.height=egret.superGetter(i,this,"height"))},enumerable:!0,configurable:!0}),i.prototype.set$bitmapData=function(t,e){e==this._url&&(this.texture=t)},Object.defineProperty(i.prototype,"skin",{get:function(){return this._url},set:function(t){this.url=t},enumerable:!0,configurable:!0}),i.prototype.initSize=function(){this._height=0/0,this._width=0/0,this._bitmap&&this._bitmap.initSize()},Object.defineProperty(i.prototype,"$bitmapData",{get:function(){return this._bitmap.$bitmapData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._bitmap.texture},set:function(e){this._bitmap&&(e&&this._url?(this._contentWidth=e.textureWidth,this._contentHeight=e.textureHeight,this._bitmap.textureForKey(e,this._url),this._loadComplete&&this._loadComplete.execute(),this.sendEvent(t.UIEvent.IMAGE_LOADED)):e?(this._contentWidth=e.textureWidth,this._contentHeight=e.textureHeight,this._bitmap.$bitmapData=e.$bitmapData,this._loadComplete&&this._loadComplete.execute(),this.sendEvent(t.UIEvent.IMAGE_LOADED)):this._bitmap.dispose())},enumerable:!0,configurable:!0}),i.prototype.set$bitmapDataBy$bitmapData=function(e){e?(this._contentWidth=e.width,this._contentHeight=e.height,this._bitmap.$bitmapData=e,this._loadComplete&&this._loadComplete.execute(),this.sendEvent(t.UIEvent.IMAGE_LOADED)):this._bitmap.dispose()},Object.defineProperty(i.prototype,"sizeGrid",{get:function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},set:function(t){t&&(this._bitmap.sizeGrid=t.split(","))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"smoothing",{get:function(){return this._bitmap.smoothing},set:function(t){this._bitmap.smoothing=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorX",{get:function(){return this._bitmap.anchorX},set:function(t){this._bitmap.anchorX=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorY",{get:function(){return this._bitmap.anchorY},set:function(t){this._bitmap.anchorY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof String?this.url=String(t):egret.superSetter(i,this,"dataSource",t)},enumerable:!0,configurable:!0}),i.prototype.dispose=function(t){void 0===t&&(t=!1),this._bitmap&&(this._bitmap.parent&&this._bitmap.parent.removeChild(this._bitmap),this._bitmap.dispose(),this._bitmap=null)},i.prototype.destroy=function(){this.dispose(),this._url&&(this._url=null),this._loadComplete=null,e.prototype.destroy.call(this)},i}(t.Component);t.Image=e,__reflect(e.prototype,"morn.Image")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(i,n){void 0===i&&(i=""),void 0===n&&(n=null);var o=e.call(this)||this;return o._stroke="",o._margin=t.Styles.labelMargin,o._text="",o._isFirst=!0,o._underline=!1,o.text=i,o.skin=n,o}return __extends(i,e),i.prototype.preinitialize=function(){e.prototype.preinitialize.call(this)},i.prototype.createChildren=function(){this.addChild(this._bitmap=new t.AutoBitmap),this.addChild(this._textField=new egret.TextField),this.updateSizeY(),this._textField.touchEnabled=!0,this._textField.addEventListener(egret.TextEvent.LINK,this.onTextLink,this)},i.prototype.updateSizeY=function(){},i.prototype.initialize=function(){this.font="方正艺黑简体",this.size=t.Styles.fontSize,this.color=t.Styles.labelColor,this.leading=0},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){this._text!=t&&(this._text=t||"",this.changeText(),this.sendEvent(egret.Event.CHANGE))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textNoEvent",{set:function(t){this._text!=t&&(this._text=t||"",this._text=this._text.replace(/\\n/g,"\n"),this.changeText())},enumerable:!0,configurable:!0}),i.prototype.changeText=function(){if(this._isFirst&&""==this._text);else try{if(this._isHtml)this._underline?this._textField.textFlow=(new egret.HtmlTextParser).parser("<u>"+this._text+"</u>"):this._textField.textFlow=(new egret.HtmlTextParser).parser(this._text);
else{if(!this._textField)throw new Error("_textField为空");this._textField.text=this._text}}catch(t){console.error(t," text = ",this._text)}this._isFirst=!1},i.prototype.changeSize=function(){isNaN(this._width)?this._width=this._height=0/0:(this._textField.width=this._width-Number(this._margin[0])-Number(this._margin[2]),isNaN(this._height)&&this.wordWrap||(this._height=isNaN(this._height)?18:this._height,this._textField.height=this._height-Number(this._margin[1])-Number(this._margin[3]))),e.prototype.changeSize.call(this)},Object.defineProperty(i.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof Number||t instanceof String?this.text=String(t):egret.superSetter(i,this,"dataSource",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isHtml",{get:function(){return this._isHtml},set:function(t){this._isHtml!=t&&(this._isHtml=t,this.callLater(this.changeText,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(t){if(this._stroke!=t)if(this._stroke=t,""==this._stroke)this._textField.stroke=0,this._textField.strokeColor=0;else{var e=this._stroke.split(",");1==e.length?(this._textField.stroke=1,this._textField.strokeColor=Number(e[0])):2==e.length?(this._textField.stroke=Number(e[1]),this._textField.strokeColor=Number(e[0])):(this._textField.stroke=Number(e[2]),this._textField.strokeColor=Number(e[0]))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiline",{get:function(){return this._textField.multiline},set:function(t){this._textField.multiline=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"asPassword",{get:function(){return this._textField.displayAsPassword},set:function(t){this._textField.displayAsPassword=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoSize",{get:function(){return"false"},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._textField.wordWrap},set:function(t){this._textField.wordWrap=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectable",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"background",{get:function(){return this._textField.background},set:function(t){this._textField.background=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"backgroundColor",{get:function(){return this._textField.backgroundColor},set:function(t){this._textField.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._textField.textColor},set:function(t){this._textField.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"font",{get:function(){return this._textField.fontFamily},set:function(t){this._textField.fontFamily="方正艺黑简体",this.updateSizeY()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._textField.textAlign},set:function(t){this._textField.textAlign=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bold",{get:function(){return this._textField.bold},set:function(t){this._textField.bold=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._textField.lineSpacing-2},set:function(t){this._textField.lineSpacing=t+2},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"indent",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._textField.size},set:function(t){this._textField.size=t,this.updateSizeY()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"underline",{get:function(){return this._underline},set:function(t){this._underline=t,this.isHtml=t,this.callLater(this.changeText,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"margin",{get:function(){return this._margin.join(",")},set:function(t){this._margin=t.split(","),this._textField.x=Number(this._margin[0]),this._textField.y=Number(this._margin[1]),this.callLater(this.changeSize,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textField",{get:function(){return this._textField},enumerable:!0,configurable:!0}),i.prototype.appendText=function(t){this.text+=t},Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){this._skin!=t&&(this._skin=t,this._bitmap.textureForKey(RES.getRes(this._skin),this._skin),this._bitmap.$bitmapData&&(this._contentWidth=this._bitmap.$bitmapData.width,this._contentHeight=this._bitmap.$bitmapData.height))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sizeGrid",{get:function(){return this._bitmap.sizeGrid.join(",")},set:function(t){this._bitmap.sizeGrid=t.split(",")},enumerable:!0,configurable:!0}),i.prototype.commitMeasure=function(){this.exeCallLater(this.changeText,this),this.exeCallLater(this.changeSize,this)},Object.defineProperty(i.prototype,"width",{get:function(){return!isNaN(this._width)||Boolean(this._skin)||Boolean(this._text)?egret.superGetter(i,this,"width"):0},set:function(t){egret.superSetter(i,this,"width",t),this._bitmap.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return!isNaN(this._height)||Boolean(this._skin)||Boolean(this._text)?egret.superGetter(i,this,"height"):0},set:function(t){egret.superSetter(i,this,"height",t),this._bitmap.height=t},enumerable:!0,configurable:!0}),i.prototype.setTextLink=function(t){this.textLinkCallback=t},i.prototype.onTextLink=function(t){this.textLinkCallback&&this.textLinkCallback.execute(t.text)},i.prototype.destroy=function(){this.removeLater(this.changeText,this),this.removeLater(this.changeSize,this),this.textLinkCallback=null,this._textField&&(this._textField.removeEventListener(egret.TextEvent.LINK,this.onTextLink,this),this._textField.parent&&this.removeChild(this._textField),this._textField=null),this._bitmap&&(this._bitmap.parent&&this.removeChild(this._bitmap),this._bitmap.dispose(),this._bitmap=null),this._stroke=null,this._skin=null,this._text=null,this._margin!=t.Styles.labelMargin&&(this._margin=null),e.prototype.destroy.call(this)},i.SizeY=[4,5,5,4,4,4,4,4,4,6,6,6,6,6,6,6,6,6,6],i}(t.Component);t.Label=e,__reflect(e.prototype,"morn.Label")}(morn||(morn={}));var morn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.preinitialize=function(){t.prototype.preinitialize.call(this)},e.prototype.initialize=function(){t.prototype.initialize.call(this),this._btnLabel.underline=!0,this._btnLabel.autoSize="left"},e.prototype.changeLabelSize=function(){},e}(t.Button);t.LinkButton=e,__reflect(e.prototype,"morn.LinkButton")}(morn||(morn={}));var morn;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._spaceX=0,t._spaceY=0,t._repeatX=1,t._infoArr=[],t._sourceInfoArr=[],t._autoHideScrollBar=!0,t._isAutoHight=!0,t._selectedIndex=-1,t._isMeasureHeight=!1,t._measureHeight=0,t._measureWidth=0,t.canClickList=!0,t.isMultiselect=!1,t.nowCellHeight=0,t.nowCellWidth=0,t._posInfoArr=[],t._nowShowPosX=0/0,t._nowShowPosY=0/0,t._listMap=new asf.HashMap,t.pools=[],t.multiselectIndex=[],t}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._rectSp=new t.Image,this._rectSp.alpha=0,this.addChild(this._rectSp)},Object.defineProperty(n.prototype,"vScrollBarSkin",{get:function(){return egret.superGetter(n,this,"vScrollBarSkin")},set:function(t){egret.superSetter(n,this,"vScrollBarSkin",t),this.vScrollBar&&(this.vScrollBar.autoHide=this._autoHideScrollBar),this.vScrollBar.changeHandler=new asf.CallBack(this.changeScrollBarHandler1,this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hScrollBarSkin",{get:function(){return egret.superGetter(n,this,"hScrollBarSkin")},set:function(t){egret.superSetter(n,this,"hScrollBarSkin",t),this.hScrollBar&&(this.hScrollBar.autoHide=this._autoHideScrollBar),this.hScrollBar.changeHandler=new asf.CallBack(this.changeScrollBarHandler2,this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoHideScrollBar",{get:function(){return this._autoHideScrollBar},set:function(t){this._autoHideScrollBar=t,this.vScrollBar&&(this.vScrollBar.autoHide=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._infoArr.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{set:function(t){this._sourceInfoArr=t.concat(),this.updateList()},enumerable:!0,configurable:!0}),n.prototype.clearAll=function(){this._listMap&&this._listMap.forEach(function(t){this.clearOne(t)},this),this._measureWidth=0,this._measureHeight=0,this._listMap=new asf.HashMap,this._infoArr=[],this._posInfoArr=[]},n.prototype.clearOne=function(t){this._listMap.remove(t.x+"_"+t.y),t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouse,this),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this),t.remove(),t.clearPoolObj(),this.pools.push(t)},n.prototype.onMouse=function(t){if(this.canClickList){var e=t.currentTarget;t.type==egret.TouchEvent.TOUCH_BEGIN?(this.vScrollBar?this.nowScrollValue=this.vScrollBar.value:this.hScrollBar&&(this.nowScrollValue=this.hScrollBar.value),this._beginHandler&&this._beginHandler.execute(e.id),this.clickX=t.stageX,this.clickY=t.stageY):t.type==egret.TouchEvent.TOUCH_TAP&&Math.abs(t.stageX-this.clickX)<10&&Math.abs(t.stageY-this.clickY)<10&&(e.canSelected()&&(this.isMultiselect?this.selectMulti(e.id):this.selectedIndex=e.id,e.clickHandler&&e.clickHandler.execute(t),this.clickHandler&&this.clickHandler.execute(e.id)),t.stopPropagation()),this._mouseHandler&&this._mouseHandler.execute(t,e.id)}},n.prototype.selectMulti=function(t,e){if(void 0===e&&(e=null),-1!=t){var i=this.getSelectedCellByIndex(t);i.canSelected()||(t=this.selectedIndex);var n=this.multiselectIndex.indexOf(t);if(null==e)-1==n?(!this.multiselectCondition||this.multiselectCondition.execute(this.getSelectedInfoByIndex(t)))&&(i&&(i.selected=!0),this.multiselectIndex.push(t)):(i&&(i.selected=!1),this.multiselectIndex.splice(n,1));else if(i&&(i.selected=e),e){var o=!0;for(var r in this.multiselectIndex)this.multiselectIndex[r]==t&&(o=!1);o&&this.multiselectIndex.push(t)}else n>-1&&this.multiselectIndex.splice(n,1)}this.selectedIndex=t},Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex=t,this.updateCellState(this._selectedIndex,!0),this._selectHandler&&this._selectHandler.execute(this._selectedIndex)},enumerable:!0,configurable:!0}),n.prototype.hMoveToSelected=function(){if(-1!=this.selectedIndex){var t=(this.infoArr.length-1)*this.spaceX,e=(this.measureWidth-t)/this.infoArr.length;this.hScrollBar.value=(e+this.spaceX)*this.selectedIndex}},n.prototype.hMoveToIndex=function(t){t=0>t?0:t>=this.infoArr.length?this.infoArr.length-1:t;var e=(this.infoArr.length-1)*this.spaceX,i=(this.measureWidth-e)/this.infoArr.length;this.hScrollBar.value=(i+this.spaceX)*t},n.prototype.getVCurrentIndex=function(){var t=this.vScrollBar.value,e=this.infoArr,i=(e.length-1)*this.spaceY,n=(this.measureHeight-i)/e.length,o=Math.round(t/(n+this.spaceY));return 0>o&&(o=0),o>=e.length&&(o=e.length-1),o},n.prototype.getHCurrentIndex=function(){var t=this.hScrollBar.value,e=this.infoArr,i=(e.length-1)*this.spaceX,n=(this.measureWidth-i)/e.length,o=Math.round(t/(n+this.spaceX));return 0>o&&(o=0),o>=e.length&&(o=e.length-1),o},n.prototype.vMoveToSelected=function(){if(-1!=this.selectedIndex){var t=(this.infoArr.length-1)*this.spaceY,e=(this.measureHeight-t)/this.infoArr.length;this.vScrollBar.value=(e+this.spaceY)*this.selectedIndex}},n.prototype.vMoveToIndex=function(t){t=0>t?0:t>=this.infoArr.length?this.infoArr.length-1:t;var e=(this.infoArr.length-1)*this.spaceY,i=(this.measureHeight-e)/this.infoArr.length;this.vScrollBar.value=(i+this.spaceY)*t},n.prototype.updateInfoByIndex=function(t,e){this._infoArr[t]=e;var i=this.getSelectedCellByIndex(t);i&&(i.dataSource=e)},n.prototype.updateCallbackByIndex=function(t,e,i){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];this._infoArr[t]=e;var r=this.getSelectedCellByIndex(t);r&&r[i]&&r[i].apply(r,n)},n.prototype.getSelectedInfoByIndex=function(t){return this._infoArr.length>t?this._infoArr[t]:null},n.prototype.getCellByXY=function(t,e){return this._listMap.get(t+"_"+e)},n.prototype.getSelectedCellByIndex=function(t){return this._posInfoArr.length>t?this.getCellByXY(this._posInfoArr[t].x,this._posInfoArr[t].y):null},Object.defineProperty(n.prototype,"selectedCell",{get:function(){return this._posInfoArr.length>this._selectedIndex&&this._selectedIndex>=0?this.getCellByXY(this._posInfoArr[this._selectedIndex].x,this._posInfoArr[this._selectedIndex].y):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedInfo",{get:function(){return this._infoArr.length>this._selectedIndex?this._infoArr[this._selectedIndex]:null},enumerable:!0,configurable:!0}),n.prototype.updateMuitState=function(){this.isMultiselect&&this._listMap.forEach(function(t){var e=this.multiselectIndex.indexOf(t.id);t.selected=!1,-1!=e?t.selected=!0:t.selected=!1},this)},n.prototype.updateCellState=function(t,e,i){void 0===i&&(i=""),this.isMultiselect||(this._listMap.forEach(function(n){n.selectedEvent=i,n.selected=!1,n.id==t&&(n.selected=e)},this),this.selectedCell&&(this.selectedCell.selected=!0))},Object.defineProperty(n.prototype,"selectHandler",{set:function(t){this._selectHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"repeatX",{get:function(){return this._repeatX},set:function(t){this._repeatX!=Math.max(t,1)&&(this._repeatX=t,this.callLater(this.updateList,this))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"spaceX",{get:function(){return this._spaceX},set:function(t){this._spaceX!=t&&(this._spaceX=t,this.callLater(this.updateList,this))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"spaceY",{get:function(){return this._spaceY},set:function(t){this._spaceY!=t&&(this._spaceY=t,this.callLater(this.updateList,this))},enumerable:!0,configurable:!0}),n.prototype.removeItemByIndex=function(t){this._sourceInfoArr.splice(t,1),this.updateList()},Object.defineProperty(n.prototype,"itemRender",{set:function(t){this._itemRender&&this._itemRender!=t&&this.clearPool(),this._itemRender=t,this.pools=[],this.clearAll(),this.updateList()},enumerable:!0,configurable:!0}),n.prototype.clearPool=function(){for(var t=0;t<this.pools.length;t++)asf.DestroyUtils.destroy(this.pools[t])},n.prototype.createCell=function(){var t=this.pools.shift();return t||(t=new this._itemRender),t.list=this,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouse,this),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this),t},n.prototype.updateList=function(){if(this._itemRender){var t=0,e=0,n=0,o=new this._itemRender;this.nowCellHeight=o.height,this.nowCellWidth=o.width,this._measureHeight=0,this._measureWidth=0;for(var r=0;r<this._sourceInfoArr.length;r++){null!=this._infoArr[r]&&void 0!=this._infoArr[r]?this._infoArr[r]=this._sourceInfoArr[r]:(this._infoArr[r]=this._sourceInfoArr[r],this._posInfoArr[r]=new i);var s=this._posInfoArr[r];s.data=this._infoArr[r],n<this._repeatX?(s.x=e,s.y=t,this.nowCellHeight=o.height):(n=0,e=0,t+=this.nowCellHeight+this._spaceY,s.x=e,s.y=t),e+=this.nowCellWidth+this._spaceX,n++,this._measureHeight=Math.max(this._measureHeight,t+this.nowCellHeight),this._measureWidth=Math.max(this._measureWidth,e-this._spaceX)}var a=this._infoArr.length-this._sourceInfoArr.length;if(a>0){this._infoArr.splice(this._sourceInfoArr.length);for(var s,h=this._posInfoArr.splice(this._sourceInfoArr.length),l=0,c=h;l<c.length;l++){s=c[l];var u=this.getCellByXY(s.x,s.y);u&&this.clearOne(u)}}this._rectSp.height=this._measureHeight,this._rectSp.width=this._measureWidth,this.updateVisualRange(0,0,!0),this.isAutoBottom?(asf.App.render.renderAll(),this.scrollTo(0,this._measureHeight+999)):this.refresh(),o.destroy()}},n.prototype.changeScrollBarHandler1=function(){var t=this.vScrollBar?this.vScrollBar.value:0,e=this.hScrollBar?this.hScrollBar.value:0;this.updateVisualRange(e,t),this.scrollChangeHandler&&this.scrollChangeHandler.execute(this.vScrollBar.value)},n.prototype.changeScrollBarHandler2=function(){var t=this.vScrollBar?this.vScrollBar.value:0,e=this.hScrollBar?this.hScrollBar.value:0;this.updateVisualRange(e,t),this.scrollChangeHandler&&this.scrollChangeHandler.execute(this.hScrollBar.value)},n.prototype.updateVisualRange=function(t,e,i){void 0===i&&(i=!1);var n=Math.floor(t/(this.nowCellWidth+this._spaceX)),o=Math.floor(e/(this.nowCellHeight+this._spaceY));if(i||n!=this._nowShowPosX||o!=this._nowShowPosY){this._nowShowPosX=n,this._nowShowPosY=o;for(var r=this._posInfoArr.length,s=0;r>s;s++){var a,h=this._posInfoArr[s].y-e,l=this._posInfoArr[s].x-t,c=this._posInfoArr[s].x+"_"+this._posInfoArr[s].y;h+this.nowCellHeight+this._spaceY>=-(this.nowCellHeight+this._spaceY)&&h<=this.height+(this.nowCellHeight+this._spaceY)&&l+this.nowCellWidth+this._spaceX>=0&&l<=this.width?(this._listMap.hasKey(c)||(a=this.createCell(),a.x=this._posInfoArr[s].x,a.y=this._posInfoArr[s].y,this._listMap.put(c,a)),a=this._listMap.get(c),a.id=s,this.addChildAt(a,a.id),a.dataSource=this._posInfoArr[s].data):(a=this._listMap.get(c),a&&this.clearOne(a))}this.updateCellState(this._selectedIndex,!0),this.updateMuitState()}},Object.defineProperty(n.prototype,"isAutoHight",{get:function(){return this._isAutoHight},set:function(t){this._isAutoHight=t,this.callLater(this.updateList,this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mouseHandler",{set:function(t){this._mouseHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clickHandler",{get:function(){return this._clickHandler},set:function(t){this._clickHandler=t},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this._clickHandler=null,this._mouseHandler&&this._mouseHandler.destroy(),this._mouseHandler=null,this._selectHandler&&this._selectHandler.destroy(),this._selectHandler=null,this.clearAll(),this.clearPool(),this._listMap=null,this._infoArr=null,this._itemRender=null,this._rectSp&&(this._rectSp.destroy(),this._rectSp=null),this.removeLater(this.updateList,this),this.scrollChangeHandler&&(this.scrollChangeHandler=null),this.multiselectIndex=null,this.multiselectCondition=null,e.prototype.destroy.call(this)},Object.defineProperty(n.prototype,"isMeasureHeight",{get:function(){return this._isMeasureHeight},set:function(t){this._isMeasureHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"infoArr",{get:function(){return this._infoArr},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measureWidth",{get:function(){return this._measureWidth},set:function(t){this._measureWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measureHeight",{get:function(){return this._measureHeight},enumerable:!0,configurable:!0}),n}(t.Panel);t.ListBox=e,__reflect(e.prototype,"morn.ListBox");var i=function(){function t(){}return t}();t.ListBoxPosInfo=i,__reflect(i.prototype,"morn.ListBoxPosInfo")}(morn||(morn={}));var morn;!function(t){var e=asf.GameFilter,i=function(i){function n(){var t=i.call(this)||this;return t._selected=!1,t._selectedEvent="",t.enable=!0,t}return __extends(n,i),Object.defineProperty(n.prototype,"enable",{get:function(){return this._enable},set:function(t){this._enable=t,t?(this._clickHandler||(this._clickHandler=new asf.CallBack(this.onClickHandler,this)),this.filters=[]):(this._clickHandler=null,this.filters=[e.GrayFilter])},enumerable:!0,configurable:!0}),n.prototype.createChildren=function(){},n.prototype.canSelected=function(){return!0},Object.defineProperty(n.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clickHandler",{get:function(){return this._clickHandler},enumerable:!0,configurable:!0}),n.prototype.onClickHandler=function(t){},n.prototype.destroy=function(){this._itemClickHandler&&this._itemClickHandler.destroy(),this._itemClickHandler=null,this._clickHandler&&this._clickHandler.destroy(),this._clickHandler=null,this._skin&&this._skin.remove(),this._skin=null,this.list=null,i.prototype.destroy.call(this)},Object.defineProperty(n.prototype,"itemClickHandler",{set:function(t){this._itemClickHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedEvent",{set:function(t){this._selectedEvent=t},enumerable:!0,configurable:!0}),n.prototype.remove=function(){i.prototype.remove.call(this),this.enable=!0},n.prototype.clearPoolObj=function(){""!=this._guide&&t.GuideMgr.getInstance().remove(this._guide),this._guide=""},n}(t.Box);t.ListBoxBaseItem=i,__reflect(i.prototype,"morn.ListBoxBaseItem")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.realWidth=0,t.clipVec=[],t.textureArr=[],t.clipContainerVec=[],t}return __extends(i,e),i.prototype.preinitialize=function(){e.prototype.preinitialize.call(this),this._interval=0,this._value="0",this._align="left"},i.prototype.destroy=function(){this._skin=null,this._align=null,this.loadedCallback=null;for(;this.clipContainerVec.length>0;){var t=this.clipContainerVec.pop();t.parent&&t.parent.removeChild(t)}for(this.clipContainerVec=null;this.clipVec.length>0;){var i=this.clipVec.pop();i.parent&&i.parent.removeChild(i),i.dispose()}this.clipVec=null,this.textureArr=null,this.removeLater(this.changeClip,this),e.prototype.destroy.call(this)},Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){if(t&&this._skin!=t){this._skin=t;var e=RES.getRes(this._skin);e?this.setBitmapData(e,this.skin):RES.getResByUrl(this._skin,this.setBitmapData,this,RES.ResourceItem.TYPE_IMAGE)}},enumerable:!0,configurable:!0}),i.prototype.setBitmapData=function(e,i){this._skin==i&&(this.textureArr=t.TextureUtils.cut2(e,10,!0),this.changeClip(),this.loadedCallback&&this.loadedCallback.execute())},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){var e,i=!1;asf.TypeofUtils.isString(t)?e=String(t):asf.TypeofUtils.isNumber(t)?e=String(Math.abs(t)):i=!0,i?console.log("NumberLine的value方法参数有误"+typeof t):this._value!=e&&(this._value=e,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interval",{get:function(){return this._interval},set:function(t){this._interval!=t&&(this._interval=t,this.changeClip())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.changeClip())},enumerable:!0,configurable:!0}),i.prototype.changeClip=function(){if(this._skin){var e=this._value.split(""),i=e.length,n=this.clipVec.length,o=0;for(o=0;i>o;o+=1)if(n>o){this.clipVec[o].textureForKey(this.textureArr[Number(e[o])],this._skin),this.clipVec[o].height=this.textureArr[Number(e[o])].textureHeight,this.clipVec[o].width=this.textureArr[Number(e[o])].textureWidth;var r=this.clipVec[o].width/2,s=this.clipVec[o].height/2;this.clipVec[o].x=-r,this.clipVec[o].y=-s,this.clipVec[o].visible=!0}else{var a=new t.AutoBitmap;this.clipVec.push(a),a.textureForKey(this.textureArr[Number(e[o])],this._skin);var h=new t.Sprite;this.clipContainerVec.push(h),h.addChild(a),this.addChild(h);var r=a.width/2,s=a.height/2;a.x=-r,a.y=-s}for(o=i;o<this.clipVec.length;o+=1)this.clipVec[o].visible=!1;var l=this.clipVec[0].width,c=(i-1)*this.interval+i*l;for(o=0;i>o;o+=1)"center"==this.align?this.clipContainerVec[o].x=o*(l+this.interval)-c/2+l/2:"right"==this.align?this.clipContainerVec[o].x=o*(l+this.interval)-c+l:this.clipContainerVec[o].x=o*(l+this.interval);this.realWidth=c}},Object.defineProperty(i.prototype,"width",{get:function(){var t=this._value.split(""),e=t.length,i=this.clipVec[0].width,n=(e-1)*this.interval+e*i;return this.realWidth=n,this.realWidth},set:function(t){egret.superSetter(i,this,"width",t)},enumerable:!0,configurable:!0}),i}(t.Component);t.NumberLine=e,__reflect(e.prototype,"morn.NumberLine")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.preinitialize=function(){e.prototype.preinitialize.call(this),this._size=12,this._interval=0},i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.prevBtn=new t.Button,this.addChild(this.prevBtn),this.nextBtn=new t.Button,this.addChild(this.nextBtn),this.text=new t.Label,this.text.align="center",this.text.width=50,this.text.height=15,this.addChild(this.text),this.prevBtn.touchEnabled=!0,this.nextBtn.touchEnabled=!0,this.prevBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.initialize=function(){e.prototype.initialize.call(this),this.touchChildren=!0,this._totalPage=1,this._curPage=1,this.callLater(this.changePage,this)},i.prototype.destroy=function(){this.prevBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nextBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.prevBtn.remove(),this.prevBtn.destroy(),this.prevBtn=null,this.nextBtn.remove(),this.nextBtn.destroy(),this.nextBtn=null,this.text.remove(),this.text.destroy(),this.text=null,this.changePageCallBack=null,this._skin=null,this.changePageCallBackArg=null,this.removeLater(this.changePage,this),e.prototype.destroy.call(this)},i.prototype.setChangePageCallBack=function(t,e){void 0===e&&(e=null),this.changePageCallBack=t,this.changePageCallBackArg=e},Object.defineProperty(i.prototype,"interval",{get:function(){return this._interval},set:function(t){this._interval!=t&&(this._interval=t,this.callLater(this.changePosition,this))},enumerable:!0,configurable:!0}),i.prototype.changePosition=function(){this.nextBtn.x=this.prevBtn.x+this.prevBtn.width+this.interval,this.text.width=this.interval,this.text.height=this.prevBtn.height,this.text.x=this.prevBtn.x+this.prevBtn.width},i.prototype.changeSkin=function(){this.skin&&(this.prevBtn.skin=this.skin+"$prevBtn",this.nextBtn.skin=this.skin+"$nextBtn",this.callLater(this.changePosition,this))},Object.defineProperty(i.prototype,"curPage",{get:function(){return this._curPage},set:function(t){t>0&&t<=this.totalPage&&(this._curPage=t,this.callLater(this.changePage,this),this.changePageCallBack&&this.changePageCallBack.execute(this.changePageCallBackArg))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"totalPage",{get:function(){return this._totalPage},set:function(t){t>0&&(this._totalPage=t,this._totalPage<this._curPage&&(this._curPage=this._totalPage),this.callLater(this.changePage,this),this.changePageCallBack&&this.changePageCallBack.execute(this.changePageCallBackArg))},enumerable:!0,configurable:!0}),i.prototype.changePage=function(){this.text.text=this.curPage+"/"+this.totalPage,1==this.curPage?this.prevBtn.disabled=!0:this.prevBtn.disabled=!1,this.curPage==this.totalPage?this.nextBtn.disabled=!0:this.nextBtn.disabled=!1},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},set:function(t){this._size!=t&&(this._size=t,this.text.size=this._size,this.callLater(this.changePosition,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skin",{get:function(){return this._skin},set:function(t){t&&this._skin!=t&&(this._skin=t,this.callLater(this.changeSkin,this))},enumerable:!0,configurable:!0}),i.prototype.onClick=function(t){switch(t.currentTarget){case this.prevBtn:this.curPage--;break;case this.nextBtn:this.curPage++}},i}(t.Component);t.PageBar=e,__reflect(e.prototype,"morn.PageBar")}(morn||(morn={}));var asf;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.containerMap=new t.HashMap,i}return __extends(i,e),i.prototype.on=function(t,e,i,n,o){this.addEventListener(t,e,i,n,o)},i.prototype.off=function(t,e,i,n){this.removeEventListener(t,e,i,n)},i.prototype.isEmptyContainer=function(t){return this.containerMap.hasKey(t)},i.prototype.setContainers=function(t){for(var e=0;e<t.length;e++){var i=new egret.Sprite;i.name=String(t[e]),this.addChild(i),this.containerMap.put(String(t[e]),i)}},i.prototype.getChildContainer=function(t,e){if(void 0===e&&(e=!1),t=String(t),this.containerMap.hasKey(t))return this.containerMap.get(t);var i=new egret.Sprite;return this.addChild(i),this.containerMap.put(t,i),i},i.prototype.addContainerChild=function(t,e,i){void 0===i&&(i=-1);var n=this.containerMap.get(t);if(!n)throw new Error("容器"+t+"出现为空");return n.addChild(e),n.getChildIndex(e)},i.prototype.removeContainerChild=function(t,e){if(null!=e){var i=this.containerMap.get(e);if(t)t.parent==i&&i.removeChild(t);else for(var n=0;n>=0;)try{i.removeChild(i.getChildAt(n)),n++}catch(o){break}}else for(var r=this.containerMap.values(),s=0;s<r.length;s++)if(t.parent==r[s]){r[s].removeChild(t);break}},i.prototype.addContainer=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=-1),null==this.containerMap.get(t)&&(e||(e=new egret.Sprite),-1==i?this.addChild(e):this.addChildAt(e,i),this.containerMap.put(t,e))},i.prototype.removeContainer=function(t){var e=this.containerMap.get(t);return e?(this.containerMap.remove(t),this.removeChild(e)):null},i.prototype.getContainer=function(){return this},i.prototype.destroy=function(t){for(var e=this.containerMap.values(),i=0;i<e.length;i++)for(var n=e[i],o=0;o<n.numChildren;o++)n.removeChildAt(o)},i}(egret.Sprite);t.Containers=e,__reflect(e.prototype,"asf.Containers",["asf.IContainers","asf.IDestory"])}(asf||(asf={}));var morn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.preinitialize=function(){t.prototype.preinitialize.call(this),this._toggle=!1,this._autoSize=!1},e.prototype.initialize=function(){t.prototype.initialize.call(this),this._btnLabel.autoSize="left",this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.changeLabelSize=function(){this.exeCallLater(this.changeClips,this),this._btnLabel.x=this._bitmap.width+this._labelMargin[0],this._btnLabel.y=.5*(this._bitmap.height-this._btnLabel.height)+this._labelMargin[1],this._contentWidth=this._btnLabel.x+this._btnLabel.width},e.prototype.commitMeasure=function(){this.exeCallLater(this.changeLabelSize,this)},e.prototype.onClick=function(t){this.selected=!0},Object.defineProperty(e.prototype,"value",{get:function(){return null!=this._value?this._value:this.label},set:function(t){this._value=t},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._value&&(this._value=null),t.prototype.destroy.call(this)},e}(t.Button);t.RadioButton=e,__reflect(e.prototype,"morn.RadioButton")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._direction=i.HORIZENTAL,t}return __extends(i,e),i.prototype.createItem=function(e,i){var n=new t.RadioButton;return n.skin=e,n.ansTime=0,n.label=i,n},i.prototype.changeLabels=function(){if(this._items)for(var t=0,e=0,n=this._items.length;n>e;e++){var o=this._items[e],r=o;this._skin&&(r.skin=this._skin),this._labelColors&&(r.labelColors=this._labelColors),this._labelStroke&&(r.labelStroke=this._labelStroke),this._labelSize&&(r.labelSize=this._labelSize),this._labelBold&&(r.labelBold=this._labelBold),this._labelMargin&&(r.labelMargin=this._labelMargin),this._direction==i.HORIZENTAL?(r.y=0,r.x=t,t+=r.width+this._space):(r.x=0,r.y=t,t+=r.height+this._space)
}},Object.defineProperty(i.prototype,"selectedValue",{get:function(){var t=this._items[this._selectedIndex];return this._selectedIndex>-1&&this._selectedIndex<this._items.length?t.value:null},set:function(t){if(this._items)for(var e=0,i=this._items.length;i>e;e++){var n=this._items[e],o=n;if(o.value==t){this.selectedIndex=e;break}}},enumerable:!0,configurable:!0}),i.prototype.getRadioBtn=function(t){return this.getChildAt(t)},i.HORIZENTAL="horizontal",i.VERTICAL="vertical",i}(t.Group);t.RadioGroup=e,__reflect(e.prototype,"morn.RadioGroup")}(morn||(morn={}));var morn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.__alpha=1,e._color=16777215,e}return __extends(e,t),e.prototype.preinitialize=function(){t.prototype.preinitialize.call(this),this.mouseEnabled=this.mouseChildren=!0,this.width=30,this.height=30},e.prototype.commitMeasure=function(){this.exeCallLater(this.draw,this)},Object.defineProperty(e.prototype,"width",{get:function(){return egret.superGetter(e,this,"width")},set:function(t){egret.superSetter(e,this,"width",t),this.callLater(this.draw,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return egret.superGetter(e,this,"height")},set:function(t){egret.superSetter(e,this,"height",t),this.callLater(this.draw,this)},enumerable:!0,configurable:!0}),e.prototype.draw=function(){var t=this.graphics;t.clear(),t.lineStyle(0,0,0),t.beginFill(this._color,this.__alpha),t.drawRect(0,0,this.width,this.height),t.endFill()},Object.defineProperty(e.prototype,"alpha",{get:function(){return this.__alpha},set:function(t){this.__alpha=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.draw()},enumerable:!0,configurable:!0}),e}(t.Component);t.ShapeMc=e,__reflect(e.prototype,"morn.ShapeMc")}(morn||(morn={}));var morn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._infoArr=[],e._itemArr=[],e._selectedIndex=-1,e._cells=[],e}return __extends(e,t),e.prototype.initialize=function(){this.init()},e.prototype.init=function(t){if(this._itemArr)for(var e=0;e<this._itemArr.length;e++)this._itemArr[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this);this._infoArr=null,this._itemArr=null,this._itemrender=t,this.initItem()},e.prototype.initItem=function(){var t,e=0;for(this._itemArr=[],this._infoArr=[];;){if(t=this.getChildByName("item"+e),!t)break;t.tag=e,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this),this._itemArr.push(t),e++}},e.prototype.onMouse=function(t){var e=t.currentTarget,i=e;t.type==egret.TouchEvent.TOUCH_TAP&&(this.selectedIndex=Number(i.tag))},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex=t,this.updateCellState(this._selectedIndex,!0),this._selectHandler&&this._selectHandler.execute(this._selectedIndex)},enumerable:!0,configurable:!0}),e.prototype.updateCellState=function(t,e,i){void 0===i&&(i="");for(var n=0;n<this._cells.length;n++)n==t?this._cells[n].selected=!0:this._cells[n].selected=!1;if(this._selectRenderHandler)for(var n=0;n<this._itemArr.length;n++)n==t?this._selectRenderHandler.execute(this._itemArr[n],!0):this._selectRenderHandler.execute(this._itemArr[n],!1)},Object.defineProperty(e.prototype,"dataSource",{set:function(t){this._infoArr=t;for(var e=0;e<this._infoArr.length;e++)this._itemArr[e]&&this.updateInfoByIndex(e,this._infoArr[e])},enumerable:!0,configurable:!0}),e.prototype.updateInfoByIndex=function(t,e){this._infoArr[t]=e;var i=this.getSelectedCellByIndex(t);if(this.renderHanlder)this.renderHanlder.execute(i,e);else{var n=this._cells[i.tag];n||(n=new this._itemrender(i),this._cells[i.tag]=n),n.dataSource=e}},Object.defineProperty(e.prototype,"selectHandler",{get:function(){return this._selectHandler},set:function(t){this._selectHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderHanlder",{get:function(){return this._renderHanlder},set:function(t){this._renderHanlder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectRenderHandler",{get:function(){return this._selectRenderHandler},set:function(t){this._selectRenderHandler=t},enumerable:!0,configurable:!0}),e.prototype.getSelectedInfoByIndex=function(t){return this._infoArr.length>t?this._infoArr[t]:null},e.prototype.getSelectedCellByIndex=function(t){return this._itemArr.length>t?this._itemArr[t]:null},Object.defineProperty(e.prototype,"selectedCell",{get:function(){return this._itemArr.length>this._selectedIndex?this._itemArr[this._selectedIndex]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedInfo",{get:function(){return this._infoArr.length>this._selectedIndex?this._infoArr[this._selectedIndex]:null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){for(var e=0;e<this._itemArr.length;e++)this._itemArr[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this);this._infoArr=null,this._itemArr=null;for(var e=0;e<this._cells.length;e++)this._cells[e].destroy();this._cells=null,this._renderHanlder&&this._renderHanlder.destroy(),this._selectRenderHandler&&this._selectRenderHandler.destroy(),this._selectHandler&&this._selectHandler.destroy(),this._renderHanlder=null,this._selectHandler=null,this._selectRenderHandler=null,t.prototype.destroy.call(this)},e}(t.Box);t.SimpleList=e,__reflect(e.prototype,"morn.SimpleList");var i=function(){function t(t){this._selected=!1,this._skin=t,this.init()}return Object.defineProperty(t.prototype,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),t.prototype.init=function(){},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{set:function(t){},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){},t}();t.SimpleListItem=i,__reflect(i.prototype,"morn.SimpleListItem")}(morn||(morn={}));var asf;!function(t){var e=function(t){function e(e,i,n,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1);var r=t.call(this,e,i,n)||this;return r.alpha=1,r.alpha=o,r}return __extends(e,t),e.prototype.getHex32=function(){var t=this.getHex24(),e=t/268435456;return(16777215&t)+268435456*Math.floor(this.alpha*e)},e.prototype.applyAlpha=function(t){return this.alpha=t,this.getHex32()},e.prototype.clone=function(){return new e(this.red,this.green,this.blue,this.alpha)},e.prototype.toString=function(){return"red:"+this.red+"  green:"+this.green+"  blue:"+this.blue+"  alpha:"+this.alpha},e}(t.RgbColor);t.RgbaColor=e,__reflect(e.prototype,"asf.RgbaColor")}(asf||(asf={}));var game;!function(t){var e=function(){function t(){}return t.SOCEKT_OPEN="socketOpen",t.SOCEKT_CLOSE="socketClose",t.SOCEKT_ERROR="socketError",t.Scene_To_Fight="Scene_To_Fight",t.Fight_CastSkill="Fight_CastSkill",t.Scene_Auto_Fight="Scene_Auto_Fight",t.Scene_On_Entity_Die="Scene_On_Entity_Die",t.Scene_Entity_Remove="Scene_Entity_Remove",t.Scene_Entity_Add="Scene_Entity_Add",t.Scene_Entity_Remove_Complete="Scene_Entity_Remove_Complete",t.Scene_Confirm="Scene_Confirm",t.Scene_Npc_Add="Scene_Npc_Add",t.Scene_Hp_Change="Scene_Hp_Change",t.Scene_Hero_Hp_Change="Scene_Hero_Hp_Change",t.Hero_weapon_Change="Hero_weapon_Change",t.Scene_TASK_MONSTER="Scene_TASK_MONSTER",t.Scene_Hero_Spring_Change="Scene_Hero_Spring_Change",t.Scene_Hero_Move_End="Scene_Hero_Move_End",t.Scene_Hero_Move_Begin="Scene_Hero_Move_Begin",t.Scene_Hero_Move_Begin_Optimize="Scene_Hero_Move_Begin_Optimize",t.Scene_On_Hero_Move_Tile="Scene_On_Hero_Move_Tile",t.Hero_Fight_Action_End="Hero_Fight_Action_End",t.Hero_Fight_Double_Hit_End="Hero_Fight_Double_Hit_End",t.Hero_Try_Fight="Hero_Try_Fight",t.Scene_Hero_Die="Scene_Hero_Die",t.Scene_Hero_Revive="Scene_Hero_Revive",t.Scene_To_Collection="Scene_To_Collection",t.Scene_Begin_Collection="Scene_Begin_Collection",t.Scene_Break_Collection="Scene_Break_Collection",t.Scene_End_Collection="Scene_End_Collection",t.Hero_Pet_Fight_Action_End="Hero_Pet_Fight_Action_End",t.Hero_inSaveArea="Hero_inSaveArea",t}();t.CoreNotice=e,__reflect(e.prototype,"game.CoreNotice")}(game||(game={}));var morn;!function(t){var e=function(){function t(){}return t.defaultSizeGrid=["4","4","4","4","0"],t.fontName="微软雅黑",t.fontSize=12,t.embedFonts=!1,t.labelColor=0,t.labelMargin=["0","0","0","0"],t.buttonStateNum=3,t.buttonLabelColors=[3298667,3298667,3298667,12632256],t.buttonLabelMargin=[0,0,0,0],t.buttonLabelStrokes=[0,0,0],t.buttonLabelStrokeColors=[0,0,0],t.linkLabelColors=[32960,16744448,8388608,12632256],t.comboBoxItemColors=[6198710,16777215,0,9413809,16777215],t.comboBoxItemHeight=22,t.scrollBarMinNum=15,t.scrollBarDelayTime=500,t.tipTextColor=0,t.tipBorderColor=12632256,t.tipBgColor=16777215,t.smoothing=!1,t}();t.Styles=e,__reflect(e.prototype,"morn.Styles")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isHidelevelLimit=!1,t._direction=i.HORIZENTAL,t}return __extends(i,e),i.prototype.preinitialize=function(){this._requires=[],this.touchChildren=this.touchEnabled=!0},i.prototype.createItem=function(e,i){var n=new t.Button;return n.skin=e,n.label=i,n},i.prototype.addRequire=function(t,e){this._requires[t]=e;var i=this._items[t];e?e.execute()?i.visible=!0:i.visible=!1:i.visible=!0},i.prototype.delItemById=function(t){this.delItem(this._items[t])},i.prototype.btnNames=function(t){for(var e=0;e<this._items.length;e++){var i=this._items[e];i&&e<t.length&&(i.label=t[e])}},i.prototype.updateRequire=function(){if(this._items)for(var t=-1,e=0,i=this._items.length;i>e;e++){var n=this._items[e];n.visible&&(t++,this.changeBtnX(n,t))}},i.prototype.changeBtnX=function(t,e){t.x=(t.width+this.space)*e},i.prototype.changeLabels=function(){if(this._items)for(var t=0,e=0,n=this._items.length;n>e;e++){var o=this._items[e];this._skin&&(o.skin=this._skin),this._labelColors&&(o.labelColors=this._labelColors),this._labelStroke&&(o.labelStroke=this._labelStroke),this._labelSize&&(o.labelSize=this._labelSize),this._labelBold&&(o.labelBold=this._labelBold),this._labelMargin&&(o.labelMargin=this._labelMargin,o.labelMargin2=this._labelMargin2),this._direction==i.HORIZENTAL?(o.y=0,o.x=t,t+=o.width+this._space):(o.x=0,o.y=t,t+=o.height+this._space)}},i.prototype.destroy=function(){this._requires=null,e.prototype.destroy.call(this)},i.HORIZENTAL="horizontal",i.VERTICAL="vertical",i}(t.Group);t.Tab=e,__reflect(e.prototype,"morn.Tab")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(t,i){void 0===t&&(t=""),void 0===i&&(i=null);var n=e.call(this)||this;return n.initialize(),n.text=t,n}return __extends(i,e),Object.defineProperty(i.prototype,"isHtml",{get:function(){var t=this;return t._isHtml},set:function(t){var e=this;e._isHtml!=t&&(e._isHtml=t,e.onTextFieldChange())},enumerable:!0,configurable:!0}),i.prototype.initialize=function(){var e=this;this.setFocus(),e.fontFamily="方正艺黑简体",e.inputType=egret.TextFieldType.INPUT,e.touchEnabled=!0,e.width=128,e.height=42,e.color=t.Styles.labelColor,e.maxChars=999,e.type=egret.TextFieldType.INPUT,e.addEventListener(egret.Event.CHANGE,e.onTextFieldChange,e),e.addEventListener(egret.Event.FOCUS_OUT,e.onTextStateChanged,e),e.addEventListener(egret.Event.FOCUS_IN,e.onTextStateChanged,e),egret.Capabilities.isMobile&&"Android"==egret.Capabilities.os&&e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTextStateChanged,e),e.onTextFieldChange()},Object.defineProperty(i.prototype,"color",{get:function(){var t=this;return t.textColor},set:function(t){var e=this;e.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{set:function(t){t&&(this.textAlign=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"margin",{set:function(t){if(t){var e=t.split(",")[1];e&&Number(e)>0&&(this.verticalAlign=egret.VerticalAlign.MIDDLE)}},enumerable:!0,configurable:!0}),i.prototype.onTextStateChanged=function(t){var e=t.type;if(e==egret.Event.FOCUS_IN)this.text==this.tiplabel&&(this.text="");else if(e==egret.Event.FOCUS_OUT)""==this.text&&(this.text=this.tiplabel);else if(e==egret.TouchEvent.TOUCH_TAP){this.setFocus();var i=document.documentElement.clientWidth,n=document.documentElement.clientHeight;document.body.style.width=i+"px",document.body.style.height=n+"px"}},i.prototype.onTextFieldTextInput=function(t){},i.prototype.onTextFieldChange=function(){var t=this;t.textChangeCallback&&t.textChangeCallback.execute()},Object.defineProperty(i.prototype,"editable",{get:function(){return this.type==egret.TextFieldType.INPUT},set:function(t){this.type=t?egret.TextFieldType.INPUT:egret.TextFieldType.DYNAMIC},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tiplabel",{get:function(){return this._tipLabel},set:function(t){this._tipLabel=t,this.text=t},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this.textChangeCallback=null,this&&this.removeEventListener(egret.Event.CHANGE,this.onTextFieldChange,this)},i}(egret.TextField);t.TextInput=e,__reflect(e.prototype,"morn.TextInput")}(morn||(morn={}));var game;!function(t){var e=function(){function t(){}return t}();t.GameReady=e,__reflect(e.prototype,"game.GameReady")}(game||(game={}));var morn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._selectedIndex=-1,e}return __extends(e,t),e.prototype.preinitialize=function(){t.prototype.preinitialize.call(this)},e.prototype.setItems=function(t){this.removeAllChild();for(var e=0,i=0,n=t.length;n>i;i++){var o=t[i];o&&(o.name="item"+e,this.addChild(o),e++)}this.initItems()},e.prototype.addItem=function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()},e.prototype.initItems=function(){this._items=[];for(var t=0;t<Number.MAX_VALUE;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex=t,this.setSelect(this._selectedIndex),this._setIndexHandler&&this._setIndexHandler.execute(this._selectedIndex)},enumerable:!0,configurable:!0}),e.prototype.setSelect=function(t){if(this._items)for(var e=0,i=this._items;e<i.length;e++){var n=i[e];n==this._items[t]?n.visible=!0:n.visible=!1}},Object.defineProperty(e.prototype,"selection",{get:function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},set:function(t){this.selectedIndex=this._items.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setIndexHandler",{get:function(){return this._setIndexHandler},set:function(t){this._setIndexHandler=t},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(t){this.selectedIndex=t},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{set:function(t){this._dataSource=t,t instanceof Number||t instanceof String?this.selectedIndex=Number(t):egret.superSetter(e,this,"dataSource",t)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._items.length=0,this._items=null,null!=this._setIndexHandler&&(this._setIndexHandler=null),t.prototype.destroy.call(this)},e}(t.Box);t.ViewStack=e,__reflect(e.prototype,"morn.ViewStack")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this._slider.direction=t.ScrollBar.VERTICAL},i}(t.ScrollBar);t.VScrollBar=e,__reflect(e.prototype,"morn.VScrollBar")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.preinitialize=function(){e.prototype.preinitialize.call(this),this.direction=t.Slider.VERTICAL},i}(t.Slider);t.VSlider=e,__reflect(e.prototype,"morn.VSlider")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.nowSelectMainIndex=-1,t.nowSelectSubIndex=-1,t}return __extends(i,e),i.prototype.preinitialize=function(){this._container=new t.Box,this.addChild(this._container)},i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._treeVs=new t.TreeListMain(this._viewWidth,this._viewHeight),this._treeVs.tree=this,this._treeVs.rendViewHandle=asf.CallBack.create(function(){this.updateScrollBar()},this),this._container.addChild(this._treeVs),this.mouseChildren=this.mouseEnabled=!0},Object.defineProperty(i.prototype,"selectHandler",{set:function(t){this._selectHandler=t,this._treeVs.selectHandler=this._selectHandler},enumerable:!0,configurable:!0}),i.prototype.setOnlyOpenOne=function(t){this._treeVs.setOnlyOpenOne(t)},i.prototype.getViewHeight=function(){return this._treeVs.getViewHeight()},i.prototype.setMustOpenOne=function(t){this._treeVs.mustOpenOne=t},i.prototype.setOpenSelectFirst=function(t){this._treeVs.openSelectFirst=t},i.prototype.setMainItemRender=function(t){this._treeVs.mainItemRender=t},i.prototype.addItem=function(t){this._treeVs.addItem(t)},i.prototype.setContentData=function(t){this._treeVs.setContentData(t)},i.prototype.initMainData=function(t){this._treeVs.initMainData(t)},i.prototype.updatetMainData=function(t){this._treeVs.updatetMainData(t)},i.prototype.updatetMainDataByIndex=function(t,e){this._treeVs.updatetMainDataByIndex(t,e)},i.prototype.cancelContentSelect=function(){this._treeVs.cancelContentSelect()},i.prototype.removeAllItem=function(){this._treeVs.removeAllItem()},i.prototype.removeItem=function(t,e){void 0===e&&(e=!1),this._treeVs.removeItem(t,e)},i.prototype.removeItemByIndex=function(t,e){void 0===e&&(e=!1),this._treeVs.removeItemByIndex(t,e)},i.prototype.getItem=function(t){return this._treeVs.getItem(t)},i.prototype.setSelectIndex=function(t){this._treeVs.setSelectIndex(t)},i.prototype.setCloseTreeIndex=function(t){this._treeVs.setCloseTreeIndex(t)},i.prototype.removeTreeIndex=function(t,e){void 0===e&&(e=-1),this._treeVs.removeTreeIndex(t,e)},i.prototype.updateTreeIndex=function(t,e){void 0===e&&(e=-1),this._treeVs.updateTreeIndex(t,e)},i.prototype.getTreeInfoIndex=function(t,e){return void 0===e&&(e=-1),this._treeVs.getTreeInfoIndex(t,e)},i.prototype.openTreeIndex=function(t,e){void 0===e&&(e=-1),this._treeVs.openTreeIndex(t,e)},i.prototype.renderView=function(){this._treeVs.renderView()},Object.defineProperty(i.prototype,"width",{get:function(){return egret.superGetter(i,this,"width")},set:function(t){egret.superSetter(i,this,"width",t),this._treeVs&&this._treeVs.setViewWidth(t),this.callLater(this.changeCells,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return egret.superGetter(i,this,"height")},set:function(t){egret.superSetter(i,this,"height",t),this._treeVs&&this._treeVs.setViewHeight(t),this.callLater(this.changeCells,this)},enumerable:!0,configurable:!0}),i.prototype.changeCells=function(){this._scrollBar&&(this._scrollBar.height=this.height,this._scrollBar.x=this.width-this._scrollBar.width)},i.prototype.getScrollBar=function(){return this._scrollBar},Object.defineProperty(i.prototype,"vScrollBarSkin",{get:function(){return this._scrollBar.skin},set:function(e){this.removeChildByName("scrollBar"),this._scrollBar=new t.VScrollBar,this._scrollBar.skin=e,this._scrollBar.addEventListener(egret.Event.CHANGE,this.onScrollBarChange,this),this.initScrollBar()},enumerable:!0,configurable:!0}),i.prototype.initScrollBar=function(){this._scrollBar.name="scrollBar",this.addChild(this._scrollBar),this._scrollBar.foreverHide=!0,this._scrollBar.autoHide=!0,this._scrollBar.target=this._treeVs},i.prototype.updateScrollBar=function(){var t=this._container.height,e=this._treeVs.getViewHeight(),i=this._treeVs.getViewWidth();this._scrollBar.thumbPercent=e/t,this._scrollBar.setScroll(0,t-e,this._scrollBar.value),this._treeVs.scrollRect=new egret.Rectangle(0,0,i,e),this._scrollBar.upDataScrollShow(),this._scrollBar.value>=this._scrollBar.max&&this._scrollBar.upDataTargetContent()},i.prototype.onScrollBarChange=function(e){var i=this._treeVs.scrollRect;if(i){var n=e.currentTarget,o=Math.round(n.value);n.direction==t.ScrollBar.VERTICAL?i.y=o:i.x=o,this._treeVs.scrollRect=i}},i.prototype.destroy=function(){this._treeVs.destroy(),this._selectHandler&&this._selectHandler.destroy(),this._selectHandler=null,this._scrollBar&&(this._scrollBar.parent&&this.removeChild(this._scrollBar),this._scrollBar.destroy(),this._scrollBar=null),e.prototype.destroy.call(this)},i}(t.Box);t.TreeList=e,__reflect(e.prototype,"morn.TreeList")}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._contentViewHeight=0,t._contentViewWidth=0,t._contentMeasureHeight=0,t._select=!1,t._notOpen=!1,t._selectIndex=-1,t.clickX=0,t.clickY=0,t}return __extends(i,e),i.prototype.init=function(){if(null==this._skin)throw new Error("要先new 一个bar对象");this.addChild(this._skin),this._contentMc=new egret.Sprite,this._contentMc.y=this._skin.height,this.addChild(this._contentMc),this._contentMask=new t.ShapeMc,this._contentMask.y=this._contentMc.y,this._contentMask.x=this._contentMc.x,this._contentMc.mask=this._contentMask,this.addChild(this._contentMask)},i.prototype.setData=function(t){},i.prototype.selectedHandler=function(){},i.prototype.notOpenHandler=function(){},i.prototype.getSelected=function(){return this._select},i.prototype.removeTreeIndex=function(t){var e=this.getTreeItem(t);if(e){var i=asf.TypeofUtils.asAny(e);this._contentMc.removeChild(i),i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onItemBegin,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onItemSelectHandler,this),i.destroy()}this.updateItemPos()},i.prototype.updateTreeIndex=function(t,e){var i=this.getTreeItem(t);i&&(i.setData(e),this.tree.nowSelectMainIndex==i.mainIndex&&this.tree.nowSelectSubIndex==i.index&&this.selectIndex(i.index))},i.prototype.getTreeIndex=function(t){var e=this.getTreeItem(t);return e?e.getData():null},i.prototype.getTreeItem=function(t){if(this._contentMc.numChildren>t){this._contentMc.numChildren;var e=asf.TypeofUtils.asAny(this._contentMc.getChildAt(t));if(e)return e}return null},i.prototype.setSelected=function(t){this._select!=t&&(this._select=t,this.selectedHandler(),this.upDataRect())},i.prototype.selectIndex=function(t){if(this._contentMc.numChildren>t){for(var e,i=0;i<this._contentMc.numChildren;)e=this._contentMc.getChildAt(t),e&&(e.selected=!1),i++;e=this._contentMc.getChildAt(t),e&&(e.selected=!0,this.currentSelect=e,this.currentSelect.setSelected(!0),this.currentSelect.tree.nowSelectMainIndex=this.currentSelect.mainIndex,this.currentSelect.tree.nowSelectSubIndex=this.currentSelect.index,this._selectHandler&&this._selectHandler.execute(this.currentSelect.getData()))}},i.prototype.getNotOpen=function(){return this._notOpen},i.prototype.setNotOpen=function(t){this._notOpen!=t&&(this._notOpen=t,this.notOpenHandler())},i.prototype.getBar=function(){return this._skin},i.prototype.getBarHeight=function(){return this._skin.height},i.prototype.getContentViewHeight=function(){return this._contentViewHeight},i.prototype.getContentMeasureHeight=function(){return this._contentMeasureHeight},i.prototype.setContentViewHeight=function(t){this._contentViewHeight!=t&&(this._contentViewHeight=t,this._contentMask.height=this._contentViewHeight)},i.prototype.setContentViewWidth=function(t){this._contentViewWidth!=t&&(this._contentViewWidth=t,this._contentMask.width=this._contentViewWidth)},i.prototype.cancelContentSelect=function(){this.currentSelect&&this.currentSelect.getSelected()&&this.currentSelect.setSelected(!1)},i.prototype.setContentData=function(t){this.currentSelect=null;for(var e,i;this._contentMc.numChildren>0;)e=asf.TypeofUtils.asAny(this._contentMc.removeChildAt(0)),i=asf.TypeofUtils.asAny(e),i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onItemBegin,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onItemSelectHandler,this),i.destroy(),e=null;if(!t)return void this.updateItemPos();for(var n=0;n<t.length;n++)e=new this._itemRender,e.tree=this.tree,e.mainIndex=this.mainIndex,e.index=n,i=asf.TypeofUtils.asAny(e),this._contentMc.addChild(i),e.setData(t[n]),this.tree.nowSelectMainIndex==e.mainIndex&&this.tree.nowSelectSubIndex==e.index&&this.selectIndex(e.index),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onItemBegin,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onItemSelectHandler,this);this.updateItemPos()},i.prototype.updateItemPos=function(){for(var t=0;t<this._contentMc.numChildren;t++){var e=this._contentMc.getChildAt(t);e.y=t*e.height}this.rendHeight()},i.prototype.onItemBegin=function(t){this.clickX=t.stageX,this.clickY=t.stageY},i.prototype.onItemSelectHandler=function(t){t.currentTarget instanceof this._itemRender&&Math.abs(t.stageX-this.clickX)<10&&Math.abs(t.stageY-this.clickY)<10&&(this.currentSelect&&(this.currentSelect.setSelected(!1),this.currentSelect=null),this.parent.parent.cancelContentSelect(),this.currentSelect=asf.TypeofUtils.asAny(t.currentTarget),this.currentSelect.setSelected(!0),this.currentSelect.tree.nowSelectMainIndex=this.currentSelect.mainIndex,this.currentSelect.tree.nowSelectSubIndex=this.currentSelect.index,this._selectHandler&&this._selectHandler.execute(this.currentSelect.getData()))},i.prototype.rendHeight=function(){this._contentMeasureHeight=0;for(var t=0;t<this._contentMc.numChildren;t++)this._contentMeasureHeight+=this._contentMc.getChildAt(t).height;this.upDataRect()},i.prototype.upDataRect=function(){this._select?this._contentMask.height=this._contentMeasureHeight:this._contentMask.height=0},i.prototype.setSelectHandler=function(t){this._selectHandler=t},i.prototype.destroy=function(){if(this._selectHandler=null,this.currentSelect){this.currentSelect.setSelected(!1);var i=asf.TypeofUtils.asAny(this.currentSelect);i.destroy(),i.remove(),this.currentSelect=null}var n;if(this._contentMc){for(;this._contentMc.numChildren>0;)n=this._contentMc.removeChildAt(0),n.destroy(),n=null;this._contentMc.parent&&this.removeChild(this._contentMc),this._contentMc=null}this._skin&&this._skin instanceof t.Component&&(this._skin.remove(),this._skin.destroy(),this._skin=null),this.tree=null,e.prototype.destroy.call(this)},i}(t.Box);t.TreeListItem=e,__reflect(e.prototype,"morn.TreeListItem",["morn.ITreeListMainItem"])}(morn||(morn={}));var morn;!function(t){var e=function(e){function i(t,i){void 0===t&&(t=100),void 0===i&&(i=100);var n=e.call(this)||this;return n._selectIndex=-1,n._onlyOpenOne=!1,n.mustOpenOne=!1,n.openSelectFirst=!1,n._viewWidth=t,n._viewHeight=i,n.scrollRect=new egret.Rectangle(0,0,t,i),n}return __extends(i,e),i.prototype.createChildren=function(){this.addChild(this._container=new egret.Sprite)},Object.defineProperty(i.prototype,"selectHandler",{set:function(t){this._selectHandler=t},enumerable:!0,configurable:!0}),i.prototype.addItem=function(t){this._container.addChild(asf.TypeofUtils.asAny(t)),t.setContentViewWidth(this._viewWidth),t.getBar().addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClieckBegin,this),t.getBar().addEventListener(egret.TouchEvent.TOUCH_END,this.changeItemSelect,this),this.callLater(this.renderView,this)},i.prototype.setContentData=function(t){var e,i;for(e=0;e<this._container.numChildren;e++)i=this.getItem(e),i&&(e>=t.length?(this.removeItem(i),e--):i.setContentData(t[e]));for(e;e<t.length;e++)i=new this.mainItemRender,i.tree=this.tree,i.mainIndex=e,i.setSelectHandler(this._selectHandler),this.addItem(i),i.setData(t[e]);this.callLater(this.renderView,this)},i.prototype.initMainData=function(t){this.removeAllItem();for(var e=0;e<t.length;e++){var i=new this.mainItemRender;i.tree=this.tree,i.mainIndex=e,i.setSelectHandler(this._selectHandler),this.addItem(i),i.setData(t[e])}this.callLater(this.renderView,this)},i.prototype.updatetMainData=function(t){for(var e=0;e<t.length;e++){var i=this.getItem(e);i&&i.setData(t[e])}this.callLater(this.renderView,this)},i.prototype.updatetMainDataByIndex=function(t,e){var i=this.getItem(t);i&&i.setData(e),this.callLater(this.renderView,this)},i.prototype.cancelContentSelect=function(){for(var t,e=0;e<this._container.numChildren;e++)t=asf.TypeofUtils.asAny(this._container.getChildAt(e)),t.cancelContentSelect()},i.prototype.removeAllItem=function(){if(this._container)for(;this._container.numChildren>0;)this.removeItem(asf.TypeofUtils.asAny(this._container.getChildAt(0)),!0)},i.prototype.removeItem=function(t,e){void 0===e&&(e=!1),this._container.removeChild(asf.TypeofUtils.asAny(t)),t.getBar().removeEventListener(egret.TouchEvent.TOUCH_END,this.changeItemSelect,this),t.destroy(),t=null,e||this.callLater(this.renderView,this)},i.prototype.removeItemByIndex=function(t,e){void 0===e&&(e=!1);var i=this.getItem(t);this.removeItem(i)},i.prototype.getItem=function(t){return t>=this._container.numChildren?null:asf.TypeofUtils.asAny(this._container.getChildAt(t))},i.prototype.onClieckBegin=function(t){this.clickX=t.stageX,this.clickY=t.stageY},i.prototype.changeItemSelect=function(e){if(!(Math.abs(this.clickX-e.stageX)>=10||Math.abs(this.clickY-e.stageY)>=10)){var i,n=e.target;do n instanceof t.TreeListItem?i=n:n=n.parent;while(null==i&&!(n instanceof t.TreeList));if(i){var o;if(this._onlyOpenOne)for(var r=this._container.numChildren,s=0;r>s;s++)o=asf.TypeofUtils.asAny(this._container.getChildAt(s)),o&&o.getSelected()&&o!=i&&this.selectSubItem(o,!1);i.getNotOpen()||(this.mustOpenOne?i.setSelected(!0):i.setSelected(!i.getSelected()),this.openSelectFirst&&i.getSelected()&&(this.cancelContentSelect(),i.selectIndex(0))),this.renderView()}}},i.prototype.setSelectIndex=function(t){var e;e=asf.TypeofUtils.asAny(this._container.getChildAt(t)),e&&(e.getNotOpen()||1!=e.getSelected()&&(this.selectSubItem(e,!0),this.callLater(this.renderView,this)))},i.prototype.setCloseTreeIndex=function(t){var e;e=asf.TypeofUtils.asAny(this._container.getChildAt(t)),e&&1==e.getSelected()&&(this.selectSubItem(e,!1),this.callLater(this.renderView,this))},i.prototype.removeTreeIndex=function(t,e){void 0===e&&(e=-1);var i=this.getItem(t);i&&i.removeTreeIndex(e),this.callLater(this.renderView,this)},i.prototype.updateTreeIndex=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=null);var n=this.getItem(t);n&&n.updateTreeIndex(e,i)},i.prototype.getTreeInfoIndex=function(t,e){void 0===e&&(e=-1);var i=this.getItem(t);return i?i.getTreeIndex(e):null},i.prototype.openTreeIndex=function(t,e){void 0===e&&(e=-1);var i;if(this._onlyOpenOne)for(var n=this._container.numChildren,o=0;n>o;o++)i=asf.TypeofUtils.asAny(this._container.getChildAt(o)),i&&i.getSelected()&&this.selectSubItem(i,!1);this.cancelContentSelect(),this._container.numChildren>t&&(i=asf.TypeofUtils.asAny(this._container.getChildAt(t)),i&&(i.getNotOpen()||(i.getSelected()||this.selectSubItem(i,!0),-1!=e&&i.selectIndex(e),this.callLater(this.renderView,this))))},i.prototype.selectSubItem=function(t,e){t.setSelected(e)},i.prototype.renderView=function(){this.scrollRect=new egret.Rectangle(0,0,this.getViewWidth(),this.getViewHeight());var t,e=this._container.numChildren,i=0,n=0;for(i=0;e>i;i++)t=asf.TypeofUtils.asAny(this._container.getChildAt(i)),asf.TypeofUtils.asAny(t).y=n,t.getSelected()?(n+=t.getBarHeight()+t.getContentMeasureHeight(),t.setContentViewHeight(t.getContentMeasureHeight())):(n+=t.getBarHeight(),t.setContentViewHeight(0));null!=this.rendViewHandle&&this.rendViewHandle.execute()},i.prototype.setOnlyOpenOne=function(t){this._onlyOpenOne=t},Object.defineProperty(i.prototype,"height",{get:function(){for(var t,e=0,i=0;i<this._container.numChildren;i++)t=asf.TypeofUtils.asAny(this._container.getChildAt(i)),e+=t.getContentViewHeight()+t.getBarHeight();return e+=this._container.y},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){if(this._selectHandler=null,this._container){for(;this._container.numChildren>0;)this.removeItem(asf.TypeofUtils.asAny(this._container.getChildAt(0)),!0);
this._container.parent&&this.removeChild(this._container),this._container=null}this.scrollRect=null,this.tree=null,e.prototype.destroy.call(this)},i.prototype.setViewHeight=function(t){this._viewHeight=t,this.callLater(this.renderView,this)},i.prototype.getViewHeight=function(){return this._viewHeight},i.prototype.getViewWidth=function(){return this._viewWidth},i.prototype.setViewWidth=function(t){this._viewWidth=t,this.callLater(this.renderView,this)},i}(t.Box);t.TreeListMain=e,__reflect(e.prototype,"morn.TreeListMain")}(morn||(morn={}));var morn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.addChild(this._skin)},e.prototype.getData=function(){return this.data},e.prototype.setData=function(t){this.data=t},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return!1},e.prototype.destroy=function(){this._skin&&(this._skin.remove(),this._skin.destroy(),this._skin=null),this.data=null,this.tree=null,t.prototype.destroy.call(this)},e}(t.Box);t.TreeListSubItem=e,__reflect(e.prototype,"morn.TreeListSubItem",["morn.ITreeListSubItem"])}(morn||(morn={}));var morn;!function(t){var e=function(){function e(t,e,i,n,o,r,s){void 0===e&&(e=245),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===s&&(s=1),this._maxValue=0,this._curValue=0,this.isShowMax=!1,this.canOverflow=!1,this.overflowBarNotFull=!1,this._skin=t,this._width=e,this._label=i,this._bar=n,this._mode=s,this.isShowMax=o,this.init()}return e.prototype.init=function(){if(0==this._mode){var e;!this._bar&&this._skin.proBg?(this._mask=new t.Image(this._skin.proBg.url),this._mask.sizeGrid=this._skin.proBg.sizeGrid,this._mask.width=this._width,this._mask.height=this._skin.proBg.height,e=this._skin.getChildIndex(this._skin.proBg),this._skin.addChildAt(this._mask,e),this._mask.mask=this._skin.proBg,this._mask.y=this._skin.proBg.y,this._mask.x=-this._width):this._bar&&(this._mask=new t.Image(this._bar.url),this._mask.sizeGrid=this._bar.sizeGrid,this._mask.width=this._width,e=this._skin.getChildIndex(this._bar),this._skin.addChildAt(this._mask,e),this._mask.mask=this._bar,this._mask.y=this._bar.y,this._mask.x=-this._width)}this.update()},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){this._maxValue=t,this._curValue>this._maxValue&&(this.canOverflow||(this._curValue=this._maxValue)),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curValue",{get:function(){return this._curValue},set:function(t){this._curValue=t,this._curValue>this._maxValue&&(this.canOverflow||(this._curValue=this._maxValue)),this.update()},enumerable:!0,configurable:!0}),e.prototype.update=function(){this._skin&&(!this._label&&this._skin.hasOwnProperty("txt")?this.isShowMax?this._skin.txt.text=this._curValue+"/"+this._maxValue:this._skin.txt.text=this._curValue+"":this._label&&(this.isShowMax?this._label.text=this._curValue+"/"+this._maxValue:this._label.text=this._curValue+""),!this._bar&&this._skin.hasOwnProperty("proBg")?0==this._maxValue?0==this._mode?this._mask.x=-this._width:this._skin.proBg.width=0:this._curValue>=this._maxValue?this.overflowBarNotFull?0==this._mode?this._mask.x=-this._width+this._skin.proBg.x:this._skin.proBg.width=0:0==this._mode?this._mask.x=this._skin.proBg.x:this._skin.proBg.width=this._width:0==this._mode?this._mask.x=-this._width+this._curValue/this._maxValue*this._width+this._skin.proBg.x:this._skin.proBg.width=this._curValue/this._maxValue*this._width:this._bar&&(0==this._maxValue?0==this._mode?this._mask.x=-this._width:this._bar.width=0:this._curValue>=this._maxValue?this.overflowBarNotFull?0==this._mode?this._mask.x=-this._width+this._bar.x:this._bar.width=0:0==this._mode?this._mask.x=this._bar.x:this._bar.width=this._width:0==this._mode?this._mask.x=-this._width+this._curValue/this._maxValue*this._width+this._bar.x:this._bar.width=this._curValue/this._maxValue*this._width),this.updateHandler&&this.updateHandler.execute())},e.prototype.destroy=function(){this._mask&&(this._mask.remove(),this._mask=null),this.updateHandler&&(this.updateHandler.destroy(),this.updateHandler=null)},e}();t.ProgressBarCtr=e,__reflect(e.prototype,"morn.ProgressBarCtr")}(morn||(morn={}));var morn;!function(t){var e=function(){function t(t,e){if(void 0===e&&(e=!0),this._maxValue=0,this._curValue=0,this.isShowLabel=!0,this.isShowMax=!1,this.canOverflow=!1,this.overflowBarNotFull=!1,this._skin=t,this._bar=this._skin.proBg,!this._bar)throw"必须存在proBg";if(this._label=this._skin.txt,this._bg=this._skin.bg,this._bg){var i=this._bg.width-this._bar.width;this._bg.width=this._skin.width,this._bar.width=this._bg.width-i}this._barWidth=this._bar.width,this._label&&(this._label.x=this._bar.x,this._label.width=this._bar.width),this.isShowMax=e,this.init()}return t.prototype.init=function(){asf.App.render.callLater(this.update,this)},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){this._maxValue=t,this._curValue>this._maxValue&&(this.canOverflow||(this._curValue=this._maxValue)),asf.App.render.callLater(this.update,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curValue",{get:function(){return this._curValue},set:function(t){this._curValue=t,this._curValue>this._maxValue&&(this.canOverflow||(this._curValue=this._maxValue)),asf.App.render.callLater(this.update,this)},enumerable:!0,configurable:!0}),t.prototype.update=function(){this._skin&&(this._label&&this.isShowLabel?(this._label.visible=!0,this.isShowMax?this._label.text=this._curValue+"/"+this._maxValue:this._label.text=this._curValue+""):this._label.visible=!1,0==this._maxValue?this._bar.width=0:this._curValue>=this._maxValue?this.overflowBarNotFull?this._bar.width=0:this._bar.width=this._barWidth:this._bar.width=this._curValue/this._maxValue*this._barWidth,this.updateHandler&&this.updateHandler.execute())},t.prototype.destroy=function(){this.updateHandler&&(this.updateHandler.destroy(),this.updateHandler=null),asf.App.render.removeLater(this.update,this),this._bar=null,this._label=null,this._bg=null,this._skin=null},t}();t.ProgressNormalBarCtr=e,__reflect(e.prototype,"morn.ProgressNormalBarCtr")}(morn||(morn={}));var morn;!function(t){var e=function(t){function e(e,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var r=t.call(this,e,n,o,i)||this;return r._data=i,r}return __extends(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._data,this.bubbles,this.cancelable)},e.MOVE="move",e.RENDER_COMPLETED="renderCompleted",e.SHOW_TIP="showTip",e.HIDE_TIP="hideTip",e.IMAGE_LOADED="imageLoaded",e.SCROLL="scroll",e.FRAME_CHANGED="frameChanged",e.ITEM_RENDER="listRender",e}(egret.Event);t.UIEvent=e,__reflect(e.prototype,"morn.UIEvent")}(morn||(morn={}));var morn;!function(t){var e=function(){function t(){this.guideMap=new asf.HashMap}return t.prototype.get=function(t){var e=this.guideMap.get(t);return e&&e.guide==t?e:null},t.prototype.add=function(t,e){this.guideMap.put(t,e),this.updateCallback&&this.updateCallback.execute(t)},t.prototype.remove=function(t){this.guideMap.remove(t),this.removeCallback&&this.removeCallback.execute()},t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t}();t.GuideMgr=e,__reflect(e.prototype,"morn.GuideMgr")}(morn||(morn={}));var morn;!function(t){var e=function(){function t(){}return t.addFilter=function(t,e){var i=t.filters||[];i.push(e),t.filters=i},t.clearFilter=function(t,e){var i=t.filters;if(null!=i&&i.length>0){for(var n=i.length-1;n>-1;n--){var o=i[n];o instanceof e&&i.splice(n,1)}t.filters=i}},t.gray=function(e,i){void 0===i&&(i=!0),i?e.filters=[t.grayFilter]:this.clearFilter(e,egret.ColorMatrixFilter)},t.grayFilter=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),t}();t.ObjectUtils=e,__reflect(e.prototype,"morn.ObjectUtils")}(morn||(morn={}));var morn;!function(t){var e=function(){function t(){}return t.fillArray=function(t,e,i){void 0===i&&(i=null);var n=t.concat();if(Boolean(e))for(var o=e.split(","),r=0,s=Math.min(n.length,o.length);s>r;r++){var a=o[r];n[r]="true"==a?!0:"false"==a?!1:a,null!=i&&(n[r]=i(a))}return n},t.urlFormat=function(t){var e=t.replace(/\./g,"_");return e=e.substr(e.lastIndexOf("_")+1),e+="_png"},t}();t.StringUtils=e,__reflect(e.prototype,"morn.StringUtils")}(morn||(morn={}));var morn;!function(t){var e=function(){function t(){}return t.cut=function(t,e,i,n){var o=new egret.SpriteSheet(t),r=e,s=o.getTexture(r);if(!s){var a=t.textureHeight-t.$bitmapHeight-t.$offsetY,h=(t.$bitmapHeight-(n-1)*(t.$offsetY+a))/n,l=h*i+i*(t.$offsetY+a)+t.$offsetY;s=o.createTexture(r,t.$offsetX,l,t.$bitmapWidth,h)}return s},t.cut2=function(t,e,i){var n,o=[],r=new egret.SpriteSheet(t);if(i)for(var s=t.textureWidth-t.$bitmapWidth-t.$offsetX,a=t.textureWidth/e,h=0;e>h;h++){var l,c,u;0==h?(l=t.$offsetX,c=a-t.$offsetX,u=t.$offsetX):h==e-1?(l=a*h,c=a-s,u=0):(l=a*h,c=a,u=0),n=r.createTexture(String(h),l,t.$offsetY,c,t.$bitmapHeight,u,t.$offsetY,a,t.textureHeight),o.push(n)}else for(var p=t.textureHeight-t.$bitmapHeight-t.$offsetY,d=t.textureHeight/e,h=0;e>h;h++){var f,g,m;0==h?(f=t.$offsetY,g=d-t.$offsetY,m=t.$offsetY):h==e-1?(f=d*h,g=d-p,m=0):(f=d*h,g=d,m=0),n=r.createTexture(String(h),t.$offsetX,f,t.$bitmapWidth,g,t.$offsetX,m,t.textureWidth,d),o.push(n)}return o},t.create=function(t,e){void 0===e&&(e=0);var i,n=new egret.Bitmap(t);new egret.RenderTexture;if(0==e){var o=3394815,r=.8,s=35,a=35,h=2,l=3,c=!1,u=!1,p=new egret.GlowFilter(o,r,s,a,h,l,c,u);return void(n.filters=[p])}return i},t}();t.TextureUtils=e,__reflect(e.prototype,"morn.TextureUtils")}(morn||(morn={}));var asf;!function(t){var e=function(){function e(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),null!=t&&this.init(t,e,i)}return e.create=function(i,n,o,r){void 0===r&&(r=!1),null==this.pool&&(this.pool=new t.Pool(e,1e3));var s=this.pool.create();return s.autoRelesea=r,s.inPool=!1,s.init(i,n,o),s},e.relesea=function(t){t.destroy(),t.inPool=!0,t.autoRelesea=!1,this.pool.release(t)},e.prototype.init=function(t,e,i){this.fun=t,this.param=i,this.thisObj=e},e.prototype.execute=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(this.fun){null!=this.param&&t.unshift(this.param);var n=this.fun.apply(this.thisObj,t);if(this.autoRelesea){if(this.inPool)throw new Error("需要多次调用CallBack的execute方法的，不能设置为自动释放autoRelese");this.destroy(),e.relesea(this)}return n}},e.prototype.destroy=function(){this.fun=null,this.param=null,this.thisObj=null,this.autoRelesea=!1},e}();t.CallBack=e,__reflect(e.prototype,"asf.CallBack")}(asf||(asf={}));var game;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.recthis=i,n.recFun=t,n}return __extends(i,e),i.prototype.code=function(t){var e=new egret.ByteArray;return this.writeArgs(e,t),e},i.prototype.writeArgs=function(e,i){for(var n,o=i.length,r=0;o>r;r++)if(n=i[r],"number"==typeof n)t.NetUtils.writeVaryNum(e,n);else if("string"==typeof n){var s=new egret.ByteArray;s.writeUTFBytes(n),t.NetUtils.writeVaryNum(e,s.length),e.writeBytes(s)}else if("boolean"==typeof n)e.writeBoolean(n);else if(n instanceof Array){var a=n.length;t.NetUtils.writeVaryNum(e,a),this.writeArgs(e,n)}else{if(n instanceof Function)return;if("object"==typeof n)throw new Error("发送给服务器的参数不需要有object:"+n)}},i.prototype.decode=function(t,e){if(this.isCheckout(e)){if(!this.recFun[t])return console.log("协议号不存在 : "+t),null;var i=this.recFun[t];return i.call(this.recthis,e)}return null},i}(t.BasicMsgCodec);t.BinaryCodec=e,__reflect(e.prototype,"game.BinaryCodec",["game.IMsgCodec"])}(game||(game={}));var game;!function(t){var e=function(){function e(){}return e.init=function(t){this.errorBack=t,this.cmds=new asf.Subjects,this.backFuns=new asf.ObjectMap,this.onceErrorFuns=new asf.ObjectMap,this.errorFuns=new asf.ObjectMap,this.passiveFuns=new asf.ObjectMap,this.soloCmds=new asf.ObjectMap,this.sendCmds=new asf.ObjectMap,this.codecList=new Array,this.socketMap={},this.cmdSocket={},this.errorBack.init()},e.connected=function(t){var e=this.socketMap[t];return e?e.connected:!1},e.initSocket=function(t){var e=this.socketMap[t];e&&(e.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceive,this),e.removeEventListener(egret.Event.CONNECT,this.onConnect,this),e.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this)),e=new egret.WebSocket,e.key=t,e.type=egret.WebSocket.TYPE_BINARY,e.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceive,this),e.addEventListener(egret.Event.CONNECT,this.onConnect,this),e.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.socketMap[t]=e,t==this.DEFAULE&&(this.socket=e)},e.regSocketCmd=function(t,e){for(var i=e.length,n=this.socketMap[t],o=0;i>o;o++)this.cmdSocket[e[o]]=n},e.delSocketCmd=function(t){for(var e=t.length,i=0;e>i;i++)delete this.cmdSocket[t[i]]},e.connect=function(t,e){void 0===e&&(e="default"),this.initSocket(e),this.host=t,console.info(e+"链接服务器:"+t),this.socketMap[e].connectByUrl(t)},e.close=function(t){void 0===t&&(t="default"),console.info("客户端自己中断服务器"),this.socketMap[t]&&this.socketMap[t].close()},e.regSoloCmd=function(t){this.soloCmds.put(t,t)},e.delSoloCmd=function(t){this.soloCmds.remove(t)},e.regError=function(t,e,n,o){void 0===o&&(o=!0),o?this.onceErrorFuns.put(t,new i(e,n)):this.errorFuns.put(t,new i(e,n))},e.regPassive=function(t,e,n){this.passiveFuns.put(t,new i(e,n))},e.addCodec=function(t,e){this.codecList[t]=e},e.onReceive=function(t){var e=new egret.ByteArray,i=t.target;i.readBytes(e);var n,o=e.readShort(),r=e.readByte(),s=e.readShort();if(this.soloCmds.hasKey(o-1e4)&&this.sendCmds.remove(o-1e4),0!=s)return n=this.onceErrorFuns.remove(o),n||(n=this.errorFuns.get(o)),n&&!n.thisObj.isDestroy&&(console.log("有错误回调函数处理的cmd:"+o+" errCode:"+s+" this:"+n.thisObj),n.fun.call(n.thisObj,s,o)),void this.errorBack.errorBack(o,s);var a=this.codecList[r].decode(o,e);if(n=this.backFuns.remove(o),n||(n=this.passiveFuns.get(o)),n&&!n.thisObj.isDestroy){var h=n.fun,l=n.thisObj;3==h.length?h.call(l,a,s,o):h.call(l,a,s)}else this.cmds.send(o,a,s)},e.onConnect=function(e){var i=e.target;console.info("onSocketOpen:"+i.key),this.cmds.send(t.CoreNotice.SOCEKT_OPEN,i.key)},e.onSocketClose=function(e){var i=e.target;console.info("onSocketClose:"+i.key),this.cmds.send(t.CoreNotice.SOCEKT_CLOSE,i.key),i.key==this.DEFAULE&&this.errorBack.onSocketClose()},e.onSocketError=function(e){var i=e.target;console.error("onSocketError:"+i.key),this.cmds.send(t.CoreNotice.SOCEKT_CLOSE,i.key),i.key==this.DEFAULE&&this.errorBack.onSocketError()},e.send=function(t,e,i,n,o){if(null==e)return void this.sendBinary(t,i,null);var r=this.codecList[0].code(e);this.sendBinary(t,i,r)},e.sendBytes=function(t,e,n,o,r){n&&this.backFuns.put(t+1e4,new i(n,o)),r&&this.onceErrorFuns.put(t+1e4,new i(r,o)),this.sendBinary(t,0,e)},e.autoMsg=function(t,e,n){22206==t&&console.log("检查一下");try{if(this.soloCmds.hasKey(t)){if(this.sendCmds.hasKey(t))return void console.log("cmd:"+t+" 重复发送了！");this.sendCmds.put(t,t)}var o=e.length-1;if(o>=0){var r=void 0,s=void 0;if(e[o]instanceof Function){if(null==e[o-1])throw new Error(t+"如果有回调函数，必须带thisObj参数");if(null!=e[o-2]&&!(e[o-2]instanceof Function))throw new Error(t+"如果有回调函数，必须带thisObj参数");s=e[o-1],this.onceErrorFuns.put(t+1e4,new i(e[o],s)),r=e[o-2]}else o>=1&&e[o-1]instanceof Function&&(r=e[o-1],s=e[o]);r&&this.backFuns.put(t+1e4,new i(r,s))}if(0>o)return void this.sendBinary(t,n,null);var a=this.codecList[n].code(e);this.sendBinary(t,n,a)}catch(h){alert(h)}},e.sendBinary=function(t,e,i){try{var n=new egret.ByteArray;n.writeShort(t),n.writeByte(e),null==i?n.writeShort(0):(n.writeShort(i.length),n.writeBytes(i));var o=this.cmdSocket[t];o||(o=this.socket),o.writeBytes(n),o.flush()}catch(r){alert(r)}},e.DEFAULE="default",e}();t.Net=e,__reflect(e.prototype,"game.Net");var i=function(){function t(t,e){this.fun=t,this.thisObj=e}return t}();t.NetFunData=i,__reflect(i.prototype,"game.NetFunData")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.writeVaryNum=function(t,e){try{122>e&&e>-128?t.writeByte(e):128>e&&e>122?(t.writeByte(122),t.writeByte(e)):32767>e&&e>-32768?(t.writeByte(123),t.writeShort(e)):2147483647>e&&e>-2147483648?(t.writeByte(124),t.writeInt(e)):(t.writeByte(125),t.writeDouble(e))}catch(i){alert(i.stack)}},t.readVaryNum=function(t){var e=t.readByte();return 122>e&&e>-128?e:122==e?t.readByte():123==e?t.readShort():124==e?t.readInt():125==e?t.readDouble():126==e?t.readFloat():127==e?t.readDouble():0},t}();t.NetUtils=e,__reflect(e.prototype,"game.NetUtils")}(game||(game={}));var game;!function(t){var e=function(){function e(e,i){this.session=t.Session.instance,this.configBean=e,this.root=i,this.session.config=e,this.session.root=i,this.session.stage=i.stage}return e.prototype.init=function(){console.info("初始化GameMain");var e=mvc.RootContainer.getInstance(this.root);this.session.mvcRoot=e,e.stage=this.root.stage,mvc.init(new mvc.ViewHandler(e),new t.GameHoldupView,t.MvcResLoader,t.Modules,t.DB.instance),new t.RegModule,mvc.Context.startup(e,this.onMvcComplete,this)},e.prototype.onMvcComplete=function(){mvc.Context.takeServer(),mvc.openView(t.AlertView),mvc.openView(t.TipView),mvc.openView(t.CommonAlertView),mvc.openView(t.MainView)},e}();t.GameMain=e,__reflect(e.prototype,"game.GameMain")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return e.getInstance=function(){return this.instance},e.prototype.openShowAd=function(e){return console.info("调用广告接口:"+e),this.win.callNativeOpenShowAd?void this.win.callNativeOpenShowAd({data:e,callback:function(e){console.info("openShowAd调用成功:",e),t.CommonAlertView.showGainGold(e)}}):void console.info("windows没有初始化js桥接信息，无法调用广告api")},e.prototype.getToken=function(){try{this.win.getLoginToken()}catch(t){console.error("获取token报错")}},e.prototype.init=function(){var e=window;this.win=e;var i=navigator.userAgent;e.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,e.isIOS=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),e.jsbridge=function(t){if(e.WebViewJavascriptBridge)return t(e.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",function(){t(e.WebViewJavascriptBridge)},!1),e.isIOS){if(e.WKWebViewJavascriptBridge)return t(e.WKWebViewJavascriptBridge);if(e.WKWVJBCallbacks)return e.WKWVJBCallbacks.push(t);e.WKWVJBCallbacks=[t];var i=document.createElement("iframe");i.style.display="none",i.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(i),setTimeout(function(){document.documentElement.removeChild(i)},0),e.webkit.messageHandlers.iOS_Native_InjectJavascript.postMessage(null)}},e.isIOS||e.jsbridge(function(t){t.init(function(t,e){var i={};e(i)})}),e.bridgeCallHandler=function(t){e.jsbridge(function(e){e.callHandler(t.method,t.data||{},function(e){t.callback&&t.callback(e)})})},e.bridgeRegisterHandler=function(t){e.jsbridge(function(e){e.registerHandler(t.method,function(e,i){t.callback&&t.callback(e),i(t.data||{})})})},e.callNativePageToken=function(t){e.bridgeCallHandler({method:"getLoginToken",data:t.data,callback:function(e){t.callback&&t.callback(e)}})},e.getLoginToken=function(){e.callNativePageToken({data:"",callback:function(e){console.info("app返回token："+e),mvc.send(t.NC.Update_Token,e)}})},e.callNativePageOnFinish=function(t){e.bridgeCallHandler({method:"onFinish",data:t.data,callback:function(e){t.callback&&t.callback(e)}})},e.onFinish=function(){e.callNativePageOnFinish({data:"",callback:function(t){}})},e.callNativePage=function(t){e.bridgeCallHandler({method:"jumpview",data:t.data,callback:function(e){t.callback&&t.callback(e)}})},e.jumpClick=function(t,i){e.callNativePage({data:{urlprams:t,title:i},callback:function(t){}})},e.callNativePageJumpLogin=function(t){e.bridgeCallHandler({method:"notLoginJumpLogin",data:t.data,callback:function(e){t.callback&&t.callback(e)}})},e.notLoginJumpLogin=function(){e.callNativePageJumpLogin({data:"",callback:function(t){}})},e.callNativeOpenShowAd=function(t){e.bridgeCallHandler({method:"openShowAd",data:t.data,callback:function(e){t.callback&&t.callback(e)}})},e.openShowAd=function(t){e.callNativeOpenShowAd({data:t,callback:function(t){}})},e.callVidioGainGold=function(t){e.bridgeCallHandler({method:"vidioGainGold",data:t.data,callback:function(e){t.callback&&t.callback(e)}})},e.vidioGainGold=function(){e.callVidioGainGold({data:"",callback:function(e){e&&""!=e&&t.CommonAlertView.showGainGold(e)}})}},e.instance=new e,e}();t.JSBrigd=e,__reflect(e.prototype,"game.JSBrigd")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.Transter_Info_Url="api/queryPrize",t.Transter_start_Url="api/turntable",t.Select_Gold_Url="api/selectGoldCoin",t.ReceiveGoldTlbc_Url="api/receiveGoldTlbc",t.AddSpeedGoldCoin_Url="api/addSpeedGoldCoin",t.ReceiveGold_Url="api/receiveGoldCoin",t.Shop_Url="api/getSupermarketData",t.BuyDog_Url="api/buyDog",t.Merge_Dog_Url="api/dogMerge",t.SeparateDogMerge="api/separateDogMerge",t.RecoveryDog_Url="api/recoveryDog",t.Change_Dog_Position_Url="api/changeDogPosition",t.BuyGemDog_Url="api/tlbcBuyDog",t.LookVideoCount_Url="api/lookVideoCount",t.Init_Gem="Init_Gem",t.Update_Gold="updateGold",t.Update_Tlbc="updateTlbc",t.Merger_Dog="mergerDog",t.Add_Gog="addGod",t.LoadingSpeed=2,t.OpenShowAd_Back="OpenShowAd_Back",t.Update_Token="OpenShowAd_Token",t}();t.NC=e,__reflect(e.prototype,"game.NC")}(game||(game={}));var game;!function(t){var e=function(){function e(){this.isDebug=!0,this.GAME_ICON="http://cdnxjqxzh5.tisgame.com/icon.png",this.GAME_NAME="sango",this.GAME_DESCRIBE="sango",this.isBreak=!1,this.hpx=0,this.dragDogContainer=new egret.Sprite}return Object.defineProperty(e,"instance",{get:function(){return this._ins},enumerable:!0,configurable:!0}),e.prototype.moveDragDog=function(e,i,n,o){if(this.dragDogIndex=e,this.dragDog)this.dragDogContainer.x=n,this.dragDogContainer.y=o;else{this.dragX=n,this.dragY=o;var r=t.DB.instance.dogsRes.get("pet"+i);t.MovieMgr.getInstance().load(r,this.config.assets+"pet/"+r,new asf.CallBack(this.onLoadMove,this))}},e.prototype.closeDragDog=function(){this.dragDog&&(this.dragDog.parent&&this.dragDog.parent.removeChild(this.dragDog),this.dragDog=null)},e.prototype.onLoadMove=function(t,e,i){this.dragDog=new egret.MovieClip(t),this.dragDog.scaleX=this.dragDog.scaleY=1.2,this.dragDogContainer.x=this.dragX,this.dragDogContainer.y=this.dragY,this.dragDog.frameRate=10,this.root.addChild(this.dragDogContainer),this.dragDogContainer.addChild(this.dragDog),this.dragDog.x=-165,this.dragDog.y=-220,this.dragDog.play(-1)},e._ins=new e,e}();t.Session=e,__reflect(e.prototype,"game.Session")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.Shop_Dog_Full="位置已经满了，不能买狗",t}();t.TipConst=e,__reflect(e.prototype,"game.TipConst")}(game||(game={}));var game;!function(t){var e=function(){function t(){this.dogsRes=new asf.HashMap;for(var t=1;44>=t;t++)t>=1&&5>=t?(this.dogsRes.put("pet"+t,"pet1_5"),this.dogsRes.put("shop"+t,"shop1_5")):t>=6&&10>=t?(this.dogsRes.put("pet"+t,"pet6_10"),this.dogsRes.put("shop"+t,"shop6_10")):t>=11&&15>=t?(this.dogsRes.put("pet"+t,"pet11_15"),this.dogsRes.put("shop"+t,"shop11_15")):t>=16&&20>=t?(this.dogsRes.put("pet"+t,"pet16_20"),this.dogsRes.put("shop"+t,"shop16_20")):t>=21&&25>=t?(this.dogsRes.put("pet"+t,"pet21_25"),this.dogsRes.put("shop"+t,"shop21_25")):t>=26&&30>=t?(this.dogsRes.put("pet"+t,"pet26_30"),this.dogsRes.put("shop"+t,"shop26_30")):t>=31&&37>=t?(this.dogsRes.put("pet"+t,"pet31_37"),this.dogsRes.put("shop"+t,"shop31_37")):(this.dogsRes.put("pet"+t,"pet"+t),this.dogsRes.put("shop"+t,"shop"+t))}return Object.defineProperty(t,"instance",{get:function(){return this.ins},enumerable:!0,configurable:!0}),t.prototype.getBuyBogLocal=function(){for(var t=1;12>=t;t++)if(0==this.mainInfoVo["position"+t])return t;return 0},t.ins=new t,t}();t.DB=e,__reflect(e.prototype,"game.DB")}(game||(game={}));var game;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);t.Effect=e,__reflect(e.prototype,"game.Effect")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t}();t.MovieLoaderInfo=e,__reflect(e.prototype,"game.MovieLoaderInfo");var i=function(){function t(){this.mcDataMap=new asf.HashMap,this.cacheMap=new asf.HashMap,this.jsonDataMap=new asf.HashMap,this.inTypeMap=new asf.HashMap,this.loaderMap=new asf.HashMap,this.timerId=asf.App.timer.doLoop(6e4,this.delayToDestroyRes,this,null,this.timerId),asf.PoolMgr.regClass(e,50),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceItemLoadError,this)}return t.prototype.destroyForce=function(){var t,e=this.cacheMap.getSource();for(t in e){var i,n=(this.cacheMap.get(t),this.mcDataMap.get(t));if(n){var o=n.getSource();for(i in o)RES.destroyRes(i+".png");this.mcDataMap.remove(t)}}this.cacheMap.clear(),this.inTypeMap.clear()},t.prototype.destroyRes=function(t){var e,i=this.cacheMap.getSource(),n=[];t:for(e in i){if(t)for(var o=0;o<t.length;o++)if(t[o]==e)continue t;var r=this.cacheMap.get(e);if(!r||0>=r){var s,a=this.mcDataMap.get(e);if(a){var h=a.getSource();for(s in h){var l=a.remove(s);l&&l.spriteSheet&&l.spriteSheet.dispose(),RES.destroyRes(s+".png")}}n.push(e)}}for(var o=0;o<n.length;o++)this.cacheMap.remove(n[o]),this.inTypeMap.remove(n[o])},t.prototype.addCache=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0);var n=0;this.cacheMap.hasKey(t)&&(n=this.cacheMap.get(t)),n++,e&&n++,this.cacheMap.put(t,n),this.addInTypeMap(t,i)},t.prototype.removeCache=function(t,e){var i=0;this.cacheMap.hasKey(t)&&(i=this.cacheMap.get(t),i--,this.cacheMap.put(t,i)),0>i&&(i=0,this.cacheMap.remove(t))},t.prototype.addInTypeMap=function(e,i){void 0===i&&(i=0);var n=this.inTypeMap.get(e);n!=t.InType_Scene&&this.inTypeMap.put(e,i)},t.prototype.delayToDestroyRes=function(){var e,i=this.inTypeMap.getSource(),n=[];for(e in i){var o=this.inTypeMap.get(e);o==t.InType_Scene&&n.push(e)}this.destroyRes(n)},t.prototype.load=function(t,e,i,n){t&&""!=t||console.log("没走URL的 : "+e);var o=this.getMovieClipData(t,e);return o?void this.onLoadComplete(i,o,t,e):void this.loadJson(t,e,i,n)},t.prototype.onLoadComplete=function(t,e,i,n){t&&e&&t.execute(e,i,n)},t.prototype.getResUrlName=function(t,e){void 0===e&&(e="");var i=t.lastIndexOf("/");return t.substr(i+1)+e},t.prototype.loadJson=function(t,i,n,o){var r=i+".json",s=asf.PoolMgr.create(e);s.url=i,s.name=t,s.thisObj=this,s.callback=this.onLoadJson,s.loadComplete=n,s.errorComplete=o;var a=this.getResUrlName(i,"_json"),h=RES.getRes(a);h?console.log("json加载完成"):h=RES.getRes(r),h?s.callback.call(s,h):(this.loaderMap.put(r,s),RES.getResByUrl(r,s.callback,s,RES.ResourceItem.TYPE_JSON))},t.prototype.onLoadJson=function(t,e){var i=this,n=i;n.jsonData=t,n.thisObj.addJsonMap(n.url,t),n.thisObj.loadImage(n)},t.prototype.loadImage=function(t){var e=t.url+".png";t.callback=t.thisObj.onLoadImage;var i=this.getResUrlName(t.url,"_png"),n=RES.getRes(i);n||(n=RES.getRes(e)),n?t.callback.call(t,n):(this.loaderMap.put(e,t),RES.getResByUrl(e,t.callback,t,RES.ResourceItem.TYPE_IMAGE))},t.prototype.onLoadImage=function(t,i){var n=this,o=n,r=o.thisObj.addMovieClipData(o.name,o.url,o.jsonData,t);o.thisObj.onLoadComplete(o.loadComplete,r,o.name,o.url),o.callback=null,o.jsonData=null,o.loadComplete=null,o.thisObj=null,asf.PoolMgr.release(o,e)},t.prototype.onResourceItemLoadError=function(t){var e=this.loaderMap.remove(t.resItem.name);e&&e.errorComplete&&e.errorComplete.execute()},t.prototype.addMovieClipData=function(t,e,i,n){var o=new egret.MovieClipDataFactory(i,n);if(o){var r=o.generateMovieClipData(),s=this.mcDataMap.get(t);return s||(s=new asf.HashMap,this.mcDataMap.put(t,s)),s.put(e,r),r}},t.prototype.getMovieClipData=function(t,e){var i=this.mcDataMap.get(t);if(i){var n=i.get(e);if(n)return n}return null},t.prototype.addJsonMap=function(t,e){this.jsonDataMap.put(t,e)},t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.InType_Nomal=0,t.InType_Scene=1,t}();t.MovieMgr=i,__reflect(i.prototype,"game.MovieMgr")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.mainModule=null,t}();t.Modules=e,__reflect(e.prototype,"game.Modules")}(game||(game={}));var game;!function(t){var e=function(){function e(){this.init()}return e.prototype.init=function(){mvc.MvcReg.reg(t.MainModule,t.MainView),mvc.MvcReg.regHelper(t.MainView,t.MainBackstageHelper),mvc.MvcReg.regView(t.SetupView),mvc.MvcReg.reg(t.MainModule,t.DiagramView),mvc.MvcReg.regView(t.ShopView),mvc.MvcReg.regView(t.TransterView),mvc.MvcReg.regView(t.AlertView),mvc.MvcReg.regView(t.CommonAlertView),mvc.MvcReg.regView(t.MyDogView),mvc.MvcReg.regView(t.InviteView),mvc.MvcReg.regView(t.SpeedUpView),mvc.MvcReg.regView(t.RecoverDogView),mvc.MvcReg.regView(t.RandomMergeView),mvc.MvcReg.regView(t.OfflineView),mvc.MvcReg.regView(t.TipView),mvc.MvcReg.regView(t.MoneyPetMergeView)},e}();t.RegModule=e,__reflect(e.prototype,"game.RegModule")}(game||(game={}));var game;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.NAME="alertModule",e}(t.Module);t.AlertModule=e,__reflect(e.prototype,"game.AlertModule")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_3,t.layer=mvc.MvcConst.TIP_LAYER,i.instance=t,t.isCloseDestroy=!1,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.GainViewUI,t)},i.prototype.init=function(){console.info("alertView初始化完成"),this.container.visible=!1,this.autoEffect=new t.AutoRotationEffect(this.container.effectImg),this.autoEffect.clear(),this.showGrayBg(),this.container.videoBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},i.showGainGold=function(t){this.instance.showTile("main_json.title_gain_gold",t),this.instance.lookVideoType="7",this.instance.container.goldImg1.visible=!0},i.showMoreGainGold=function(t){this.instance.showTile("main_json.title_gain_more_gold",t),this.instance.lookVideoType="7",this.instance.container.goldImg3.visible=!0},i.prototype.showTile=function(t,e,n,o){mvc.open(i),this.container.visible=!0,this.container.titleImg.skin=t,this.container.gainLabel.text=e,this.autoEffect.play(),this.container.videoBtn.visible=!0},i.prototype.onClick=function(e){e.currentTarget==this.container.videoBtn&&(t.JSBrigd.getInstance().openShowAd(this.lookVideoType),this.close())},i.prototype.onOpen=function(t){},i.prototype.onClose=function(){this.container.visible=!1,this.container.goldImg1.visible=!1,this.container.goldImg2.visible=!1,this.container.goldImg3.visible=!1,this.container.videoBtn.visible=!1,this.container.tipLabel.visible=!1,this.autoEffect.clear()},i.NAME="alertView",i}(t.View);t.AlertView=e,__reflect(e.prototype,"game.AlertView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_3,t.layer=mvc.MvcConst.TIP_LAYER,i.instance=t,t.isCloseDestroy=!1,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.CommonAlertUI,t)},i.prototype.init=function(){console.info("CommonAlertView初始化完成"),this.setCloseBtn(this.container.videoBtn),this.container.visible=!1,this.autoEffect=new t.AutoRotationEffect(this.container.effectImg),this.autoEffect.clear(),this.showGrayBg()},i.showGainGold=function(t){this.instance.showTile("main_json.title_gain_gold",t),this.instance.container.videoImg.visible=!0},i.showGem=function(t){this.instance.showTile("main_json.title_gain_gold",t),this.instance.container.videoImg.skin="main_json.gold_2"},i.prototype.showTile=function(t,e,n,o){mvc.open(i),this.container.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.visible=!0,this.container.titleImg.skin=t,this.container.gainLabel.text=e,this.container.videoBtn.visible=!0,this.autoEffect.play()
},i.prototype.onClick=function(t){t.currentTarget!=this.container.closeBtn&&this.close()},i.prototype.onOpen=function(t){},i.prototype.onClose=function(){this.container.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.visible=!1,this.container.tipLabel.visible=!1,this.autoEffect.clear()},i.NAME="CommonAlertView",i}(t.View);t.CommonAlertView=e,__reflect(e.prototype,"game.CommonAlertView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_3,t.layer=mvc.MvcConst.TIP_LAYER,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.OffLineUI,t)},i.prototype.init=function(){console.info("OfflineView初始化完成"),this.showGrayBg(),this.container.gainLabel.text=this.db.mainInfoVo.offlineGoldCoin,this.addButtonEvent(this.container.videoBtn,this.onClick,this),this.autoEffect=new t.AutoRotationEffect(this.container.effectImg),this.autoEffect.play()},i.prototype.LookVideoCount_Url=function(t){t.remainingTimes&&"0"!=t.remainingTimes&&(this.container.videoBtn.gray=!1)},i.prototype.onClick=function(e){e.currentTarget==this.container.videoBtn&&t.JSBrigd.getInstance().openShowAd("8"),this.close()},i.prototype.onClose=function(){this.autoEffect.clear()},i.NAME="OfflineView",i}(t.View);t.OfflineView=e,__reflect(e.prototype,"game.OfflineView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_3,t.layer=mvc.MvcConst.TIP_LAYER,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.RecoverDogUI,t)},i.prototype.init=function(){console.info("RecoverDogView初始化完成"),this.showGrayBg(),this.container.sureBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.setCloseBtn(this.container.cancelBtn)},i.prototype.onPostHttp=function(t){this.db.shopDogVoList=t.lists,this.showDogInfo()},i.prototype.onClick=function(e){e.currentTarget==this.container.sureBtn?this.openParam?t.HttpManager.postHttpByParam(t.NC.RecoveryDog_Url,this.openParam,this.RecoveryDog_Url,this):console.info("没有回收狗狗的参数，无法调用回收接口"):this.close()},i.prototype.RecoveryDog_Url=function(e){console.log("回收狗成功"),t.AlertView.showGainGold(e.recoveryGoldCoin),t.Modules.mainModule.mainView.removeDog(e.positionId),t.Modules.mainModule.mainView.updateGold(e.tgoldCoin),this.close()},i.prototype.showDogInfo=function(){for(var t=this.db.shopDogVoList,e=0;e<t.length;e++){var i=t[e];if(i.dogGradeId==this.dogLv){this.container.tipLabel.text="您当前回收"+i.dogLevelName+"，可获取：",this.container.gainLabel.text=i.currentPrice;break}}},i.prototype.onOpen=function(e){this.dogLv=e,this.db.shopDogVoList?this.showDogInfo():t.HttpManager.postHttp(t.NC.Shop_Url,this.onPostHttp,this)},i.prototype.onClose=function(){},i.NAME="RecoverDogView",i}(t.View);t.RecoverDogView=e,__reflect(e.prototype,"game.RecoverDogView")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var i=t.call(this)||this;return i.lv=mvc.MvcConst.VIEW_LV_3,i.layer=mvc.MvcConst.TOP_LAYER,e.instance=i,i.isCloseDestroy=!1,i}return __extends(e,t),e.prototype.initLayoutJson=function(t){this.initContainer(new ui.TipUI,t)},e.prototype.init=function(){console.info("alertView初始化完成"),this.container.visible=!1,this.setCloseBtn(this.container.sureBtn),this.showGrayBg()},e.showTip=function(t){t&&""!=t&&this.instance.show(t)},e.prototype.show=function(t){mvc.open(e),this.container.visible=!0,this.container.tipLabel.text=t},e.prototype.onOpen=function(t){},e.prototype.onClose=function(){this.container.visible=!1},e.NAME="TipView",e}(t.View);t.TipView=e,__reflect(e.prototype,"game.TipView")}(game||(game={}));var game;!function(t){var e=function(){function e(e){this.gemItem=e,this.autoEffect=new t.AutoRotationEffect(e.effectImg),this.autoEffect.play()}return e.prototype.clear=function(){this.gemItem.remove(),this.autoEffect.clear()},e}();t.GemItem=e,__reflect(e.prototype,"game.GemItem")}(game||(game={}));var LoadingView=function(t){function e(){var e=t.call(this)||this;return e.loadingMax=1e3,e.current=0,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.loadingUI=new ui.LoadingUI,this.addChild(this.loadingUI);var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawRect(0,0,500,630),t.graphics.endFill(),this.loadingUI.blackDogImg.addChild(t),t.x=0,t.y=0,this.loadingUI.blackDogImg.mask=t,this.timeKey=asf.App.timer.doLoop(33,this.onLoop,this)},e.prototype.closeLoading=function(){asf.App.timer.clearTimer(this.timeKey)},e.prototype.onLoop=function(){this.loadingUI.blackDogImg.mask.y-=game.NC.LoadingSpeed,this.loadingUI.blackDogImg.mask.y<-650&&asf.App.timer.clearTimer(this.timeKey)},e.prototype.onProgress=function(t,e){t>e&&(t=e),this.loadingUI.loadingLabel.text=Math.floor(t/e*100)+"%"},e}(egret.Sprite);__reflect(LoadingView.prototype,"LoadingView",["RES.PromiseTaskReporter"]);var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_1,t.layer=mvc.MvcConst.VIEW_LAYER,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.DiagramUI,t)},i.prototype.init=function(){console.info(i.NAME+"初始化完成"),this.showGrayBg(),this.centerView(),t.HttpManager.postHttp("game/plate/list",this.onPostHttp,this)},i.prototype.onPostHttp=function(t){this.itemList=[];for(var e=0;e<t.length;e++){var i=new ui.DiagramItemUI,n=t[e];if(i.y=70+300*e,i.nameLabel.text=n.plateName,n.plateImage&&""!=n.plateImage){var o=new morn.Image;o.url=n.plateImage,o.x=-120,o.y=-200,i.dogImg.addChild(o)}i.skillLabel.text=n.skill,i.desLabel.text=asf.StringUtils.replace(n.description,"&","\n"),this.container.panel.addChild(i)}},i.NAME="DiagramView",i}(t.View);t.DiagramView=e,__reflect(e.prototype,"game.DiagramView")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.lv=mvc.MvcConst.VIEW_LV_1,e.layer=mvc.MvcConst.VIEW_LAYER,e}return __extends(e,t),e.prototype.initLayoutJson=function(t){this.initContainer(new ui.GainViewUI,t)},e.prototype.init=function(){console.info("GainView初始化完成")},e.NAME="GainView",e}(t.View);t.GainView=e,__reflect(e.prototype,"game.GainView")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.lv=mvc.MvcConst.VIEW_LV_1,e.layer=mvc.MvcConst.VIEW_LAYER,e}return __extends(e,t),e.prototype.initLayoutJson=function(t){this.initContainer(new ui.InviteUI,t)},e.prototype.init=function(){console.info("InviteView初始化完成")},e.NAME="InviteView",e}(t.View);t.InviteView=e,__reflect(e.prototype,"game.InviteView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainView=null,t}return __extends(i,e),i.prototype.init=function(){mvc.on(t.NC.Update_Gold,this.onRequestCurrentGold,this)},i.prototype.addDog=function(t,e){return 1>e||e>12?void console.error(e+"位置不对，超出边界"):(this.db.mainInfoVo["position"+e]=t,void(this.mainView&&this.mainView.addDog(t,e)))},i.prototype.requestCurrentGold=function(){t.HttpManager.postHttp(t.NC.Select_Gold_Url,this.onRequestCurrentGold,this)},i.prototype.onRequestCurrentGold=function(t){this.mainView&&t&&this.mainView.updateGold(t)},i.NAME="mainModule",i}(t.Module);t.MainModule=e,__reflect(e.prototype,"game.MainModule")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_0,t.layer=mvc.MvcConst.MAIN_LAYER,t.restCheckScope=new egret.Rectangle(619,1159,100,130),t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.MainViewUI,t)},i.prototype.init=function(){console.info("MainView初始化完成"),this.dogList=[],this.container.steupBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.imgDogBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.shopBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.transferBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.myDogBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.jiaSuBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.inviteBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.restBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.dogBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.container.waterDogBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),t.HttpManager.postHttp("api/getHomePage",this.onMainResult,this),this.mvcOn(t.NC.Merger_Dog,this.onMergerEvent,this),this.container.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndClick,this)},i.prototype.onEndClick=function(e){var i=t.Session.instance;console.log("main view 点击结束了:"+i.dragDog),i.dragDog&&i.selectDogUI&&(mvc.send(t.NC.Merger_Dog,i.selectDogUI),this.isClick=!1,this.selectDogUI=null,i.selectDogUI.cleanDragInfo(),i.selectDogUI=null,i.closeDragDog())},i.prototype.onMergerEvent=function(e){var i=this.session.dragDogContainer;if(this.session.selectDogUI){if(console.log("触发拖动狗狗的算法"),this.restCheckScope.contains(i.x,i.y))return console.log("触发回收狗狗"),mvc.open(t.RecoverDogView,{dogGrade:this.session.selectDogUI.dogLv,positionId:this.session.selectDogUI.index}),void this.session.closeDragDog();for(var n=1;12>=n;n++)if(n!=e.index){var o=this.dogList[n],r=o.checkScope;if(r.contains(i.x,i.y)){console.log("碰撞到了");var s={};if(s.fromPositionId=e.index,s.toPositionId=o.index,o.hasDog){if(e.isFiveCerealsDog()&&o.isFiveCerealsDog())return void mvc.open(t.MoneyPetMergeView,o.index);e.dogLv==o.dogLv?(console.log("狗狗合成:"+o.dogLv),this.mergeDogLv=o.dogLv,s.dogLevel=e.dogLv,37==o.dogLv?mvc.open(t.RandomMergeView,s):t.HttpManager.postHttpByParam(t.NC.Merge_Dog_Url,s,this.onMergeDog,this)):(s.fromDogLevel=e.dogLv,s.toDogLevel=o.dogLv,t.HttpManager.postHttpByParam(t.NC.Change_Dog_Position_Url,s,this.Change_Dog_Position_Url,this))}else s.fromDogLevel=e.dogLv,s.toDogLevel=0,t.HttpManager.postHttpByParam(t.NC.Change_Dog_Position_Url,s,this.Change_Dog_Position_Url,this)}}}},i.prototype.Change_Dog_Position_Url=function(t){var e=this.dogList[t.fromPositionId];e&&(0==t.fromDogGradeId?e.closeDog():e.update(t.fromDogGradeId)),e=this.dogList[t.toPositionId],e&&e.update(t.toDogGradeId)},i.prototype.onMergeDog=function(t){console.log("合成狗成功了");var e;if(t.fromPositionId&&0!=t.fromPositionId)e=this.dogList[t.fromPositionId],e.closeDog();else if(t.strfromPositionId&&"0"!=t.strfromPositionId)for(var i=t.strfromPositionId.split(","),n=0;n<i.length;n++)e=this.dogList[Number(i[n])],e&&e.closeDog();0!=t.toPositionId&&(e=this.dogList[t.toPositionId],e.update(t.mergeLevel),e.showEffect(t.mergeLevel))},i.prototype.showMainPet=function(){for(var e=0,i=0;3>i;i++)for(var n=0;4>n;n++){e++;var o=new t.MainPetShowView(e);this.dogList[e]=o,o.x=116+170*n,o.y=674+200*i,o.checkScope.x=30+170*n,o.checkScope.y=555+180*i;var r=this.db.mainInfoVo["position"+e];0!=r&&o.update(r),this.container.addChild(o)}},i.prototype.addDog=function(t,e){this.dogList[e].update(t)},i.prototype.removeDog=function(t){this.dogList[t].closeDog()},i.prototype.updateGold=function(t){this.container&&(this.container.goldLabel.text=t)},i.prototype.updateGem=function(t){this.container&&(this.container.gemLabel.text=String(t))},i.prototype.onMainResult=function(e){this.db.mainInfoVo=e,this.showMainPet(),this.container.goldLabel.text=e.goldCoin,this.container.timeGoldLabel.text=e.intervalTime.toString()+" / 秒",this.container.gemLabel.text=e.tlbc.toString(),e.offlineGoldCoin&&""!=e.offlineGoldCoin&&"0.0"!=e.offlineGoldCoin&&"0.00"!=e.offlineGoldCoin&&mvc.open(t.OfflineView),mvc.send(t.NC.Init_Gem,e.tlbcDTO)},i.prototype.onClick=function(e){e.currentTarget==this.container.steupBtn?mvc.open(t.SetupView):e.currentTarget==this.container.imgDogBtn?mvc.open(t.DiagramView):e.currentTarget==this.container.shopBtn?mvc.open(t.ShopView):e.currentTarget==this.container.transferBtn?mvc.open(t.TransterView):e.currentTarget==this.container.myDogBtn?mvc.open(t.MyDogView):e.currentTarget==this.container.jiaSuBtn?mvc.open(t.SpeedUpView):e.currentTarget==this.container.inviteBtn?mvc.open(t.InviteView):e.currentTarget==this.container.waterDogBtn?t.TipView.showTip("该功能尚未开放！"):e.currentTarget==this.container.dogBtn&&t.HttpManager.postHttpByParam(t.NC.AddSpeedGoldCoin_Url,{addSpeedType:3},this.AddSpeedGoldCoin_Url,this)},i.prototype.AddSpeedGoldCoin_Url=function(e){"60"!=e&&t.TipView.showTip("喂粮成功")},i.NAME="mainView",i}(t.View);t.MainView=e,__reflect(e.prototype,"game.MainView")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.lv=mvc.MvcConst.VIEW_LV_1,e.layer=mvc.MvcConst.VIEW_LAYER,e}return __extends(e,t),e.prototype.initLayoutJson=function(t){this.initContainer(new ui.MyDogUI,t)},e.prototype.init=function(){console.info("MyDogView初始化完成");for(var t=["dog1_5","dog6_10","dog11_15","dog16_20","dog21_25","dog26_30","dog30_37","dog38_42","dog43","dog44"],e=0;e<t.length;e++){var i=new morn.Button;i.skin="main_json.btn_"+t[e],i.stateNum=1,i.x=120*e,this.container.dogPanel.addChild(i)}this.showGrayBg()},e.NAME="MyDogView",e}(t.View);t.MyDogView=e,__reflect(e.prototype,"game.MyDogView")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.lv=mvc.MvcConst.VIEW_LV_1,e.layer=mvc.MvcConst.VIEW_LAYER,e}return __extends(e,t),e.prototype.initLayoutJson=function(t){this.initContainer(new ui.SetupViewUI,t)},e.prototype.init=function(){console.info("setupView初始化完成"),this.centerView(),this.showGrayBg()},e.prototype.onClick=function(t){},e.NAME="setupView",e}(t.View);t.SetupView=e,__reflect(e.prototype,"game.SetupView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_1,t.layer=mvc.MvcConst.VIEW_LAYER,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.ShopUI,t)},i.prototype.init=function(){console.info("ShopView初始化完成"),t.HttpManager.postHttp(t.NC.Shop_Url,this.onPostHttp,this),this.showGrayBg()},i.prototype.onClose=function(){if(t.HttpManager.clearUrl(t.NC.Shop_Url),this.shopItems){for(var e=0;e<this.shopItems.length;e++){var i=this.shopItems[e];i.bugBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)}this.shopItems=[]}},i.prototype.onPostHttp=function(e){this.shopItems=[],this.db.shopDogVoList=e.lists;var i=e.lists;this.container.goldLabel.text=e.goldCoin;for(var n=0;n<i.length;n++){var o=new ui.ShopItemUI;this.shopItems.push(o),o.x=38,o.y=5+180*n,this.container.panel.addChild(o);var r=i[n],s=t.PetUtls.getDogStar(r.dogGradeId);o.skin="main_json."+this.db.dogsRes.get("shop"+r.dogGradeId),o.starLabel.text=s+"星",o.indexLabel.text=String(n+1),o.nameLabel.text=r.dogLevelName,0==r.isLock?(o.bugBtn.skin="main_json.btn_shop_close",o.bugBtn.mouseEnabled=!1):(o.bugBtn.mouseEnabled=!0,r.isBuyGoldcoin?o.bugBtn.skin="main_json.btn_shop_gold":o.bugBtn.skin="main_json.btn_shop_gem",o.bugBtn.tag=r,o.bugBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),o.bugBtn.label=String(r.hightBuyValue))}},i.prototype.onClick=function(e){this.selectButton=e.currentTarget;var i=this.selectButton.tag;if(i){var n=this.db.getBuyBogLocal();if(0==n)return console.log("位置已经满了，不能买狗"),void t.TipView.showTip(t.TipConst.Shop_Dog_Full);var o={};o.dogGrade=i.dogGradeId,o.toPositionId=n,i.isBuyGoldcoin?(o.goldCoin=i.currentPrice,t.HttpManager.postHttpByParam(t.NC.BuyDog_Url,o,this.onBuyDog,this)):(o.tlbcValue=i.currentPrice,t.HttpManager.postHttpByParam(t.NC.BuyGemDog_Url,o,this.onBuyDog,this))}else console.log("商店没有宠物数据，无法购买")},i.prototype.onBuyDog=function(e){if(console.log(e),e.goldCoin?mvc.send(t.NC.Update_Gold,e.goldCoin):mvc.send(t.NC.Update_Tlbc,e.tlbcValue),t.Modules.mainModule.addDog(e.dogGradeId,e.positionId),this.selectButton){var i=this.selectButton.tag;i.currentPrice=e.currentPrice,this.selectButton.label=e.currentPrice}},i.NAME="ShopView",i}(t.View);t.ShopView=e,__reflect(e.prototype,"game.ShopView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_1,t.layer=mvc.MvcConst.VIEW_LAYER,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.SpeedUpUI,t)},i.prototype.init=function(){console.info("SpeedUpView初始化完成"),this.showGrayBg(),this.addButtonEvent(this.container.add60Btn,this.onClick,this),this.addButtonEvent(this.container.add200Btn,this.onClick,this)},i.prototype.onClick=function(e){var i=0;if(e.currentTarget==this.container.add60Btn)i=1;else if(e.currentTarget==this.container.add200Btn)return t.JSBrigd.getInstance().openShowAd("5"),void this.close();var n={};n.addSpeedType=i,t.HttpManager.postHttpByParam(t.NC.AddSpeedGoldCoin_Url,n,this.AddSpeedGoldCoin_Url,this)},i.prototype.AddSpeedGoldCoin_Url=function(e){"60"==e?(console.info("钻石加速成功"),t.TipView.showTip("钻石加速成功")):t.JSBrigd.getInstance().openShowAd("5")},i.NAME="SpeedUpView",i}(t.View);t.SpeedUpView=e,__reflect(e.prototype,"game.SpeedUpView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.timeKey=0,t.currentAngle=0,t.speedList=[27,28,21.5,22.5,23.5,24.5,25.5,26],t.speed=24.5,t.speedCount=0,t.lv=mvc.MvcConst.VIEW_LV_1,t.layer=mvc.MvcConst.VIEW_LAYER,t.orders=["1","4","8","2","5","3","7","6"],t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.TransferUI,t)},i.prototype.init=function(){console.info("TransferView初始化完成"),this.container.startBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),t.HttpManager.postHttp(t.NC.Transter_Info_Url,this.onPostHttp,this),this.showGrayBg()},i.prototype.onPostHttp=function(t){this.updateCount(t.prizeCount),"0"==t.prizeCount&&(this.container.startBtn.gray=!0)},i.prototype.onClick=function(e){e.currentTarget==this.container.startBtn&&t.HttpManager.postHttp(t.NC.Transter_start_Url,this.onStartHttp,this)},i.prototype.onStartHttp=function(t){console.log("抽奖结果:",t),this.transferStartVo=t;for(var e=0;e<=this.orders.length;e++)if(this.orders[e]==t.prizeType){this.speed=this.speedList[e];break}this.currentAngle=0,this.speedCount=0,this.timeKey=asf.App.timeMgr.doLoop(33,this.onLoop,this,this.timeKey)},i.prototype.showResult=function(){this.updateCount(this.transferStartVo.prizeCount),"1"==this.transferStartVo.prizeType||"2"==this.transferStartVo.prizeType?t.AlertView.showGainGold(this.transferStartVo.prize):"3"==this.transferStartVo.prizeType||"4"==this.transferStartVo.prizeType?t.AlertView.showMoreGainGold(this.transferStartVo.prize):(console.log("转盘的其他结果"),t.CommonAlertView.showGem(this.transferStartVo.prizeCount))},i.prototype.updateCount=function(t){this.container.pecksLabel.text="转盘卷 x "+t},i.prototype.onLoop=function(){this.currentAngle+=this.speed,this.speed-=.5,this.currentAngle>=360&&console.log("转一圈了"),this.currentAngle>360&&(this.currentAngle=this.currentAngle-360),this.container?this.container.pointerImg.rotation=this.currentAngle:asf.App.timeMgr.clearTimer(this.timeKey),this.speed<=0&&(asf.App.timeMgr.clearTimer(this.timeKey),this.showResult())},i.NAME="TransterView",i}(t.View);t.TransterView=e,__reflect(e.prototype,"game.TransterView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.init=function(){console.log("MainBackstageHelper初始化了"),asf.App.timer.doLoop(12e4,this.onMinuteUpdate,this),mvc.on(t.NC.Init_Gem,this.createGem,this)},i.prototype.createGem=function(e){this.gemList=[];for(var i=0;i<e.tlbcList.length&&!(i>=5);i++){var n=new ui.GemItemUI;n.numLabel.text=String(e.tlbcList[i]),n.x=287+72*i,n.y=169,n.tag=i,this.gemList[i]=new t.GemItem(n),this.view.container.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)}t.MovieMgr.getInstance().load("miner",t.Session.instance.config.assets+"effect/miner/miner",new asf.CallBack(this.onLoadMove,this))},i.prototype.onLoadMove=function(t,e,i){this.miner=new egret.MovieClip(t),this.miner.scaleX=this.miner.scaleY=.36,this.miner.x=629,this.miner.y=164,this.miner.frameRate=12,this.view.container.addChild(this.miner),this.miner.play(-1)},i.prototype.onClick=function(e){var i=e.currentTarget;if(i){this.delIndex=i.tag;var n={};n.tlbcIndex=i.tag,t.HttpManager.postHttpByParam(t.NC.ReceiveGoldTlbc_Url,n,this.ReceiveGoldTlbc_Url,this)}},i.prototype.ReceiveGoldTlbc_Url=function(t){var e=Number(this.view.container.gemLabel.text)+Number(t);this.view.container.gemLabel.text=String(e);var i=this.gemList[this.delIndex];this.gemList.splice(this.delIndex,1),i.gemItem.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),i.clear();for(var n=0;n<this.gemList.length;n++)i=this.gemList[n],i.gemItem.tag=n,i.gemItem.x=287+72*n,i.gemItem.y=169},i.prototype.onMinuteUpdate=function(){t.HttpManager.postHttp(t.NC.Select_Gold_Url,this.Select_Gold_Url,this)},i.prototype.Select_Gold_Url=function(t){this.view.container.goldLabel.text=t},i.NAME="MainBackstageHelper",i}(t.Helper);t.MainBackstageHelper=e,__reflect(e.prototype,"game.MainBackstageHelper")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_1,t.layer=mvc.MvcConst.VIEW_LAYER,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.MoneyPetMergeUI,t)},i.prototype.init=function(){console.info("InviteView初始化完成");for(var t=38;42>=t;t++){var e=this.container["img"+t];e.gray=!0}this.container.mergeBtn.gray=!0;var i=0;this.fiveMap=new asf.HashMap;for(var n=1;12>=n;n++)i=this.db.mainInfoVo["position"+n],0==i||i>42||38>i||this.fiveMap.hasKey(i)||(this.fiveMap.put(i,n),this.container["img"+i].gray=!1);this.fiveMap.size()>=5&&(this.container.mergeBtn.gray=!1,this.addButtonEvent(this.container.mergeBtn,this.onClick,this)),this.showGrayBg()},i.prototype.onClick=function(e){if(e.currentTarget==this.container.mergeBtn){var i={};for(var n in this.fiveMap.getContainer()){var o=Number(n);i.strDogId?(i.strDogId+=","+n,i.strPosition+=","+this.fiveMap.get(o)):(i.strDogId=n,i.strPosition=this.fiveMap.get(o))}i.toPositionId=this.openParam,t.HttpManager.postHttpByParam(t.NC.SeparateDogMerge,i,this.SeparateDogMerge,this)}},i.prototype.SeparateDogMerge=function(e){t.Modules.mainModule.mainView.onMergeDog(e)},i.NAME="MonyPetMergeView",i}(t.View);t.MoneyPetMergeView=e,__reflect(e.prototype,"game.MoneyPetMergeView")}(game||(game={}));var game;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lv=mvc.MvcConst.VIEW_LV_1,t.layer=mvc.MvcConst.VIEW_LAYER,t}return __extends(i,e),i.prototype.initLayoutJson=function(t){this.initContainer(new ui.RamdomMergePetUI,t)},i.prototype.init=function(){console.info("RandomMergeView初始化完成"),this.container.startBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this),this.showGrayBg()},i.prototype.onClick=function(e){e.currentTarget==this.container.startBtn?t.HttpManager.postHttpByParam(t.NC.Merge_Dog_Url,this.openParam,this.onMergeDog,this):this.close()},i.prototype.onMergeDog=function(e){console.info("37狗合成成功"),this.close(),t.Modules.mainModule.mainView.onMergeDog(e)},i.NAME="RandomMergeView",i}(t.View);t.RandomMergeView=e,__reflect(e.prototype,"game.RandomMergeView")}(game||(game={}));var game;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.index=t,i.stars=[],i.createView(),i.checkScope=new egret.Rectangle(0,0,160,180),i}return __extends(i,e),i.prototype.isFiveCerealsDog=function(){return this.dogLv>=38&&this.dogLv<=42?!0:!1},i.prototype.createView=function(){this.bg=new ui.MainPetShowUI,this.addChild(this.bg)},i.prototype.destory=function(){this.dog&&(this.dog.stop(),this.dog=null),this.bg.destroy(),this.bg=null},i.prototype.showEffect=function(e){var i=new t.EgretMovieEffect,n=e%5;e>38||31==e||31>e&&0==n?(i.playOnce("effect/changeLv/changeLv"),i.x=-85,i.y=-150):(i.playOnce("effect/lvUp/lvUp"),i.x=-110,i.y=-110),this.addChild(i)},i.prototype.cleanDragInfo=function(){t.Session.instance.root.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMoveClick,this)},i.prototype.closeDog=function(){if(this.dog){this.dog.stop(),this.removeChild(this.dog),this.dog=null,this.hasDog=!1,this.dogLv=0,t.DB.instance.mainInfoVo["position"+this.index]=0;for(var e=1;e<=this.stars.length;e++){var i=this.stars[e];i&&(i.visible=!1)}}t.Session.instance.root.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMoveClick,this)},i.prototype.update=function(e){this.closeDog(),this.dogLv=e,console.info(this.index+"更新狗狗信息:"+e),0==e&&console.log("1"),t.DB.instance.mainInfoVo["position"+this.index]=e,this.hasDog=!0;var i=t.DB.instance.dogsRes.get("pet"+e),n=t.PetUtls.getDogStar(e);if(this.dog=new egret.MovieClip,t.MovieMgr.getInstance().load(i,t.Session.instance.config.assets+"pet/"+i,new asf.CallBack(this.onLoadMove,this)),31>e)for(var o=1;5>=o;o++){var r=this.stars[o];r||(r=new morn.Image,r.skin="main_json.star",r.scale=1.4,r.x=-70+30*(o-1),r.y=35,this.addChild(r),this.stars[o]=r),r.visible=!0,o>n?r.gray=!0:r.gray=!1}this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginClick,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndClick,this)},i.prototype.onBeginClick=function(t){console.log("点击了"),this.dog&&this.hasDog&&(this.isClick=!0,asf.App.timer.doOnce(10,this.onDragEvent,this))},i.prototype.onDragEvent=function(){this.isClick&&(t.Session.instance.selectDogUI=this,t.Session.instance.root.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMoveClick,this))},i.prototype.onMoveClick=function(e){console.log("开始移动了"),t.Session.instance.moveDragDog(this.index,this.dogLv,e.stageX,e.stageY)},i.prototype.onEndClick=function(e){this.isClick=!1,t.Session.instance.root.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBeginClick,this)},i.prototype.getImage=function(t){return this.bg["start"+t]},i.prototype.onLoadMove=function(e,i,n){this.bg&&(this.dog=new egret.MovieClip(e),this.dog.scaleX=this.dog.scaleY=1.2,this.dog.x=-165,this.dog.y=-220,this.dog.frameRate=10,this.addChild(this.dog),this.dog.play(-1),this.dogLv>=31&&this.dogLv<=36&&t.ImageUtils.dogColor(this.dog,this.dogLv))},i}(egret.Sprite);t.MainPetShowView=e,__reflect(e.prototype,"game.MainPetShowView")}(game||(game={}));var game;!function(t){var e=function(){function e(){}return e.prototype.init=function(){this.db=t.DB.ins},e.prototype.openViewHold=function(t,e,i,n){},e}();t.GameHoldupView=e,__reflect(e.prototype,"game.GameHoldupView",["mvc.IHoldupView"])}(game||(game={}));var mvc;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShowBg=!1,e}return __extends(e,t),e.View_onOpen="View_onOpen",e.View_onClose="View_onClose",e}(game.View);t.GameView=e,__reflect(e.prototype,"mvc.GameView")}(mvc||(mvc={}));var asf;!function(t){var e=function(){function e(){}return e.push=function(t,e){var i=this.map.get(t);i||(i=[],this.map.put(t,i)),i.push(e)},e.call=function(t){var e=this.map.get(t);if(e&&e.length>0){var i=e.shift();return i.execute(),0==e.length&&this.map.remove(t),!0}return!1},e.callAll=function(t){for(;this.has(t);)this.call(t)},e.has=function(t){var e=this.map.get(t);return e&&e.length>0?!0:!1},e.map=new t.Dictionary,e}();t.DelayCallBack=e,__reflect(e.prototype,"asf.DelayCallBack")}(asf||(asf={}));var asf;!function(t){var e=[],i=Math.PI/180,n=function(n){function o(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=n.call(this)||this;return i.x=t,i.y=e,i}return __extends(o,n),o.release=function(t){t&&e.push(t)},o.create=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=e.pop();return n||(n=new o),n.setTo(t,i)},Object.defineProperty(o.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),o.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},o.prototype.clone=function(){return o.create(this.x,this.y)},o.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},o.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},o.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.interpolate=function(t,e,i){var n=1-i;return new o(t.x*i+e.x*n,t.y*i+e.y*n)},o.prototype.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},o.prototype.offset=function(t,e){this.x+=t,this.y+=e},o.polar=function(e,n){return new o(e*t.NumberUtils.cos(n/i),e*t.NumberUtils.sin(n/i))},o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y)},o.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},o}(t.ASFObject);t.Point=n,__reflect(n.prototype,"asf.Point"),t.$TempPoint=new n}(asf||(asf={}));var game;!function(t){var e=function(){function e(){}return e.createURLLoader=function(t,e){var i=new egret.URLLoader,n=new egret.URLRequest;n.method=egret.URLRequestMethod.POST,n.url=this.urlHead+t,n.requestHeaders=[new egret.URLRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8")];var o=new egret.URLVariables;return e||(e={}),e.token=this.token,e.ver=this.ver,o.variables=e,n.data=o,i.addEventListener(egret.Event.COMPLETE,this.httpResult,this),i.load(n),n.url},e.clearUrl=function(t){this.checkRestUrlMap.remove(t)},e.postHttp=function(t,e,i){this.checkUrl(t)||this.callBackMap.put(this.createURLLoader(t),new asf.CallBack(e,i))},e.postHttpByParam=function(t,e,i,n){this.checkUrl(t)||this.callBackMap.put(this.createURLLoader(t,e),new asf.CallBack(i,n))},e.checkUrl=function(t){if(this.checkRestUrlMap.hasKey(t)){var e=this.checkRestUrlMap.get(t),i=egret.getTimer()-e;if(200>i)return console.log(t+"重复请求了"),!0;console.log(t+"距离上次请求超过200毫秒了，可以重新请求")}return this.checkRestUrlMap.put(t,egret.getTimer()),!1},e.onIoError=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.COMPLETE,this.httpResult,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.httpResult,this);this.callBackMap.remove(e._request.url);console.error(e._request.url+"无法请求到数据")},e.httpResult=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.COMPLETE,this.httpResult,this),i.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.httpResult,this);var n=this.callBackMap.remove(i._request.url),o=JSON.parse(i.data);console.log(i._request.url+"返回结果:",o),n&&(0==o.code?n.execute(o.data):(console.error(o),o.msg&&""!=o.msg&&t.TipView.showTip(o.msg)))},e.token="8252beaa12707e4c85a76596c487e3a8",e.ver="1.0",e.callBackMap=new asf.HashMap,e.checkRestUrlMap=new asf.HashMap,e}();t.HttpManager=e,__reflect(e.prototype,"game.HttpManager")}(game||(game={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin="main_json.alert_bg",i.x=62,i.y=356,e.effectImg=new morn.Image,this.addChild(e.effectImg),e.effectImg.skin=morn.Morn.ResUrl+"main/bg/gold_effect_bg.png",e.effectImg.x=367,e.effectImg.y=582,e.effectImg.anchorX=.5,e.effectImg.anchorY=.5;var n=new morn.Label;this.addChild(n),n.text="恭喜获得",n.x=127,n.y=25,n.width=133,n.height=32,n.bold=!0,n.size=25,e.titleImg=new morn.Image,this.addChild(e.titleImg),e.titleImg.skin="main_json.title_gain_gold",e.titleImg.x=156,e.titleImg.y=312,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=646,e.closeBtn.y=281,e.closeBtn.stateNum=1;var o=new morn.Image;this.addChild(o),o.skin="main_json.window_gold_bg",o.x=207,o.y=692,e.videoImg=new morn.Image,this.addChild(e.videoImg),e.videoImg.skin="main_json.logo_apcc",e.videoImg.x=347,e.videoImg.y=538,e.videoBtn=new morn.Button,this.addChild(e.videoBtn),e.videoBtn.label="确定",e.videoBtn.skin="main_json.btn_yellow",e.videoBtn.x=169,e.videoBtn.y=766,e.videoBtn.stateNum=1,e.videoBtn.sizeGrid="20,20,20,20",e.videoBtn.width=394,e.videoBtn.height=77,e.videoBtn.labelSize=40,e.videoBtn.visible=!1,e.tipLabel=new morn.Label,this.addChild(e.tipLabel),e.tipLabel.text="每天晚上20点重置视频次数(剩余14次)",e.tipLabel.x=186,e.tipLabel.y=847,e.tipLabel.width=397,e.tipLabel.height=24,e.tipLabel.size=20,e.tipLabel.color=16777215,e.tipLabel.align="center",e.tipLabel.visible=!1,e.gainLabel=new morn.Label,this.addChild(e.gainLabel),e.gainLabel.text="1700、0t",e.gainLabel.x=219,e.gainLabel.y=707,e.gainLabel.width=299,e.gainLabel.height=40,e.gainLabel.bold=!0,e.gainLabel.size=40,e.gainLabel.align="center"
},e}(morn.View);t.CommonAlertUI=e,__reflect(e.prototype,"ui.CommonAlertUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400,this.visible=!0;var i=new morn.Image;this.addChild(i),i.skin="main_json.alert_bg",i.x=63,i.y=358,e.effectImg=new morn.Image,this.addChild(e.effectImg),e.effectImg.skin=morn.Morn.ResUrl+"main/bg/gold_effect_bg.png",e.effectImg.x=357,e.effectImg.y=570,e.effectImg.anchorX=.5,e.effectImg.anchorY=.5,e.goldImg1=new morn.Image,this.addChild(e.goldImg1),e.goldImg1.skin="main_json.gold_3",e.goldImg1.x=239,e.goldImg1.y=438,e.goldImg2=new morn.Image,this.addChild(e.goldImg2),e.goldImg2.skin="main_json.gold_2",e.goldImg2.x=241,e.goldImg2.y=467,e.goldImg2.visible=!1,e.goldImg3=new morn.Image,this.addChild(e.goldImg3),e.goldImg3.skin="main_json.gold_1",e.goldImg3.x=262,e.goldImg3.y=481,e.goldImg3.visible=!1;var n=new morn.Image;this.addChild(n),n.skin="main_json.window_gold_bg",n.x=217,n.y=685,e.gainLabel=new morn.Label,this.addChild(e.gainLabel),e.gainLabel.text="1700、0t",e.gainLabel.x=221,e.gainLabel.y=699,e.gainLabel.width=299,e.gainLabel.height=40,e.gainLabel.bold=!0,e.gainLabel.size=40,e.gainLabel.align="center";var o=new morn.Label;this.addChild(o),o.text="恭喜获得",o.x=117,o.y=15,o.width=133,o.height=32,o.bold=!0,o.size=25,e.tipLabel=new morn.Label,this.addChild(e.tipLabel),e.tipLabel.text="每天晚上20点重置视频次数(剩余14次)",e.tipLabel.x=184,e.tipLabel.y=848,e.tipLabel.width=397,e.tipLabel.height=24,e.tipLabel.size=20,e.tipLabel.color=16777215,e.tipLabel.align="center",e.tipLabel.visible=!1,e.videoBtn=new morn.Button,this.addChild(e.videoBtn),e.videoBtn.skin="main_json.btn_look",e.videoBtn.x=172,e.videoBtn.y=767,e.videoBtn.stateNum=1,e.titleImg=new morn.Image,this.addChild(e.titleImg),e.titleImg.skin="main_json.title_gain_gold",e.titleImg.x=155,e.titleImg.y=315,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=645,e.closeBtn.y=280,e.closeBtn.stateNum=1},e}(morn.View);t.GainViewUI=e,__reflect(e.prototype,"ui.GainViewUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin="main_json.alert_bg",i.x=65,i.y=357,e.effectImg=new morn.Image,this.addChild(e.effectImg),e.effectImg.skin=morn.Morn.ResUrl+"main/bg/gold_effect_bg.png",e.effectImg.x=357,e.effectImg.y=607,e.effectImg.anchorX=.5,e.effectImg.anchorY=.5;var n=new morn.Image;this.addChild(n),n.skin="main_json.window_gold_bg",n.x=217,n.y=722,e.gainLabel=new morn.Label,this.addChild(e.gainLabel),e.gainLabel.text="1700.0t",e.gainLabel.x=221,e.gainLabel.y=736,e.gainLabel.width=299,e.gainLabel.height=40,e.gainLabel.bold=!0,e.gainLabel.size=40,e.gainLabel.align="center";var o=new morn.Label;this.addChild(o),o.text="恭喜获得",o.x=119,o.y=14,o.width=133,o.height=32,o.bold=!0,o.size=25,e.tipLabel=new morn.Label,this.addChild(e.tipLabel),e.tipLabel.x=177,e.tipLabel.y=886,e.tipLabel.width=397,e.tipLabel.height=24,e.tipLabel.size=20,e.tipLabel.color=16777215,e.tipLabel.align="center",e.tipLabel.visible=!1,e.titleImg=new morn.Image,this.addChild(e.titleImg),e.titleImg.skin="main_json.title_gain_gold",e.titleImg.x=157,e.titleImg.y=314,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=647,e.closeBtn.y=279,e.closeBtn.stateNum=1;var r=new morn.Image;this.addChild(r),r.skin="main_json.gold_2",r.x=231,r.y=462,e.videoBtn=new morn.Button,this.addChild(e.videoBtn),e.videoBtn.skin="main_json.btn_offline",e.videoBtn.x=174,e.videoBtn.y=801,e.videoBtn.stateNum=1},e}(morn.View);t.OffLineUI=e,__reflect(e.prototype,"ui.OffLineUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin="main_json.alert_bg",i.x=63,i.y=356;var n=new morn.Image;this.addChild(n),n.skin="main_json.title_tip",n.x=153,n.y=313;var o=new morn.Image;this.addChild(o),o.skin="main_json.item_bg",o.x=131,o.y=470,o.width=476,o.height=153,o.sizeGrid="20,20,20,20",e.sureBtn=new morn.Button,this.addChild(e.sureBtn),e.sureBtn.skin="main_json.btn_sure",e.sureBtn.x=253,e.sureBtn.y=708,e.sureBtn.stateNum=1,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=649,e.closeBtn.y=280,e.closeBtn.stateNum=1,e.tipLabel=new morn.Label,this.addChild(e.tipLabel),e.tipLabel.text="这个功能暂时没有开放，请稍微等，我们会继续做下去，会约略略好的，你真的好呀",e.tipLabel.x=134,e.tipLabel.y=524,e.tipLabel.width=471,e.tipLabel.height=43,e.tipLabel.color=0,e.tipLabel.size=30,e.tipLabel.multiline=!1,e.tipLabel.align="center"},e}(morn.View);t.TipUI=e,__reflect(e.prototype,"ui.TipUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=85,this.height=85,e.effectImg=new morn.Image,this.addChild(e.effectImg),e.effectImg.skin="main_json.apcc_effect",e.effectImg.x=42,e.effectImg.y=42,e.effectImg.anchorX=.5,e.effectImg.anchorY=.5;var i=new morn.Image;this.addChild(i),i.skin="main_json.gem_small",i.x=27,i.y=21,e.numLabel=new morn.Label,this.addChild(e.numLabel),e.numLabel.text="0.3999",e.numLabel.x=1,e.numLabel.y=63,e.numLabel.color=16777215,e.numLabel.size=20,e.numLabel.width=85,e.numLabel.height=22,e.numLabel.align="center"},e}(morn.View);t.GemItemUI=e,__reflect(e.prototype,"ui.GemItemUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);this.width=149,this.height=45;var e=new morn.Image;this.addChild(e),e.skin="main_json.sliderbg",e.x=0,e.y=0;var i=new morn.Image;this.addChild(i),i.skin="main_json.sliderband",i.x=8,i.y=5;var n=new morn.Image;this.addChild(n),n.skin="main_json.shop_point",n.x=78,n.y=-12},e}(morn.View);t.SliderComUI=e,__reflect(e.prototype,"ui.SliderComUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=599,this.height=300;var i=new morn.Image;this.addChild(i),i.skin="main_json.dogimg_line",i.x=71,i.y=291;var n=new morn.Label;this.addChild(n),n.text="技能",n.x=295,n.y=33,n.width=59,n.height=32,n.size=25,e.skillLabel=new morn.Label,this.addChild(e.skillLabel),e.skillLabel.text="XXXXXXX看看",e.skillLabel.x=291,e.skillLabel.y=69,e.skillLabel.width=197,e.skillLabel.height=48,e.skillLabel.size=20,e.skillLabel.multiline=!0;var o=new morn.Label;this.addChild(o),o.text="获取途径",o.x=296,o.y=121,o.width=105,o.height=29,o.size=25,e.desLabel=new morn.Label,this.addChild(e.desLabel),e.desLabel.text="获取途径",e.desLabel.x=294,e.desLabel.y=158,e.desLabel.width=192,e.desLabel.height=116,e.desLabel.multiline=!0,e.desLabel.size=20,e.nameLabel=new morn.Label,this.addChild(e.nameLabel),e.nameLabel.text="分红狗",e.nameLabel.x=62,e.nameLabel.y=228,e.nameLabel.width=224,e.nameLabel.height=49,e.nameLabel.size=40,e.nameLabel.align="center",e.dogImg=new morn.Image,this.addChild(e.dogImg),e.dogImg.x=169,e.dogImg.y=213},e}(morn.View);t.DiagramItemUI=e,__reflect(e.prototype,"ui.DiagramItemUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin=morn.Morn.ResUrl+"main/bg/0_狗狗图鉴.png",i.x=0,i.y=0;var n=new morn.Image;this.addChild(n),n.skin="main_json.alert_bg",n.x=63,n.y=203,n.width=600,n.height=992,n.sizeGrid="200,200,200,200",e.panel=new morn.Panel,this.addChild(e.panel),e.panel.vScrollBarSkin="null_json.null",e.panel.width=599,e.panel.height=992,e.panel.x=63,e.panel.y=203,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=645,e.closeBtn.y=125,e.closeBtn.stateNum=1;var o=new morn.Image;this.addChild(o),o.skin="main_json.title_dog_img",o.x=155,o.y=157},e}(morn.View);t.DiagramUI=e,__reflect(e.prototype,"ui.DiagramUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin="loading_json.loading",i.x=0,i.y=0,e.dogImg=new morn.Image,this.addChild(e.dogImg),e.dogImg.skin="loading_json.dog",e.dogImg.x=142,e.dogImg.y=300,e.loadingLabel=new morn.Label,this.addChild(e.loadingLabel),e.loadingLabel.text="60%",e.loadingLabel.x=266,e.loadingLabel.y=951,e.loadingLabel.width=224,e.loadingLabel.height=86,e.loadingLabel.size=70,e.loadingLabel.color=16777215,e.loadingLabel.align="center",e.blackDogImg=new morn.Image,this.addChild(e.blackDogImg),e.blackDogImg.skin="loading_json.black_dog",e.blackDogImg.x=142,e.blackDogImg.y=300},e}(morn.View);t.LoadingUI=e,__reflect(e.prototype,"ui.LoadingUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);this.width=345,this.height=328;var e=new morn.Image;this.addChild(e),e.skin="main_json.setup_bg",e.x=0,e.y=0;var i=new morn.Label;this.addChild(i),i.text="免费宝箱",i.x=118,i.y=19,i.width=106,i.height=30,i.size=25},e}(morn.View);t.GainRegardViewUI=e,__reflect(e.prototype,"ui.GainRegardViewUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;e.width=750,e.height=1400;var i=new morn.Image;e.addChild(i),i.skin="main_json.alert_bg",i.x=62,i.y=358,e.closeBtn=new morn.Button,e.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=645,e.closeBtn.y=281,e.closeBtn.stateNum=1;var n=new morn.Image;e.addChild(n),n.skin="main_json.title_invite",n.x=154,n.y=314,e.cardLabel=new morn.Label,e.addChild(e.cardLabel),e.cardLabel.text="我的邀请卡：0张",e.cardLabel.x=166,e.cardLabel.y=493,e.cardLabel.width=407,e.cardLabel.height=56,e.cardLabel.color=16777215,e.cardLabel.size=50,e.cardLabel.align="left";var o=new morn.Label;e.addChild(o),o.text="1张邀请卡 = 1名有效好友",o.x=179,o.y=602,o.width=387,o.height=42,o.size=40,o.color=4861184,e.pyqBtn=new morn.Button,e.addChild(e.pyqBtn),e.pyqBtn.skin="main_json.btn_invite_pyq",e.pyqBtn.x=230,e.pyqBtn.y=739,e.pyqBtn.stateNum=1,e.pyqBtn.visible=!1,e.qqBtn=new morn.Button,e.addChild(e.qqBtn),e.qqBtn.skin="main_json.btn_invite_qq",e.qqBtn.x=426,e.qqBtn.y=738,e.qqBtn.stateNum=1,e.qqBtn.visible=!1,e.wbBtn=new morn.Button,e.addChild(e.wbBtn),e.wbBtn.skin="main_json.btn_invite_wb",e.wbBtn.x=327,e.wbBtn.y=739,e.wbBtn.stateNum=1,e.wbBtn.visible=!1,e.wxBtn=new morn.Button,e.addChild(e.wxBtn),e.wxBtn.skin="main_json.btn_invite_wx",e.wxBtn.x=139,e.wxBtn.y=739,e.wxBtn.stateNum=1,e.wxBtn.visible=!1,e.zoneBtn=new morn.Button,e.addChild(e.zoneBtn),e.zoneBtn.skin="main_json.btn_invite_zone",e.zoneBtn.x=524,e.zoneBtn.y=739,e.zoneBtn.stateNum=1,e.zoneBtn.visible=!1;var r=new morn.Label;e.addChild(r),r.text="微信",r.x=140,r.y=815,r.color=14079702,r.width=69,r.height=22,r.align="center",r.mouseEnabled=!1,r.size=20,r.visible=!1;var s=new morn.Label;e.addChild(s),s.text="朋友圈",s.x=232,s.y=815,s.color=14079702,s.width=69,s.height=22,s.align="center",s.mouseEnabled=!1,s.size=20,s.visible=!1;var a=new morn.Label;e.addChild(a),a.text="微博",a.x=330,a.y=815,a.color=14079702,a.width=69,a.height=22,a.align="center",a.mouseEnabled=!1,a.size=20,a.visible=!1;var h=new morn.Label;e.addChild(h),h.text="QQ",h.x=430,h.y=815,h.color=14079702,h.width=69,h.height=22,h.align="center",h.mouseEnabled=!1,h.size=20,h.visible=!1;var l=new morn.Label;e.addChild(l),l.text="QQ空间",l.x=525,l.y=815,l.color=14079702,l.width=79,l.height=22,l.align="center",l.mouseEnabled=!1,l.size=20,l.visible=!1},e}(morn.View);t.InviteUI=e,__reflect(e.prototype,"ui.InviteUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);this.width=10,this.height=10;var e=new morn.Image;this.addChild(e),e.skin="main_json.dog_bom_effect",e.x=-87,e.y=-23},e}(morn.View);t.MainPetShowUI=e,__reflect(e.prototype,"ui.MainPetShowUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);this.width=100,this.height=100;var e=new morn.Image;this.addChild(e),e.skin="main_json.petBottom",e.x=-1,e.y=-27},e}(morn.View);t.MainPetUI=e,__reflect(e.prototype,"ui.MainPetUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1500;var i=new morn.Image;this.addChild(i),i.skin=morn.Morn.ResUrl+"main/bg/bom.jpg",i.x=0,i.y=0;var n=new morn.Box;this.addChild(n),n.x=17,n.y=160;var o=new morn.Image;n.addChild(o),o.skin="main_json.apcc_bg",e.imgDogBtn=new morn.Button,this.addChild(e.imgDogBtn),e.imgDogBtn.skin="main_json.btn_dogImg",e.imgDogBtn.x=155,e.imgDogBtn.y=285,e.imgDogBtn.stateNum=1;var r=new morn.Image;this.addChild(r),r.skin="main_json.gold_bg",r.x=23,r.y=424;var s=new morn.Image;this.addChild(s),s.skin="main_json.goldGainBg",s.x=23,s.y=48,e.howBtn=new morn.Button,this.addChild(e.howBtn),e.howBtn.skin="main_json.btn_howgame",e.howBtn.x=34,e.howBtn.y=284,e.howBtn.stateNum=1,e.transferBtn=new morn.Button,this.addChild(e.transferBtn),e.transferBtn.skin="main_json.btn_transfer",e.transferBtn.x=267,e.transferBtn.y=284,e.transferBtn.stateNum=1,e.msgBtn=new morn.Button,this.addChild(e.msgBtn),e.msgBtn.skin="main_json.btn_msg",e.msgBtn.x=381,e.msgBtn.y=283,e.msgBtn.stateNum=1,e.activityBtn=new morn.Button,this.addChild(e.activityBtn),e.activityBtn.skin="main_json.btn_activity",e.activityBtn.x=495,e.activityBtn.y=284,e.activityBtn.stateNum=1,e.steupBtn=new morn.Button,this.addChild(e.steupBtn),e.steupBtn.skin="main_json.btn_steup",e.steupBtn.x=605,e.steupBtn.y=285,e.steupBtn.stateNum=1,e.dogBtn=new morn.Button,this.addChild(e.dogBtn),e.dogBtn.skin="main_json.btn_dog",e.dogBtn.x=299,e.dogBtn.y=422,e.dogBtn.stateNum=1,e.waterDogBtn=new morn.Button,this.addChild(e.waterDogBtn),e.waterDogBtn.skin="main_json.btn_water",e.waterDogBtn.x=516,e.waterDogBtn.y=422,e.waterDogBtn.stateNum=1,e.inviteBtn=new morn.Button,this.addChild(e.inviteBtn),e.inviteBtn.skin="main_json.btn_yqjuan",e.inviteBtn.x=41,e.inviteBtn.y=1190,e.inviteBtn.stateNum=1,e.jiaSuBtn=new morn.Button,this.addChild(e.jiaSuBtn),e.jiaSuBtn.skin="main_json.btn_jiaSu",e.jiaSuBtn.x=226,e.jiaSuBtn.y=1190,e.jiaSuBtn.stateNum=1,e.shopBtn=new morn.Button,this.addChild(e.shopBtn),e.shopBtn.skin="main_json.btn_shop",e.shopBtn.x=413,e.shopBtn.y=1189,e.shopBtn.stateNum=1,e.restBtn=new morn.Button,this.addChild(e.restBtn),e.restBtn.skin="main_json.btn_rest",e.restBtn.x=621,e.restBtn.y=1182,e.restBtn.stateNum=1,e.myDogBtn=new morn.Button,this.addChild(e.myDogBtn),e.myDogBtn.skin="main_json.btn_dog1_5",e.myDogBtn.x=605,e.myDogBtn.y=47,e.myDogBtn.stateNum=1,e.timeGoldLabel=new morn.Label,this.addChild(e.timeGoldLabel),e.timeGoldLabel.text="13.5t/秒",e.timeGoldLabel.x=109,e.timeGoldLabel.y=478,e.timeGoldLabel.width=148,e.timeGoldLabel.height=28,e.timeGoldLabel.size=25,e.timeGoldLabel.align="center",e.timeGoldLabel.color=16777215,e.timeGoldLabel.selectable=!1,e.timeGoldLabel.mouseEnabled=!1,e.goldLabel=new morn.Label,this.addChild(e.goldLabel),e.goldLabel.x=101,e.goldLabel.y=435,e.goldLabel.width=170,e.goldLabel.height=36,e.goldLabel.size=35,e.goldLabel.align="center",e.goldLabel.color=0,e.goldLabel.bold=!0,e.goldLabel.text="1235.5 t",e.goldLabel.selectable=!1,e.goldLabel.mouseEnabled=!1,e.rateLabel=new morn.Label,this.addChild(e.rateLabel),e.rateLabel.text="40%",e.rateLabel.x=509,e.rateLabel.y=71,e.rateLabel.width=43,e.rateLabel.height=28,e.rateLabel.size=25,e.rateLabel.align="center",e.rateLabel.color=16777215,e.rateLabel.selectable=!1,e.rateLabel.mouseEnabled=!1,e.gainMoneyLabel=new morn.Label,this.addChild(e.gainMoneyLabel),e.gainMoneyLabel.text="13.5t/秒",e.gainMoneyLabel.x=133,e.gainMoneyLabel.y=103,e.gainMoneyLabel.width=148,e.gainMoneyLabel.height=28,e.gainMoneyLabel.size=25,e.gainMoneyLabel.align="center",e.gainMoneyLabel.color=16777215,e.gainMoneyLabel.selectable=!1,e.gainMoneyLabel.mouseEnabled=!1,e.gemLabel=new morn.Label,this.addChild(e.gemLabel),e.gemLabel.text="100.309",e.gemLabel.x=98,e.gemLabel.y=196,e.gemLabel.width=196,e.gemLabel.height=38,e.gemLabel.size=40,e.gemLabel.align="left",e.gemLabel.color=16777215,e.gemLabel.selectable=!1,e.gemLabel.mouseEnabled=!1,e.gemLabel.bold=!0,e.foodBtn=new morn.Image,this.addChild(e.foodBtn),e.foodBtn.skin="main_json.sh",e.foodBtn.x=297,e.foodBtn.y=423;var a=new morn.Image;this.addChild(a),a.skin="main_json.water",a.x=517,a.y=423},e}(morn.View);t.MainViewUI=e,__reflect(e.prototype,"ui.MainViewUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;e.width=750,e.height=1400;var i=new morn.Image;e.addChild(i),i.skin="main_json.alert_bg",i.x=63,i.y=202,i.sizeGrid="200,200,200,200",i.width=599,i.height=694;var n=new morn.Image;e.addChild(n),n.skin="main_json.my_dog_bg",n.x=124,n.y=295,e.dogPanel=new morn.Panel,e.addChild(e.dogPanel),e.dogPanel.x=103,e.dogPanel.y=667,e.dogPanel.height=142,e.dogPanel.width=505,e.dogPanel.hScrollBarSkin="null_json.null",e.dogContainer=new morn.Image,e.addChild(e.dogContainer),e.dogContainer.x=375,e.dogContainer.y=538,e.closeBtn=new morn.Button,e.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=644,e.closeBtn.y=123,e.closeBtn.stateNum=1;var o=new morn.Image;e.addChild(o),o.skin="main_json.title_myDog",o.x=154,o.y=156},e}(morn.View);t.MyDogUI=e,__reflect(e.prototype,"ui.MyDogUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin="main_json.alert_bg",i.x=65,i.y=356,e.goldBgImg=new morn.Image,this.addChild(e.goldBgImg),e.goldBgImg.skin="main_json.gold_effect_bg",e.goldBgImg.x=186,e.goldBgImg.y=406;var n=new morn.Image;this.addChild(n),n.skin="main_json.window_gold_bg",n.x=240,n.y=701,e.gainLabel=new morn.Label,this.addChild(e.gainLabel),e.gainLabel.text="1700、0t",e.gainLabel.x=238,e.gainLabel.y=713,e.gainLabel.width=299,e.gainLabel.height=40,e.gainLabel.bold=!0,e.gainLabel.size=40,e.gainLabel.align="center",e.goldImg=new morn.Image,this.addChild(e.goldImg),e.goldImg.skin="main_json.gold_1",e.goldImg.x=262,e.goldImg.y=485;var o=new morn.Image;this.addChild(o),o.skin="main_json.title_recover",o.x=154,o.y=311,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=643,e.closeBtn.y=283,e.closeBtn.stateNum=1,e.tipLabel=new morn.Label,this.addChild(e.tipLabel),e.tipLabel.text="您当前回收二哈犬，可获取：",e.tipLabel.x=110,e.tipLabel.y=426,e.tipLabel.width=522,e.tipLabel.height=40,e.tipLabel.align="center",e.tipLabel.size=30,e.cancelBtn=new morn.Button,this.addChild(e.cancelBtn),e.cancelBtn.label="取消",e.cancelBtn.skin="main_json.btn_blue",e.cancelBtn.x=183,e.cancelBtn.y=776,e.cancelBtn.stateNum=1,e.cancelBtn.labelBold=!0,e.cancelBtn.labelSize=30,e.sureBtn=new morn.Button,this.addChild(e.sureBtn),e.sureBtn.label="确定",e.sureBtn.skin="main_json.btn_yellow",e.sureBtn.x=396,e.sureBtn.y=775,e.sureBtn.stateNum=1,e.sureBtn.labelBold=!0,e.sureBtn.labelSize=30},e}(morn.View);t.RecoverDogUI=e,__reflect(e.prototype,"ui.RecoverDogUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin="main_json.alert_bg",i.x=63,i.y=358,e.add60Btn=new morn.Button,this.addChild(e.add60Btn),e.add60Btn.skin="main_json.btn_addSpeed_apcc",e.add60Btn.x=172,e.add60Btn.y=472,e.add60Btn.stateNum=1,e.add200Btn=new morn.Button,this.addChild(e.add200Btn),e.add200Btn.skin="main_json.btn_addSpeed_video",e.add200Btn.x=172,e.add200Btn.y=657,e.add200Btn.stateNum=1;var n=new morn.Image;this.addChild(n),n.skin="main_json.title_speedup",n.x=155,n.y=315,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=645,e.closeBtn.y=281,e.closeBtn.stateNum=1},e}(morn.View);t.SpeedUpUI=e,__reflect(e.prototype,"ui.SpeedUpUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=120,this.height=106,e.effectImg=new morn.Image,this.addChild(e.effectImg),e.effectImg.skin="main_json.perfect_effect",e.effectImg.x=0,e.effectImg.y=0,e.ziImg=new morn.Image,this.addChild(e.ziImg),e.ziImg.skin="main_json.perfect_zhong",e.ziImg.x=14,e.ziImg.y=10},e}(morn.View);t.MergetZiUI=e,__reflect(e.prototype,"ui.MergetZiUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin=morn.Morn.ResUrl+"main/bg/money_bg.png",i.x=109,i.y=344,e.img39=new morn.Image,this.addChild(e.img39),e.img39.skin="main_json.money_zhong",e.img39.x=120,e.img39.y=437,e.img41=new morn.Image,this.addChild(e.img41),e.img41.skin="main_json.money_yong",e.img41.x=169,e.img41.y=710,e.img40=new morn.Image,this.addChild(e.img40),e.img40.skin="main_json.money_zhi",e.img40.x=538,e.img40.y=463,e.img38=new morn.Image,this.addChild(e.img38),e.img38.skin="main_json.money_meng",e.img38.x=321,e.img38.y=323,e.img42=new morn.Image,this.addChild(e.img42),e.img42.skin="main_json.money_fu",e.img42.x=472,e.img42.y=714,e.mergeBtn=new morn.Button,this.addChild(e.mergeBtn),e.mergeBtn.skin="main_json.btn_money",e.mergeBtn.x=316,e.mergeBtn.y=548,e.mergeBtn.stateNum=1,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=600,e.closeBtn.y=289,e.closeBtn.stateNum=1;var n=new morn.Image;this.addChild(n),n.skin="main_json.title_money",n.x=155,n.y=223},e}(morn.View);t.MoneyPetMergeUI=e,__reflect(e.prototype,"ui.MoneyPetMergeUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin=morn.Morn.ResUrl+"main/bg/radomMergeBg.png",i.x=64,i.y=277;var n=new morn.Image;this.addChild(n),n.skin="main_json.perfect_fuzi",n.x=155,n.y=517;var o=new morn.Image;this.addChild(o),o.skin="main_json.perfect_meng",o.x=401,o.y=724;var r=new morn.Image;this.addChild(r),r.skin="main_json.perfect_meng",r.x=220,r.y=410;var s=new morn.Image;this.addChild(s),s.skin="main_json.perfect_zhong",s.x=174,s.y=646;var a=new morn.Image;this.addChild(a),a.skin="main_json.perfect_zhong",a.x=451,a.y=412;var h=new morn.Image;this.addChild(h),h.skin="main_json.perfect_yong",h.x=498,h.y=644;var l=new morn.Image;this.addChild(l),l.skin="main_json.perfect_zhi",l.x=517,l.y=516,e.startBtn=new morn.Button,this.addChild(e.startBtn),e.startBtn.skin="main_json.btn_start",e.startBtn.x=256,e.startBtn.y=941,e.startBtn.stateNum=1,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=601,e.closeBtn.y=291,e.closeBtn.stateNum=1,e.zhong1Effect=new morn.Image,this.addChild(e.zhong1Effect),e.zhong1Effect.skin="main_json.perfect_effect",e.zhong1Effect.x=439,e.zhong1Effect.y=391,e.zhong2Effect=new morn.Image,this.addChild(e.zhong2Effect),e.zhong2Effect.skin="main_json.perfect_effect",e.zhong2Effect.x=164,e.zhong2Effect.y=628,e.meng1Effect=new morn.Image,this.addChild(e.meng1Effect),e.meng1Effect.skin="main_json.perfect_effect",e.meng1Effect.x=388,e.meng1Effect.y=707,e.meng2Effect=new morn.Image,this.addChild(e.meng2Effect),e.meng2Effect.skin="main_json.perfect_effect",e.meng2Effect.x=201,e.meng2Effect.y=392,e.fuEffect=new morn.Image,this.addChild(e.fuEffect),e.fuEffect.skin="main_json.perfect_effect",e.fuEffect.x=138,e.fuEffect.y=502,e.zhiEffect=new morn.Image,this.addChild(e.zhiEffect),e.zhiEffect.skin="main_json.perfect_effect",e.zhiEffect.x=505,e.zhiEffect.y=500,e.yongEffect=new morn.Image,this.addChild(e.yongEffect),e.yongEffect.skin="main_json.perfect_effect",e.yongEffect.x=483,e.yongEffect.y=624;var c=new morn.Image;this.addChild(c),c.skin="main_json.head_hongbao",c.x=274,c.y=717,c.scale=.85,c.guide="hongbaoImg",e.fenhongImg=new morn.Image,this.addChild(e.fenhongImg),e.fenhongImg.skin="main_json.hean_fenhong",e.fenhongImg.x=331,e.fenhongImg.y=356,e.fenhongImg.scale=.85;var u=new morn.Image;this.addChild(u),u.skin="main_json.title_perfect",u.x=152,u.y=224},e}(morn.View);t.RamdomMergePetUI=e,__reflect(e.prototype,"ui.RamdomMergePetUI")}(ui||(ui={}));var ui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this);var i=this;i.width=750,i.height=1400;var n=new morn.Image;i.addChild(n),n.skin="main_json.alert_bg",n.x=65,n.y=356;var o=new t.SliderComUI;i.addChild(o),o.x=445,o.y=559;var r=new morn.Label;i.addChild(r),r.text="音效",r.x=176,r.y=552,r.width=106,r.height=49,r.size=50,i.closeBtn=new morn.Button,i.addChild(i.closeBtn),i.closeBtn.skin="main_json.btn_close",i.closeBtn.x=645,i.closeBtn.y=281,i.closeBtn.stateNum=1;var s=new morn.Image;i.addChild(s),s.skin="main_json.title_setup",s.x=153,s.y=314},i}(morn.View);t.SetupViewUI=e,__reflect(e.prototype,"ui.SetupViewUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=453,this.height=165;var i=new morn.Image;this.addChild(i),i.skin="main_json.item_bg",i.x=0,i.y=0,i.sizeGrid="20,20,20,20",i.width=453,i.height=165,e.dogImg=new morn.Image,this.addChild(e.dogImg),e.dogImg.skin="main_json.shop1_5",e.dogImg.x=21,e.dogImg.y=6,e.dogImg.width=152,e.dogImg.height=143;var n=new morn.Image;this.addChild(n),n.skin="main_json.shop_point",n.x=-27,n.y=61,n.width=56,n.height=56,e.bugBtn=new morn.Button,this.addChild(e.bugBtn),e.bugBtn.skin="main_json.btn_shop_close",e.bugBtn.x=243,e.bugBtn.y=97,e.bugBtn.stateNum=1,e.bugBtn.pointX=0,e.bugBtn.pointY=0,e.bugBtn.labelSize=30,e.bugBtn.labelColors="0x000000",e.nameLabel=new morn.Label,this.addChild(e.nameLabel),e.nameLabel.text="小土狗",e.nameLabel.x=162,e.nameLabel.y=31,e.nameLabel.width=271,e.nameLabel.height=44,e.nameLabel.align="left",e.nameLabel.size=40,e.starLabel=new morn.Label,this.addChild(e.starLabel),e.starLabel.text="1星",e.starLabel.x=168,e.starLabel.y=96,e.starLabel.width=56,e.starLabel.height=44,e.starLabel.align="left",e.starLabel.size=35,e.indexLabel=new morn.Label,this.addChild(e.indexLabel),e.indexLabel.text="1",e.indexLabel.x=-18,e.indexLabel.y=71,e.indexLabel.width=40,e.indexLabel.height=37,e.indexLabel.align="center",e.indexLabel.size=35},e}(morn.View);t.ShopItemUI=e,__reflect(e.prototype,"ui.ShopItemUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;this.width=750,this.height=1400;var i=new morn.Image;this.addChild(i),i.skin="main_json.alert_bg",i.x=63,i.y=202,i.sizeGrid="200,200,200,200",i.height=995;var n=new morn.Image;this.addChild(n),n.skin="main_json.window_gold_bg",n.x=126,n.y=290;var o=new morn.Image;this.addChild(o),o.skin="main_json.gold",o.x=163,o.y=303,e.goldLabel=new morn.Label,this.addChild(e.goldLabel),e.goldLabel.text="1700、0t",e.goldLabel.x=206,e.goldLabel.y=299,e.goldLabel.width=215,e.goldLabel.height=51,e.goldLabel.size=45,e.goldLabel.bold=!0,e.goldLabel.align="center";var r=new morn.Image;this.addChild(r),r.skin="main_json.shop_title",r.x=155,r.y=158,e.closeBtn=new morn.Button,this.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=644,e.closeBtn.y=127,e.closeBtn.stateNum=1,e.panel=new morn.Panel,this.addChild(e.panel),e.panel.x=112,e.panel.y=384,e.panel.width=486,e.panel.height=712,e.panel.vScrollBarSkin="null_json.null"},e}(morn.View);t.ShopUI=e,__reflect(e.prototype,"ui.ShopUI")}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this;e.width=750,e.height=1400;var i=new morn.Image;e.addChild(i),i.skin="main_json.tan_bg",i.x=101,i.y=318,e.closeBtn=new morn.Button,e.addChild(e.closeBtn),e.closeBtn.skin="main_json.btn_close",e.closeBtn.x=598,e.closeBtn.y=292,e.closeBtn.stateNum=1,e.pecksLabel=new morn.Label,e.addChild(e.pecksLabel),e.pecksLabel.text="转盘卷 x 5",e.pecksLabel.x=242,e.pecksLabel.y=885,e.pecksLabel.width=289,e.pecksLabel.height=56,e.pecksLabel.size=50,e.pecksLabel.color=3350016,e.tipLabel=new morn.Label,e.addChild(e.tipLabel),e.tipLabel.text="消耗完每天凌晨赠送5张转盘卷",e.tipLabel.x=233,e.tipLabel.y=975,e.tipLabel.width=289,e.tipLabel.height=22,e.tipLabel.size=20,e.tipLabel.color=16777215,e.startBtn=new morn.Button,e.addChild(e.startBtn),e.startBtn.skin="main_json.btn_start",e.startBtn.x=256,e.startBtn.y=1099,e.startBtn.stateNum=1,e.pointerImg=new morn.Image,e.addChild(e.pointerImg),e.pointerImg.skin="main_json.tan_pointer",e.pointerImg.x=372,e.pointerImg.y=590,e.pointerImg.anchorX=.5,e.pointerImg.anchorY=.652,e.pointerImg.rotation=0;var n=new morn.Image;e.addChild(n),n.skin="main_json.item_bg",n.x=826,n.y=688;var o=new morn.Image;e.addChild(o),o.skin="main_json.tan_titile",o.x=153,o.y=227},e}(morn.View);t.TransferUI=e,__reflect(e.prototype,"ui.TransferUI")}(ui||(ui={}));var game;!function(t){var e=function(){function t(){}return t.rotationEffect=function(t,e){},t.autoRotation=function(){},t}();t.EffectUtls=e,__reflect(e.prototype,"game.EffectUtls");var i=function(){function t(){}return t}();t.EffectUtlBean=i,__reflect(i.prototype,"game.EffectUtlBean")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.dogColor=function(t,e){if(this.dogColors||(this.dogColors={},this.dogColors[31]=[.546040942391183,.229338043805888,.224621013802929,0,30,.205905883755551,.799778924177114,-.00568480793266551,0,30,.0290401412170684,.501292895236028,.469666963546904,0,30,0,0,0,1,0],this.dogColors[32]=[-.133425167215474,.135020903628126,.998404263587348,0,0,.390814570523802,.803383354786634,-.194197925310436,0,0,-.525056639777552,1.54329599043558,-.0182393506580324,0,0,0,0,0,1,0],this.dogColors[33]=[-.574,1.43,.144,0,0,.426,.43,.144,0,0,.426,1.43,-.856,0,0,0,0,0,1,0],this.dogColors[34]=[-.252963215871403,1.72231491775594,-.469351701884542,0,0,.284248838199167,.406687068354976,.309064093445857,0,0,.882041315207649,.803128635904193,-.685169951111842,0,0,0,0,0,1,0],this.dogColors[35]=[.6823243810247,1.14233582138407,-.824660202408771,0,0,.00577366469924764,.680918773937788,.313307561362964,0,0,.879687802030142,-.201424626339778,.321736824309635,0,0,0,0,0,1,0],this.dogColors[36]=[.678963215871403,-.292314917755945,.613351701884542,0,0,.141751161800833,1.02331293164502,-.165064093445857,0,0,-.456041315207649,.626871364095806,.829169951111842,0,0,0,0,0,1,0]),this.dogColors[e.toString()]){var i=new egret.ColorMatrixFilter(this.dogColors[e.toString()]);
t.filters=[i]}},t.changeImageColor=function(t,e){var i=this.spliceColor(e),n=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];n[0]=i.r/255,n[6]=i.g/255,n[12]=i.b/255;var o=new egret.ColorMatrixFilter(n);t.filters=[o]},t.spliceColor=function(t){var e={r:-1,g:-1,b:-1};return e.b=t%256,e.g=Math.floor(t/256)%256,e.r=Math.floor(t/256/256),e},t}();t.ImageUtils=e,__reflect(e.prototype,"game.ImageUtils")}(game||(game={}));var game;!function(t){var e=function(){function t(){}return t.getDogStar=function(t){var e=t%5;return 0==e?5:e},t}();t.PetUtls=e,__reflect(e.prototype,"game.PetUtls")}(game||(game={}));